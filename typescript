Script started on Tue 14 Nov 2017 11:09:06 PM UTC
[1;36mThis is BASH [1;31m4.2[1;36m- DISPLAY on [1;31m:0.0[m

Tue Nov 14 23:09:06 UTC 2017
(23:09 root@ip-10-1-1-199 monitoring-system) > 
(23:09 root@ip-10-1-1-199 monitoring-system) > ./esc_main.py ^C
(23:09 root@ip-10-1-1-199 monitoring-system) > ps -eaf | grep -i sc[K[Kesc_main
root     16787  5247  0 23:06 pts/2    00:00:00 python ./[01;31m[Kesc_main[m[K.py
root     16883 16866  0 23:09 pts/8    00:00:00 grep --color=auto -i [01;31m[Kesc_main[m[K
(23:09 root@ip-10-1-1-199 monitoring-system) > ill[K[K[Kkill -9 16787
(23:09 root@ip-10-1-1-199 monitoring-system) > 
(23:09 root@ip-10-1-1-199 monitoring-system) > ./esc_main.py 
1
INFO: Using config file: ./openvpn-monitor.conf
Preparing DELETE >>>
			 Connected to MySQL database
Snmp stat handler
starting up on localhost port 10000
Created rest server handler
connecting to localhost port 10000
 !!!!!!!!!!!!!!!!!!!!!!!!!! 1 !!!!!!!!!!!!!!!!!!!!!!!!!!! 
{u'nclients': 7, u'bytesout': 114183309, u'bytesin': 32072347}
Waiting for a connection..
connection from ('127.0.0.1', 57448)
<socket._socketobject object at 0x2683a60>
Waiting for a connection..
 * Running on http://100.61.0.1:8080/ (Press CTRL+C to quit)
esc_sn015
<------ No notification ----->

esc_sn014
<------ No notification ----->

esc_sn023
<------ No notification ----->

esc_sn08
<------ No notification ----->

esc_sn01
<------ No notification ----->

esc_sn029
<------ No notification ----->

esc_sn026
<------ No notification ----->

{u'esc_sn08': 4, u'esc_sn01': 5, u'esc_sn023': 3, u'esc_sn026': 7, u'esc_sn029': 6, u'esc_sn015': 1, u'esc_sn014': 2}
			 new connections in App.. please sync with Db
Preparing DELETE >>>
			 Connected to MySQL database
HB thread active are...
[u'esc_sn08', u'esc_sn01', u'esc_sn023', u'esc_sn026', u'esc_sn029', u'esc_sn015', u'esc_sn014']
PING 100.61.0.14 (100.61.0.14) 56(84) bytes of data.
64 bytes from 100.61.0.14: icmp_seq=1 ttl=64 time=387 ms

--- 100.61.0.14 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 387.110/387.110/387.110/0.000 ms
Comm is up 100.61.0.14
PING 100.61.0.34 (100.61.0.34) 56(84) bytes of data.

--- 100.61.0.34 ping statistics ---
1 packets transmitted, 0 received, 100% packet loss, time 0ms

No response from 100.61.0.34
PING 100.61.0.22 (100.61.0.22) 56(84) bytes of data.
64 bytes from 100.61.0.22: icmp_seq=1 ttl=64 time=445 ms

--- 100.61.0.22 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 445.931/445.931/445.931/0.000 ms
Comm is up 100.61.0.22
PING 100.61.0.30 (100.61.0.30) 56(84) bytes of data.
{"sensorId":"fed_esc_029","bandIndex":0,"bandInfo":{"timeStampHealthCheck":14704.853613,"sensor":{"agcGain":57,"gpioOverLoad":0,"gpioSPIvalue":0,"rmsAverage":18.055470,"agcMaxVal":120,"noiseRssiDbm":-86.087822,"dcI":-10,"dcQ":-10,"iqImbalanceGaindB":0,"iqImbalancePhaseDeg":0,"numDmaOverflows":0},"adiSettings":{"adiRxLoHz":3571503998,"adiTxLoHz":3571503998,"adiGainValue":57,"adiTxAttenutation":88000,"adiRxClockHz":49151999,"adiTxClockHz":49151999}},"hps":{"oneMinLoad":0,"memoryFreeKb":717020,"memoryTotalKb":763048,"upTime":15078,"cpuClockSpeed":0},"i2c":{"humidity":6.988525,"temperature":111.074097,"compass_x_axis":177,"compass_y_axis":-437,"compass_z_axis":28,"compassChange":0}}
--------------> 

(rest_server) Waiting for data...
Event is set
{'hps': {'memoryFreeKb': 717020, 'cpuClockSpeed': 0, 'upTime': 15078, 'oneMinLoad': 0, 'memoryTotalKb': 763048}, 'sensorId': 'fed_esc_029', 'i2c': {'compassChange': 0, 'temperature': 111.074097, 'humidity': 6.988525, 'compass_x_axis': 177, 'compass_y_axis': -437, 'compass_z_axis': 28}, 'bandIndex': 0, 'bandInfo': {'adiSettings': {'adiTxAttenutation': 88000, 'adiTxClockHz': 49151999, 'adiRxClockHz': 49151999, 'adiTxLoHz': 3571503998, 'adiGainValue': 57, 'adiRxLoHz': 3571503998}, 'sensor': {'noiseRssiDbm': -86.087822, 'rmsAverage': 18.05547, 'gpioOverLoad': 0, 'gpioSPIvalue': 0, 'dcI': -10, 'numDmaOverflows': 0, 'iqImbalanceGaindB': 0, 'iqImbalancePhaseDeg': 0, 'agcGain': 57, 'agcMaxVal': 120, 'dcQ': -10}, 'timeStampHealthCheck': 14704.853613}}
escsn02_Q
[2017-11-14 23:09:38,362] ERROR in app: Exception on /upload/ [POST]
Traceback (most recent call last):
  File "/usr/lib64/python2.7/site-packages/flask/app.py", line 1982, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib64/python2.7/site-packages/flask/app.py", line 1614, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib64/python2.7/site-packages/flask/app.py", line 1517, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib64/python2.7/site-packages/flask/app.py", line 1612, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib64/python2.7/site-packages/flask/app.py", line 1598, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/home/sarath/monitoring-system/rest_server.py", line 30, in api_upload
    snmpStat.handle_response(response)
  File "/home/sarath/monitoring-system/snmp_stat.py", line 134, in handle_response
    escQ.newEscId.put(json_parse)
AttributeError: 'module' object has no attribute 'newEscId'
100.61.0.26 - - [14/Nov/2017 23:09:38] "POST /upload/ HTTP/1.1" 500 -
100.61.0.22 - - [14/Nov/2017 23:09:38] "POST /upload/ HTTP/1.1" 200 -
 !!!!!!!!!!!!!!!!!!!!!!!!!! 1 !!!!!!!!!!!!!!!!!!!!!!!!!!! 
{u'nclients': 7, u'bytesout': 114186536, u'bytesin': 32079492}
{u'esc_sn08': 4, u'esc_sn01': 5, u'esc_sn023': 3, u'esc_sn026': 7, u'esc_sn029': 6, u'esc_sn015': 1, u'esc_sn014': 2}
			 DB is in sync with App
HB thread active are...
[u'esc_sn08', u'esc_sn01', u'esc_sn023', u'esc_sn026', u'esc_sn029', u'esc_sn015', u'esc_sn014']
08:timeout
01:timeout
23:timeout
26:timeout
29:timeout
15:timeout
14:timeout

--- 100.61.0.30 ping statistics ---
1 packets transmitted, 0 received, 100% packet loss, time 0ms

No response from 100.61.0.30
PING 100.61.0.10 (100.61.0.10) 56(84) bytes of data.
{"sensorId":"fed_esc_029","bandIndex":1,"bandInfo":{"timeStampHealthCheck":14720.510180,"sensor":{"agcGain":57,"gpioOverLoad":0,"gpioSPIvalue":0,"rmsAverage":17.691807,"agcMaxVal":121,"noiseRssiDbm":-86.264557,"dcI":-10,"dcQ":-15,"iqImbalanceGaindB":0,"iqImbalancePhaseDeg":0,"numDmaOverflows":0},"adiSettings":{"adiRxLoHz":3621504000,"adiTxLoHz":3571503998,"adiGainValue":57,"adiTxAttenutation":88000,"adiRxClockHz":49151999,"adiTxClockHz":49151999}},"hps":{"oneMinLoad":0,"memoryFreeKb":717020,"memoryTotalKb":763048,"upTime":15093,"cpuClockSpeed":0},"i2c":{"humidity":6.890869,"temperature":111.164734,"compass_x_axis":172,"compass_y_axis":-434,"compass_z_axis":32,"compassChange":0}}
--------------> 

(rest_server) Waiting for data...
Event is set
{'hps': {'memoryFreeKb': 717020, 'cpuClockSpeed': 0, 'upTime': 15093, 'oneMinLoad': 0, 'memoryTotalKb': 763048}, 'sensorId': 'fed_esc_029', 'i2c': {'compassChange': 0, 'temperature': 111.164734, 'humidity': 6.890869, 'compass_x_axis': 172, 'compass_y_axis': -434, 'compass_z_axis': 32}, 'bandIndex': 1, 'bandInfo': {'adiSettings': {'adiTxAttenutation': 88000, 'adiTxClockHz': 49151999, 'adiRxClockHz': 49151999, 'adiTxLoHz': 3571503998, 'adiGainValue': 57, 'adiRxLoHz': 3621504000}, 'sensor': {'noiseRssiDbm': -86.264557, 'rmsAverage': 17.691807, 'gpioOverLoad': 0, 'gpioSPIvalue': 0, 'dcI': -10, 'numDmaOverflows': 0, 'iqImbalanceGaindB': 0, 'iqImbalancePhaseDeg': 0, 'agcGain': 57, 'agcMaxVal': 121, 'dcQ': -15}, 'timeStampHealthCheck': 14720.51018}}
escsn02_Q
[2017-11-14 23:09:54,018] ERROR in app: Exception on /upload/ [POST]
Traceback (most recent call last):
  File "/usr/lib64/python2.7/site-packages/flask/app.py", line 1982, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib64/python2.7/site-packages/flask/app.py", line 1614, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib64/python2.7/site-packages/flask/app.py", line 1517, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib64/python2.7/site-packages/flask/app.py", line 1612, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib64/python2.7/site-packages/flask/app.py", line 1598, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/home/sarath/monitoring-system/rest_server.py", line 30, in api_upload
    snmpStat.handle_response(response)
  File "/home/sarath/monitoring-system/snmp_stat.py", line 134, in handle_response
    escQ.newEscId.put(json_parse)
AttributeError: 'module' object has no attribute 'newEscId'
100.61.0.26 - - [14/Nov/2017 23:09:54] "POST /upload/ HTTP/1.1" 500 -
100.61.0.22 - - [14/Nov/2017 23:09:54] "POST /upload/ HTTP/1.1" 200 -
 !!!!!!!!!!!!!!!!!!!!!!!!!! 1 !!!!!!!!!!!!!!!!!!!!!!!!!!! 
{u'nclients': 7, u'bytesout': 114189351, u'bytesin': 32085605}
{u'esc_sn08': 4, u'esc_sn01': 5, u'esc_sn023': 3, u'esc_sn026': 7, u'esc_sn029': 6, u'esc_sn015': 1, u'esc_sn014': 2}
			 DB is in sync with App
HB thread active are...
[u'esc_sn08', u'esc_sn01', u'esc_sn023', u'esc_sn026', u'esc_sn029', u'esc_sn015', u'esc_sn014']

--- 100.61.0.10 ping statistics ---
1 packets transmitted, 0 received, 100% packet loss, time 0ms

No response from 100.61.0.10
PING 100.61.0.26 (100.61.0.26) 56(84) bytes of data.
64 bytes from 100.61.0.26: icmp_seq=1 ttl=64 time=86.7 ms

--- 100.61.0.26 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 86.715/86.715/86.715/0.000 ms
Comm is up 100.61.0.26
PING 100.61.0.18 (100.61.0.18) 56(84) bytes of data.
^CTraceback (most recent call last):
  File "./esc_main.py", line 90, in <module>
    main()
  File "./esc_main.py", line 70, in main
    time.sleep(interval)
KeyboardInterrupt

--- 100.61.0.18 ping statistics ---
1 packets transmitted, 0 received, 100% packet loss, time 0ms

No response from 100.61.0.18
PING 100.61.0.14 (100.61.0.14) 56(84) bytes of data.
64 bytes from 100.61.0.14: icmp_seq=1 ttl=64 time=215 ms

--- 100.61.0.14 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 215.733/215.733/215.733/0.000 ms
Comm is up 100.61.0.14
PING 100.61.0.34 (100.61.0.34) 56(84) bytes of data.
^Z
[1]+  Stopped                 ./esc_main.py
(23:10 root@ip-10-1-1-199 monitoring-system) > vim esc_u[Kqueue.py
[?1049h[?1h=[1;116r[34l[34h[?25h[23m[24m[0m[H[J[?25l[116;1H"esc_queue.py" 182L, 5070C[1;1H[33mdef[0m [36mesc_sn01_Q_thread[0m(username):[2;9Hthread_list.append(username)[3;9Hcounter=[31m0[0m[4;9H[33mwhile[0m [36mTrue[0m:[5;17H[33mtry[0m:[6;25Hhb = esc_sn01_Q.get([36mTrue[0m, [31m20[0m)[7;25H[33mif[0m hb:[8;29Hesc_sn01_Q.task_done()[9;17H[33mexcept[0m:[10;25H[36mprint[0m([31m"01:timeout"[0m)[11;25Hcounter = counter + [31m1[0m[12;25H[33mif[0m counter==[31m3[0m:[13;33Hcounter=[31m0[0m[14;33H[36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn01, raise a trap"[0m)[15;33Hthread_list.pop(username)[16;33H[33mbreak[17;25Helif[0m counter < [31m3[0m:[18;33H[33mcontinue[0m
[34m#o==================================o====================================o================================[0m
[33mdef[0m [36mesc_sn015_Q_thread[0m(username):[21;9Hthread_list.append(username)[22;9Hcounter=[31m0[0m[23;9H[33mwhile[0m [36mTrue[0m:[24;17H[33mtry[0m:[25;25Hhb = esc_sn015_Q.get([36mTrue[0m, [31m20[0m)[26;25H[33mif[0m hb:[27;29Hesc_sn015_Q.task_done()[28;17H[33mexcept[0m:[29;25H[36mprint[0m([31m"15:timeout"[0m)[30;25Hcounter = counter + [31m1[0m[31;25H[33mif[0m counter==[31m3[0m:[32;33Hcounter=[31m0[0m[33;33H[36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn015, raise a trap"[0m)[34;33Hthread_list.pop(username)[35;33H[33mbreak[36;25Helif[0m counter < [31m3[0m:[37;33H[33mcontinue[0m
[34m#o==================================o====================================o================================[0m
[33mdef[0m [36mesc_sn023_Q_thread[0m(username):[40;9Hthread_list.append(username)[41;9Hcounter=[31m0[0m[42;9H[33mwhile[0m [36mTrue[0m:[43;17H[33mtry[0m:[44;25Hhb = esc_sn023_Q.get([36mTrue[0m, [31m20[0m)[45;25H[33mif[0m hb:[46;29Hesc_sn023_Q.task_done()[47;17H[33mexcept[0m:[48;25H[36mprint[0m([31m"23:timeout"[0m)[49;25Hcounter = counter + [31m1[0m[50;25H[33mif[0m counter==[31m3[0m:[51;33Hcounter=[31m0[0m[52;33H[36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn023, raise a trap"[0m)[53;33Hthread_list.pop(username)[54;33H[33mbreak[55;25Helif[0m counter < [31m3[0m:[56;33H[33mcontinue[0m
[34m#o==================================o====================================o================================[0m
[33mdef[0m [36mesc_sn026_Q_thread[0m(username):[59;9Hthread_list.append(username)[60;9Hcounter=[31m0[0m[61;9H[33mwhile[0m [36mTrue[0m:[62;17H[33mtry[0m:[63;25Hhb = esc_sn026_Q.get([36mTrue[0m, [31m20[0m)[64;25H[33mif[0m hb:[65;29Hesc_sn026_Q.task_done()[66;17H[33mexcept[0m:[67;25H[36mprint[0m([31m"26:timeout"[0m)[68;25Hcounter = counter + [31m1[0m[69;25H[33mif[0m counter==[31m3[0m:[70;33Hcounter=[31m0[0m[71;33H[36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn026, raise a trap"[0m)[72;33Hthread_list.pop(username)[73;33H[33mbreak[74;25Helif[0m counter < [31m3[0m:[75;33H[33mcontinue[0m
[34m#o==================================o====================================o================================[0m
[33mdef[0m [36mesc_sn029_Q_thread[0m(username):[78;9Hthread_list.append(username)[79;9Hcounter=[31m0[0m[80;9H[33mwhile[0m [36mTrue[0m:[81;17H[33mtry[0m:[82;25Hhb = esc_sn029_Q.get([36mTrue[0m, [31m20[0m)[83;25H[33mif[0m hb:[84;29Hesc_sn029_Q.task_done()[85;17H[33mexcept[0m:[86;25H[36mprint[0m([31m"29:timeout"[0m)[87;25Hcounter = counter + [31m1[0m[88;25H[33mif[0m counter==[31m3[0m:[89;33Hcounter=[31m0[0m[90;33H[36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn029, raise a trap"[0m)[91;33Hthread_list.pop(username)[92;33H[33mbreak[93;25Helif[0m counter < [31m3[0m:[94;33H[33mcontinue[0m

[34m#o==================================o====================================o================================[0m
[33mdef[0m [36mesc_sn08_Q_thread[0m(username):[98;9Hthread_list.append(username)[99;9Hcounter=[31m0[0m[100;9H[33mwhile[0m [36mTrue[0m:[101;17H[33mtry[0m:[102;25Hhb = esc_sn08_Q.get([36mTrue[0m, [31m20[0m)[103;25H[33mif[0m hb:[104;29Hesc_sn08_Q.task_done()[105;17H[33mexcept[0m:[106;25H[36mprint[0m([31m"08:timeout"[0m)[107;25Hcounter = counter + [31m1[0m[108;25H[33mif[0m counter==[31m3[0m:[109;33Hcounter=[31m0[0m[110;33H[36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn08, raise a trap"[0m)[111;33Hthread_list.pop(username)[112;33H[33mbreak[113;25Helif[0m counter < [31m3[0m:[114;33H[33mcontinue[0m[116;215H182,0-1[7CBot[115;1H[34h[?25h[?25l[116;1H[K[116;1H:[34h[?25h1[?25l[34h[?25h[?25l[1;115r[1;1H[67L[1;116r[1;1H[34m#!/usr/bin/env python[0m

[35mfrom[0m Queue [35mimport[0m Queue
[35mimport[0m threading

esc_sn01_Q= Queue()
esc_sn015_Q = Queue()
esc_sn023_Q = Queue()
esc_sn026_Q = Queue()
esc_sn029_Q = Queue()
esc_sn08_Q = Queue()
esc_sn014_Q = Queue()

thread_list=[]


[33mdef[0m [36mesc_thread_handler[0m(username):[18;9H[33mif[0m username == [31m'esc_sn014'[0m:[19;17Hesc_worker = threading.Thread(name=username, target=esc_sn014_Q_thread, args=(username,))[20;17Hesc_worker.setDaemon = [36mTrue[0m[21;17Hesc_worker.start()[22;9H[33mif[0m username == [31m'esc_sn029'[0m:[23;17Hesc_worker = threading.Thread(name=username, target=esc_sn029_Q_thread, args=(username,))[24;17Hesc_worker.setDaemon = [36mTrue[0m[25;17Hesc_worker.start()[26;9H[33mif[0m username == [31m'esc_sn026'[0m:[27;17Hesc_worker = threading.Thread(name=username, target=esc_sn026_Q_thread, args=(username,))[28;17Hesc_worker.setDaemon = [36mTrue[0m[29;17Hesc_worker.start()[30;9H[33mif[0m username == [31m'esc_sn023'[0m:[31;17Hesc_worker = threading.Thread(name=username, target=esc_sn023_Q_thread, args=(username,))[32;17Hesc_worker.setDaemon = [36mTrue[0m[33;17Hesc_worker.start()[34;9H[33mif[0m username == [31m'esc_sn015'[0m:[35;17Hesc_worker = threading.Thread(name=username, target=esc_sn015_Q_thread, args=(username,))[36;17Hesc_worker.setDaemon = [36mTrue[0m[37;17Hesc_worker.start()[38;9H[33mif[0m username == [31m'esc_sn01'[0m:[39;17Hesc_worker = threading.Thread(name=username, target=esc_sn01_Q_thread, args=(username,))[40;17Hesc_worker.setDaemon = [36mTrue[0m[41;17Hesc_worker.start()[42;9H[33mif[0m username == [31m'esc_sn08'[0m:[43;17Hesc_worker = threading.Thread(name=username, target=esc_sn08_Q_thread, args=(username,))[44;17Hesc_worker.setDaemon = [36mTrue[0m[45;17Hesc_worker.start()

[34m#o==================================o====================================o================================[0m
[33mdef[0m [36mesc_sn014_Q_thread[0m(username):[49;9Hthread_list.append(username)[50;9Hcounter=[31m0[0m[51;9H[33mwhile[0m [36mTrue[0m:[52;17H[33mtry[0m:[53;25Hhb = esc_sn014_Q.get([36mTrue[0m, [31m20[0m)[54;25H[33mif[0m hb:[55;29Hesc_sn014_Q.task_done()[56;17H[33mexcept[0m:[57;25H[36mprint[0m([31m"14:timeout"[0m)[58;25Hcounter = counter + [31m1[0m[59;25H[33mif[0m counter==[31m3[0m:[60;33Hcounter=[31m0[0m[61;33H[36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn014, raise a trap"[0m)[62;33Hthread_list.pop(username)[63;33H[33mbreak[64;25Helif[0m counter < [31m3[0m:[65;33H[33mcontinue[0m

[34m#o==================================o====================================o================================[0m[116;1H[K[116;215H1,1[11CTop[1;1H[34h[?25h[?25l[116;215H2,0-1[2;1H[34h[?25h[?25l[116;215H3,1  [3;1H[34h[?25h[?25l[116;215H4[4;1H[34h[?25h[?25l[116;215H5,0-1[5;1H[34h[?25h[?25l[116;215H6,1  [6;1H[34h[?25h[?25l[116;215H7[7;1H[34h[?25h[?25l[116;215H8[8;1H[34h[?25h[?25l[116;215H9[9;1H[34h[?25h[?25l[116;215H10,1[10;1H[34h[?25h[?25l[116;215H[K[116;1H:[34h[?25hv[?25l[34h[?25h[?25l[116;2H[K[116;2H[34h[?25he[?25l[34h[?25h[?25l [34h[?25hs[?25l[34h[?25hn[?25l[34h[?25hm[?25l[34h[?25hp[?25l[34h[?25h...[?25l_stat.py[34h[?25h[?25l"snmp_stat.py" 278L, 10078C[1;12H[34mpython[0m[1;18H[K[3;1H[35mimport[0m socket[3;14H[K[4;8Hsys[4;11H[K[5;1H[35mimport[0m simplejson [33mas[0m json
[35mimport[0m trap_v2c [33mas[0m snmpA
[35mimport[0m unicodedata[7;19H[K[8;1H[35mimport[0m dynamodblib[8;19H[K[9;1H[35mimport[0m boto3[9;13H[K[10;1H[35mimport[0m atexit[10;15H[K[11;1H[35mimport[0m pickle[11;14H[K[12;1H[35mimport[0m threading[12;17H[K[13;1H[35mimport[0m time
[35mimport[0m logging

[35mfrom[0m pysnmp.entity.rfc3413.oneliner [35mimport[0m cmdgen
[35mfrom[0m pysnmp.proto [35mimport[0m rfc1902[17;33H[K[18;1H[35mimport[0m esc_queue [33mas[0m [30m[43mescQ[0m[18;25H[K[19;17H[K[20;1Hdyanmodb = dynamodblib.DynamoDB()[20;34H[K[21;1HhealthDB = dynamodblib.sensorHealthDB()
siteID_list=[][22;15H[K[23;1Hcreate_flag=[31m1[0m[23;17H[K[24;17H[K[25;1HcmdGen = cmdgen.CommandGenerator[26;9H[K[27;1H[34m#logging.basicConfig(level=logging.DEBUG, format='(%(threadName)-9s) %(message)s',)[0m[27;84H[K[28;17H[K[29;1H[33mdef[0m [36msetDB_str[0m(entry, value):[29;29H[K[30;5HerrorIndication, errorStatus, errorIndex, varBinds = cmdGen.setCmd([31;9Hcmdgen.CommunityData([31m'federated'[0m),[31;43H[K[32;9Hcmdgen.UdpTransportTarget(([31m'34.215.95.184'[0m, [31m161[0m)),[33;9H(entry, rfc1902.OctetString(value)),[34;9H)[34;10H[K[35;1H[34m# Check for errors and print out results[0m[35;41H[K[36;5H[33mif[0m errorIndication:[36;24H[K[37;13H[36mprint[0m(errorIndication
    [33melse[0m:[38;10H[K[39;9H[33mif[0m errorStatus:[39;24H[K[40;13H[36mprint[0m([31m'%s at %s'[0m % (errorStatus.prettyPrint(),[41;17H  errorIndex [33mand[0m varBinds[[36mint[0m(errorIndex) - [31m1[0m] [33mor[0m [31m'?'[0m))[42;9H[33melse[0m:[42;14H[K[43;13H[33mfor[0m name, val [33min[0m varBinds:[43;39H[K[44;17H[36mprint[0m([31m'%s = %s'[0m % (name.prettyPrint(), val.prettyPrint()))[45;17H[K[47;1H[33mdef[0m [36msetDB_int[0m(entry, value):[47;29H[K[48;1H    errorIndication, errorStatus, errorIndex, varBinds = cmdGen.setCmd([49;9Hcmdgen.CommunityData([31m'federated'[0m),[50;10Hmdgen.UdpTransportTarget(([31m'34.215.95.184'[0m, [31m161[0m)),[51;9H(entry, rfc1902.Integer(value)),[52;9H)[52;17H[K[53;1H[34m# Check for errors and print out results[0m[53;41H[K[54;5H[33mif[0m errorIndication:[54;25H[K[55;13H[36mprint[0m(errorIndication)[55;35H[K[56;5H[33melse[0m:[56;17H[K[57;9H[33mif[0m errorStatus:[57;25H[K[58;13H[36mprint[0m([31m'%s at %s'[0m % (errorStatus.prettyPrint(),[59;19HerrorIndex [33mand[0m varBinds[[36mint[0m(errorIndex) - [31m1[0m] [33mor[0m [31m'?'[0m))[60;9H[33melse[0m:[60;33H[K[61;13H[33mfor[0m name, val [33min[0m varBinds:[61;39H[K[62;17H[36mprint[0m([31m'%s = %s'[0m % (name.prettyPrint(), val.prettyPrint()))[63;33H[K[64;25H[K[65;1H[34m# unsigned handler[0m[65;33H[K[66;1H[33mdef[0m [36msetDB_unsigned[0m(entry, value):
    errorIndication, errorStatus, errorIndex, varBinds = cmdGen.setCmd([67;72H[K[68;1H        cmdgen.CommunityData([31m'federated'[0m),[69;9Hcmdgen.UdpTransportTarget(([31m'34.215.95.184'[0m, [31m161[0m)),[70;9H(entry, rfc1902.Counter64(value)),[71;9H)[71;10H[K[72;1H[34m# Check for errors and print out results[0m
    [33mif[0m errorIndication:[73;25H[K[74;13H[36mprint[0m(errorIndication)
    [33melse[0m:[75;29H[K[76;9H[33mif[0m errorStatus[77;13H[36mprint[0m([31m'%s at %s'[0m % (errorStatus.prettyPrint(),[78;19HerrorIndex [33mand[0m varBinds[[36mint[0m(errorIndex) - [31m1[0m] [33mor[0m [31m'?'[0m))[79;9H[33melse[0m:[79;25H[K[80;13H[33mfor[0m name, val [33min[0m varBinds:[80;39H[K[81;17H[36mprint[0m([31m'%s = %s'[0m % (name.prettyPrint(), val.prettyPrint()))[81;75H[K[82;33H[K[83;33H[K[84;25H[K[85;1H[34m# snmpset -v2c -c federated 34.215.95.184 1.3.6.1.4.1.8072.2.7.1.1.4.1.2.1 s "FL033C"
# esIndex         escID channelId detectionFlag timeStampSensorResults maxRssiDbm minRssiDbm maxSnrDb minSnrDb numDetections numAttempts numDetectionsTimeWindow numAttemptsTimeWindow probDetection probDetectionTimeWindow[0m
stats = [31m"1.3.6.1.4.1.8072.2.7.1.1.3.1."[0m[88;9H[K[89;9H[K[90;1H[34m#atexit.register(cleanup)[0m[91;17H[K[92;25H[K[93;1H[31m""" Function: Thread_2 handle csv file ahndler requests """[0m
[33mdef[0m [36mcsv_client_hdlr[0m(connection,e,t):[94;37H[K[95;5H[33mwhile[0m [36mTrue[0m:[95;17H[K[96;9H[33mwhile[0m [33mnot[0m e.isSet():[96;29H[K[97;13H[36mprint[0m([31m'wait for event timeout'[0m)[97;45H[K[98;13Hevent_is_set = e.wait()[98;36H[K[99;13H[33mif[0m event_is_set:[99;33H[K[100;17H[36mprint[0m([31m"Sync sent to CSV app"[0m)[100;46H[K[101;17Hdata=connection.send([31m"Sync"[0m)[101;45H[K[102;13H[33melse[0m:[102;33H[K[103;17H[36mprint[0m([31m'do nothing'[0m)[103;36H[K[104;9Htime.sleep([31m2[0m)[104;33H[K[105;1H[K[106;1H[K[107;1H[31m""" Function: Thread_1 handle rest server requests """[0m[108;9H[K[109;9H[K[110;1H[33mdef[0m [36mhandle_response[0m(data):
    [33mglobal[0m create_flag[111;25H[K[112;5Hindex_counter = [31m0[0m[112;25H[K[113;5Hhb_counter=[31m0[0m[113;29H[K[114;1H[34m# receive the data in small chunks
[0m    [34m#while True:[0m[115;25H[K[116;215H18,1[10CTop[18;1H[34h[?25h[?25l[116;216H9,0-1[19;1H[34h[?25h[?25l[116;215H20,1  [20;1H[34h[?25h[?25l[116;216H1[21;1H[34h[?25h[?25l[116;216H2[22;1H[34h[?25h[?25l[116;216H3[23;1H[34h[?25h[?25l[116;216H4,0-1[24;1H[34h[?25h[?25l[116;216H5,1  [25;1H[34h[?25h[?25l[116;216H6,0-1[26;1H[34h[?25h[?25l[116;216H7,1  [27;1H[34h[?25h[?25l[116;216H8,0-1[28;1H[34h[?25h[?25l[116;216H9,1  [29;1H[34h[?25h[?25l[116;215H30[30;1H[34h[?25h[?25l[116;216H1[31;1H[34h[?25h[?25l[116;216H2[32;1H[34h[?25h[?25l[116;216H3[33;1H[34h[?25h[?25l[116;216H4[34;1H[34h[?25h[?25l[116;216H5[35;1H[34h[?25h[?25l[116;216H6[36;1H[34h[?25h[?25l[116;216H7[37;1H[34h[?25h[?25l[116;216H8[38;1H[34h[?25h[?25l[116;216H9[39;1H[34h[?25h[?25l[116;1H/\<escQ\>[116;10H[K[116;1H[1;115r[1;1H[19M[1;116r[97;5H[36mprint[0m([31m"(rest_server) Waiting for data..."[0m)
    [34m#data = connection.recv(2048)[0m
    [33mif[0m data:[100;13Hjson_parse = json.loads(data)[101;13HjsonHdlr = [36mopen[0m([31m"health_data.json"[0m, [31m'w'[0m)[102;13Hpickle.dump(json_parse, jsonHdlr)[103;13HjsonHdlr.close()[104;13H[36mprint[0m([31m'Event is set'[0m)[105;13H[34m#e.set()[0m[107;13H[36mprint[0m(json_parse)[108;13HbandId = json_parse[[31m'bandIndex'[0m][110;13Hentry = bandId[111;13HescId = json_parse[[31m'sensorId'[0m][112;13H[34m#retrieve sensor Id fed_esc_029 to esc_sn029[0m[113;13HnewEscId = escId[[31m4[0m:[31m7[0m] + [31m"sn"[0m + escId[[31m8[0m:[31m10[0m] +[31m"_Q"[0m[114;13H[36mprint[0m(newEscId)[115;13H[30m[43mescQ[0m.newEscId.put(json_parse)[116;1H[K[116;215H134,13[8C11%[115;13H[34h[?25h[?25l[1;115r[115;1H
[1;116r[116;215H[K[116;215H135,0-1[7C12%[115;1H[34h[?25h[?25l[1;115r[115;1H
[1;116r[116;215H[K[116;215H136,0-1[7C12%[115;1H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;13H[36mprint[0m([31m"----------------------- rest_server_hdlr ---------------------[0m[35m\n[0m[31m"[0m)[116;215H[K[116;215H137,6-13      13%[115;13H[34h[?25h[?25l[116;217H6,0-1 [114;1H[34h[?25h[?25l[116;217H5[113;1H[34h[?25h[?25l[116;217H4,13 [112;13H[34h[?25h[?25l[116;217H3,6-13[111;13H[34h[?25h[?25l[5C[46m([8C)[0m[116;219H11-18[111;18H[34h[?25h[?25l([8C)[116;217H2,18   [110;18H[34h[?25h[?25l[116;220H9[110;19H[34h[?25h[?25l[116;219H20[110;20H[34h[?25h[?25l[116;220H1[110;21H[34h[?25h[?25l[116;220H2[110;22H[34h[?25h[?25l[116;220H3[110;23H[34h[?25h[?25l[116;220H4[110;24H[34h[?25h[?25l[116;220H5[110;25H[34h[?25h[?25l[116;220H6[110;26H[34h[?25h[?25l[116;220H7[110;27H[34h[?25h[?25l[116;220H8[110;28H[34h[?25h[?25ld[46m[[3C][0m[116;220H9[110;29H[34h[?25h[?25l[[3C][116;219H30[110;30H[34h[?25h[?25l[116;220H1[110;31H[34h[?25h[?25l[116;220H2[110;32H[34h[?25h[?25l[46m[[3C][0m[116;220H3[110;33H[34h[?25h[?25l[[3C][116;220H4[110;34H[34h[?25h[?25l[46m[[3C][0m[116;220H3[110;33H[34h[?25h[?25l[[3C][116;220H2[110;32H[34h[?25h[?25l[31m8[34h[?25h[?25l[0m[46m[[3C][0m[116;220H3[110;33H[34h[?25h[?25l[[3C][116;220H4[110;34H[34h[?25h[?25l[116;220H5[110;35H[34h[?25h[?25l[116;220H6[110;36H[34h[?25h[?25l[116;220H7[110;37H[34h[?25h[?25l[116;220H8[110;38H[34h[?25h[?25l[116;220H9[110;39H[34h[?25h[?25l[116;219H40[110;40H[34h[?25h[?25l[116;220H1[110;41H[34h[?25h[?25l[116;220H2[110;42H[34h[?25h[?25l[116;220H3[110;43H[34h[?25h[?25l[116;220H4[110;44H[34h[?25h[?25l[116;220H5[110;45H[34h[?25h[?25l[116;220H6[110;46H[34h[?25h[?25l[116;220H7[110;47H[34h[?25h[?25l[116;220H8[110;48H[34h[?25h[?25ld[46m[[4C][0m[116;220H9[110;49H[34h[?25h[?25l[[4C][116;219H50[110;50H[34h[?25h[?25l[116;220H1[110;51H[34h[?25h[?25l[116;220H2[110;52H[34h[?25h[?25l[116;220H3[110;53H[34h[?25h[?25l[31m1[34h[?25h[?25l[0m[116;215H[K[116;1H:[34h[?25hw[?25l[34h[?25hq[?25l[34h[?25h[?25l"snmp_stat.py" 278L, 10078C written
[?1l>[34h[?25h[?1049l(23:10 root@ip-10-1-1-199 monitoring-system) > vim typescript 
[?1049h[?1h=[1;116r[34l[34h[?25h[23m[24m[0m[H[J[?25l[116;1H"typescript" [noeol] 236L, 24576C[1;1HScript started on Tue 14 Nov 2017 11:09:06 PM UTC
[34m^[[0m[1;36mThis is BASH [34m^[[0m[1;31m4.2[34m^[[0m[1;36m- DISPLAY on [34m^[[0m[1;31m:0.0[34m^[[0m[m[34m^M
^M[0m
Tue Nov 14 23:09:06 UTC 2017[34m^M[0m
(23:09 root@ip-10-1-1-199 monitoring-system) > [34m^M[0m
(23:09 root@ip-10-1-1-199 monitoring-system) > ./esc_main.py ^C[34m^M[0m
(23:09 root@ip-10-1-1-199 monitoring-system) > ps -eaf | grep -i sc[34m^H^[[0m[K[34m^H^[[0m[Kesc_main[34m^M[0m
root     16787  5247  0 23:06 pts/2    00:00:00 python ./[34m^[[0m[01;31m[34m^[[0m[Kesc_main[34m^[[0m[m[34m^[[0m[K.py[34m^M[0m
root     16883 16866  0 23:09 pts/8    00:00:00 grep --color=auto -i [34m^[[0m[01;31m[34m^[[0m[Kesc_main[34m^[[0m[m[34m^[[0m[K[34m^M[0m
(23:09 root@ip-10-1-1-199 monitoring-system) > ill[34m^H^[[0m[K[34m^H^[[0m[K[34m^H^[[0m[K[34m^G^G[0mkill -9 16787[34m^M[0m
(23:09 root@ip-10-1-1-199 monitoring-system) > [34m^M[0m
(23:09 root@ip-10-1-1-199 monitoring-system) > ./esc_main.py [34m^M[0m
1[34m^M[0m
INFO: Using config file: ./openvpn-monitor.conf[34m^M[0m
Preparing DELETE >>>[34m^M[0m[16;26HConnected to MySQL database[34m^M[0m
Snmp stat handler[34m^M[0m
starting up on localhost port 10000[34m^M[0m
Created rest server handler[34m^M[0m
connecting to localhost port 10000[34m^M[0m
 !!!!!!!!!!!!!!!!!!!!!!!!!! 1 !!!!!!!!!!!!!!!!!!!!!!!!!!! [34m^M[0m
{u'nclients': 7, u'bytesout': 114183309, u'bytesin': 32072347}[34m^M[0m
Waiting for a connection..[34m^M[0m
connection from ('127.0.0.1', 57448)[34m^M[0m
<socket._socketobject object at 0x2683a60>[34m^M[0m
Waiting for a connection..[34m^M[0m
 * Running on http://100.61.0.1:8080/ (Press CTRL+C to quit)[34m^M[0m
esc_sn015[34m^M[0m
<------ No notification ----->[34m^M
^M[0m
esc_sn014[34m^M[0m
<------ No notification ----->[34m^M
^M[0m
esc_sn023[34m^M[0m
<------ No notification ----->[34m^M
^M[0m
esc_sn08[34m^M[0m
<------ No notification ----->[34m^M
^M[0m
esc_sn01[34m^M[0m
<------ No notification ----->[34m^M
^M[0m
esc_sn029[34m^M[0m
<------ No notification ----->[34m^M
^M[0m
esc_sn026[34m^M[0m
<------ No notification ----->[34m^M
^M[0m
{u'esc_sn08': 4, u'esc_sn01': 5, u'esc_sn023': 3, u'esc_sn026': 7, u'esc_sn029': 6, u'esc_sn015': 1, u'esc_sn014': 2}[34m^M[0m[50;26Hnew connections in App.. please sync with Db[34m^M[0m
Preparing DELETE >>>[34m^M[0m[52;26HConnected to MySQL database[34m^M[0m
HB thread active are...[34m^M[0m
[u'esc_sn08', u'esc_sn01', u'esc_sn023', u'esc_sn026', u'esc_sn029', u'esc_sn015', u'esc_sn014'][34m^M[0m
PING 100.61.0.14 (100.61.0.14) 56(84) bytes of data.[34m^M[0m
64 bytes from 100.61.0.14: icmp_seq=1 ttl=64 time=387 ms[34m^M
^M[0m
--- 100.61.0.14 ping statistics ---[34m^M[0m
1 packets transmitted, 1 received, 0% packet loss, time 0ms[34m^M[0m
rtt min/avg/max/mdev = 387.110/387.110/387.110/0.000 ms[34m^M[0m
Comm is up 100.61.0.14[34m^M[0m
PING 100.61.0.34 (100.61.0.34) 56(84) bytes of data.[34m^M
^M[0m
--- 100.61.0.34 ping statistics ---[34m^M[0m
1 packets transmitted, 0 received, 100% packet loss, time 0ms[34m^M
^M[0m
No response from 100.61.0.34[34m^M[0m
PING 100.61.0.22 (100.61.0.22) 56(84) bytes of data.[34m^M[0m
64 bytes from 100.61.0.22: icmp_seq=1 ttl=64 time=445 ms[34m^M
^M[0m
--- 100.61.0.22 ping statistics ---[34m^M[0m
1 packets transmitted, 1 received, 0% packet loss, time 0ms[34m^M[0m
rtt min/avg/max/mdev = 445.931/445.931/445.931/0.000 ms[34m^M[0m
Comm is up 100.61.0.22[34m^M[0m
PING 100.61.0.30 (100.61.0.30) 56(84) bytes of data.[34m^M[0m
{"sensorId":"fed_esc_029","bandIndex":0,"bandInfo":{"timeStampHealthCheck":14704.853613,"sensor":{"agcGain":57,"gpioOverLoad":0,"gpioSPIvalue":0,"rmsAverage":18.055470,"agcMaxVal":120,"noiseRssiDbm":-86.087822,"dcI":-10,"dcQ":-10,"ii[77;1HqImbalanceGaindB":0,"iqImbalancePhaseDeg":0,"numDmaOverflows":0},"adiSettings":{"adiRxLoHz":3571503998,"adiTxLoHz":3571503998,"adiGainValue":57,"adiTxAttenutation":88000,"adiRxClockHz":49151999,"adiTxClockHz":49151999}},"hps":{"oneMM[78;1HinLoad":0,"memoryFreeKb":717020,"memoryTotalKb":763048,"upTime":15078,"cpuClockSpeed":0},"i2c":{"humidity":6.988525,"temperature":111.074097,"compass_x_axis":177,"compass_y_axis":-437,"compass_z_axis":28,"compassChange":0}}[34m^M[0m
--------------> [34m^M
^M[0m
(rest_server) Waiting for data...[34m^M[0m
Event is set[34m^M[0m
{'hps': {'memoryFreeKb': 717020, 'cpuClockSpeed': 0, 'upTime': 15078, 'oneMinLoad': 0, 'memoryTotalKb': 763048}, 'sensorId': 'fed_esc_029', 'i2c': {'compassChange': 0, 'temperature': 111.074097, 'humidity': 6.988525, 'compass_x_axiss[84;1H': 177, 'compass_y_axis': -437, 'compass_z_axis': 28}, 'bandIndex': 0, 'bandInfo': {'adiSettings': {'adiTxAttenutation': 88000, 'adiTxClockHz': 49151999, 'adiRxClockHz': 49151999, 'adiTxLoHz': 3571503998, 'adiGainValue': 57, 'adiRxLL[85;1HoHz': 3571503998}, 'sensor': {'noiseRssiDbm': -86.087822, 'rmsAverage': 18.05547, 'gpioOverLoad': 0, 'gpioSPIvalue': 0, 'dcI': -10, 'numDmaOverflows': 0, 'iqImbalanceGaindB': 0, 'iqImbalancePhaseDeg': 0, 'agcGain': 57, 'agcMaxVal':  [86;1H120, 'dcQ': -10}, 'timeStampHealthCheck': 14704.853613}}[34m^M[0m
escsn02_Q[34m^M[0m
[2017-11-14 23:09:38,362] ERROR in app: Exception on /upload/ [POST][34m^M[0m
Traceback (most recent call last):[34m^M[0m
  File "/usr/lib64/python2.7/site-packages/flask/app.py", line 1982, in wsgi_app[34m^M[0m
    response = self.full_dispatch_request()[34m^M[0m
  File "/usr/lib64/python2.7/site-packages/flask/app.py", line 1614, in full_dispatch_request[34m^M[0m
    rv = self.handle_user_exception(e)[34m^M[0m
  File "/usr/lib64/python2.7/site-packages/flask/app.py", line 1517, in handle_user_exception[34m^M[0m
    reraise(exc_type, exc_value, tb)[34m^M[0m
  File "/usr/lib64/python2.7/site-packages/flask/app.py", line 1612, in full_dispatch_request[34m^M[0m
    rv = self.dispatch_request()[34m^M[0m
  File "/usr/lib64/python2.7/site-packages/flask/app.py", line 1598, in dispatch_request[34m^M[0m
    return self.view_functions[rule.endpoint](**req.view_args)[34m^M[0m
  File "/home/sarath/monitoring-system/rest_server.py", line 30, in api_upload[34m^M[0m
    snmpStat.handle_response(response)[34m^M[0m
  File "/home/sarath/monitoring-system/snmp_stat.py", line 134, in handle_response[34m^M[0m
    [30m[43mescQ[0m.newEscId.put(json_parse)[34m^M[0m
AttributeError: 'module' object has no attribute 'newEscId'[34m^M[0m
100.61.0.26 - - [14/Nov/2017 23:09:38] "POST /upload/ HTTP/1.1" 500 -[34m^M[0m
100.61.0.22 - - [14/Nov/2017 23:09:38] "POST /upload/ HTTP/1.1" 200 -[34m^M[0m
 !!!!!!!!!!!!!!!!!!!!!!!!!! 1 !!!!!!!!!!!!!!!!!!!!!!!!!!! [34m^M[0m
{u'nclients': 7, u'bytesout': 114186536, u'bytesin': 32079492}[34m^M[0m
{u'esc_sn08': 4, u'esc_sn01': 5, u'esc_sn023': 3, u'esc_sn026': 7, u'esc_sn029': 6, u'esc_sn015': 1, u'esc_sn014': 2}[34m^M[0m[110;26HDB is in sync with App[34m^M[0m
HB thread active are...[34m^M[0m
[u'esc_sn08', u'esc_sn01', u'esc_sn023', u'esc_sn026', u'esc_sn029', u'esc_sn015', u'esc_sn014'][34m^M[0m
08:timeout[34m^M[0m
01:timeout[34m^M[0m
23:timeout[34m^M[0m[116;215H1,1[11CTop[1;1H[34h[?25h[?25l[116;215H2[2;1H[34h[?25h[?25l[116;215H3[3;1H[34h[?25h[?25l[116;215H4[4;1H[34h[?25h[?25l
[46m([42C)[0m[116;215H5[5;1H[34h[?25h[?25l([42C)
[46m([42C)[0m[116;215H6[6;1H[34h[?25h[?25l([42C)
[46m([42C)[0m[116;215H7[7;1H[34h[?25h[?25l([42C)[116;215H8[8;1H[34h[?25h[?25l[116;215H9[9;1H[34h[?25h[?25l
[46m([42C)[0m[116;215H10,1[10;1H[34h[?25h[?25l([42C)
[46m([42C)[0m[116;216H1[11;1H[34h[?25h[?25l([42C)
[46m([42C)[0m[116;216H2[12;1H[34h[?25h[?25l([42C)[116;216H3[13;1H[34h[?25h[?25l[116;216H4[14;1H[34h[?25h[?25l[116;216H5[15;1H[34h[?25h[?25l[116;216H6,1-8[16;8H[34h[?25h[?25l[116;216H7,1  [17;1H[34h[?25h[?25l[116;216H8[18;1H[34h[?25h[?25l[116;216H9[19;1H[34h[?25h[?25l[116;215H20[20;1H[34h[?25h[?25l[116;216H1[21;1H[34h[?25h[?25l
[46m{[60C}[0m[116;216H2[22;1H[34h[?25h[?25l{[60C}[116;216H3[23;1H[34h[?25h[?25l[116;216H4[24;1H[34h[?25h[?25l[116;216H5[25;1H[34h[?25h[?25l[116;216H6[26;1H[34h[?25h[?25l[116;216H7[27;1H[34h[?25h[?25l[116;216H8[28;1H[34h[?25h[?25l[116;216H9[29;1H[34h[?25h[?25l[116;215H30[30;1H[34h[?25h[?25l[116;216H1[31;1H[34h[?25h[?25l[116;216H2[32;1H[34h[?25h[?25l[116;216H3[33;1H[34h[?25h[?25l[116;216H4[34;1H[34h[?25h[?25l[116;216H5[35;1H[34h[?25h[?25l[116;216H6[36;1H[34h[?25h[?25l[116;216H7[37;1H[34h[?25h[?25l[116;216H8[38;1H[34h[?25h[?25l[116;216H9[39;1H[34h[?25h[?25l[116;215H40[40;1H[34h[?25h[?25l[116;216H1[41;1H[34h[?25h[?25l[116;216H2[42;1H[34h[?25h[?25l[116;216H3[43;1H[34h[?25h[?25l[116;216H4[44;1H[34h[?25h[?25l[116;216H5[45;1H[34h[?25h[?25l[116;216H6[46;1H[34h[?25h[?25l[116;216H7[47;1H[34h[?25h[?25l[116;216H8[48;1H[34h[?25h[?25l
[46m{[115C}[0m[116;216H9[49;1H[34h[?25h[?25l{[115C}[116;215H50,1-8[50;8H[34h[?25h[?25l[116;216H1,1  [51;1H[34h[?25h[?25l[116;216H2,1-8[52;8H[34h[?25h[?25l[116;216H3,1  [53;1H[34h[?25h[?25l
[46m[[94C][0m[116;216H4[54;1H[34h[?25h[?25l[[94C][116;216H5[55;1H[34h[?25h[?25l[116;216H6[56;1H[34h[?25h[?25l[116;216H7[57;1H[34h[?25h[?25l[116;216H8[58;1H[34h[?25h[?25l[116;216H9[59;1H[34h[?25h[?25l[116;215H60[60;1H[34h[?25h[?25l[116;216H1[61;1H[34h[?25h[?25l[116;216H2[62;1H[34h[?25h[?25l[116;216H3[63;1H[34h[?25h[?25l[116;216H4[64;1H[34h[?25h[?25l[116;216H5[65;1H[34h[?25h[?25l[116;216H6[66;1H[34h[?25h[?25l[116;216H7[67;1H[34h[?25h[?25l[116;216H8[68;1H[34h[?25h[?25l[116;216H9[69;1H[34h[?25h[?25l[116;215H70[70;1H[34h[?25h[?25l[116;216H1[71;1H[34h[?25h[?25l[116;216H2[72;1H[34h[?25h[?25l[116;216H3[73;1H[34h[?25h[?25l[116;216H4[74;1H[34h[?25h[?25l[116;216H5[75;1H[34h[?25h[?25l
[46m{[0m[230Cii[77;1Hq[230CMM[78;1Hi[221C[46m}[0m[116;216H6[76;1H[34h[?25h[?25l{[230Cii[77;1Hq[230CMM[78;1Hi[221C}[116;216H7[79;1H[34h[?25h[?25l[116;216H8[80;1H[34h[?25h[?25l
[46m([11C)[0m[116;216H9[81;1H[34h[?25h[?25l([11C)[116;215H80[82;1H[34h[?25h[?25l
[46m{[0m[230Css[84;1H'[230CLL[85;1Ho[230C  [86;1H1[54C[46m}[0m[116;216H1[83;1H[34h[?25h[?25l{[230Css[84;1H'[230CLL[85;1Ho[230C  [86;1H1[54C}[116;216H2[87;1H[34h[?25h[?25l
[46m[[23C][0m[116;216H3[88;1H[34h[?25h[?25l[[23C][116;216H2[87;1H[34h[?25h[?25l[116;218H2[87;2H[34h[?25h[?25l[116;218H3[87;3H[34h[?25h[?25l[116;218H4[87;4H[34h[?25h[?25l[116;218H5[87;5H[34h[?25h[?25l[116;218H6[87;6H[34h[?25h[?25l[116;218H7[87;7H[34h[?25h[?25l[116;218H6[87;6H[34h[?25h[?25l[116;1H[K[116;1H:[34h[?25hq[?25l[34h[?25h[?25l[116;1H[K[116;1H[?1l>[34h[?25h[?1049l(23:10 root@ip-10-1-1-199 monitoring-system) > vim typescript esc_queue.py
[?1049h[?1h=[1;116r[34l[34h[?25h[23m[24m[0m[H[J[?25l[116;1H"esc_queue.py" 182L, 5070C[1;1H[34m#!/usr/bin/env python[0m

[35mfrom[0m Queue [35mimport[0m Queue
[35mimport[0m threading

esc_sn01_Q= Queue()
esc_sn015_Q = Queue()
esc_sn023_Q = Queue()
esc_sn026_Q = Queue()
esc_sn029_Q = Queue()
esc_sn08_Q = Queue()
esc_sn014_Q = Queue()

thread_list=[]


[33mdef[0m [36mesc_thread_handler[0m(username):[18;9H[33mif[0m username == [31m'esc_sn014'[0m:[19;17Hesc_worker = threading.Thread(name=username, target=esc_sn014_Q_thread, args=(username,))[20;17Hesc_worker.setDaemon = [36mTrue[0m[21;17Hesc_worker.start()[22;9H[33mif[0m username == [31m'esc_sn029'[0m:[23;17Hesc_worker = threading.Thread(name=username, target=esc_sn029_Q_thread, args=(username,))[24;17Hesc_worker.setDaemon = [36mTrue[0m[25;17Hesc_worker.start()[26;9H[33mif[0m username == [31m'esc_sn026'[0m:[27;17Hesc_worker = threading.Thread(name=username, target=esc_sn026_Q_thread, args=(username,))[28;17Hesc_worker.setDaemon = [36mTrue[0m[29;17Hesc_worker.start()[30;9H[33mif[0m username == [31m'esc_sn023'[0m:[31;17Hesc_worker = threading.Thread(name=username, target=esc_sn023_Q_thread, args=(username,))[32;17Hesc_worker.setDaemon = [36mTrue[0m[33;17Hesc_worker.start()[34;9H[33mif[0m username == [31m'esc_sn015'[0m:[35;17Hesc_worker = threading.Thread(name=username, target=esc_sn015_Q_thread, args=(username,))[36;17Hesc_worker.setDaemon = [36mTrue[0m[37;17Hesc_worker.start()[38;9H[33mif[0m username == [31m'esc_sn01'[0m:[39;17Hesc_worker = threading.Thread(name=username, target=esc_sn01_Q_thread, args=(username,))[40;17Hesc_worker.setDaemon = [36mTrue[0m[41;17Hesc_worker.start()[42;9H[33mif[0m username == [31m'esc_sn08'[0m:[43;17Hesc_worker = threading.Thread(name=username, target=esc_sn08_Q_thread, args=(username,))[44;17Hesc_worker.setDaemon = [36mTrue[0m[45;17Hesc_worker.start()

[34m#o==================================o====================================o================================[0m
[33mdef[0m [36mesc_sn014_Q_thread[0m(username):[49;9Hthread_list.append(username)[50;9Hcounter=[31m0[0m[51;9H[33mwhile[0m [36mTrue[0m:[52;17H[33mtry[0m:[53;25Hhb = esc_sn014_Q.get([36mTrue[0m, [31m20[0m)[54;25H[33mif[0m hb:[55;29Hesc_sn014_Q.task_done()[56;17H[33mexcept[0m:[57;25H[36mprint[0m([31m"14:timeout"[0m)[58;25Hcounter = counter + [31m1[0m[59;25H[33mif[0m counter==[31m3[0m:[60;33Hcounter=[31m0[0m[61;33H[36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn014, raise a trap"[0m)[62;33Hthread_list.pop(username)[63;33H[33mbreak[64;25Helif[0m counter < [31m3[0m:[65;33H[33mcontinue[0m

[34m#o==================================o====================================o================================[0m
[33mdef[0m [36mesc_sn01_Q_thread[0m(username):[69;9Hthread_list.append(username)[70;9Hcounter=[31m0[0m[71;9H[33mwhile[0m [36mTrue[0m:[72;17H[33mtry[0m:[73;25Hhb = esc_sn01_Q.get([36mTrue[0m, [31m20[0m)[74;25H[33mif[0m hb:[75;29Hesc_sn01_Q.task_done()[76;17H[33mexcept[0m:[77;25H[36mprint[0m([31m"01:timeout"[0m)[78;25Hcounter = counter + [31m1[0m[79;25H[33mif[0m counter==[31m3[0m:[80;33Hcounter=[31m0[0m[81;33H[36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn01, raise a trap"[0m)[82;33Hthread_list.pop(username)[83;33H[33mbreak[84;25Helif[0m counter < [31m3[0m:[85;33H[33mcontinue[0m
[34m#o==================================o====================================o================================[0m
[33mdef[0m [36mesc_sn015_Q_thread[0m(username):[88;9Hthread_list.append(username)[89;9Hcounter=[31m0[0m[90;9H[33mwhile[0m [36mTrue[0m:[91;17H[33mtry[0m:[92;25Hhb = esc_sn015_Q.get([36mTrue[0m, [31m20[0m)[93;25H[33mif[0m hb:[94;29Hesc_sn015_Q.task_done()[95;17H[33mexcept[0m:[96;25H[36mprint[0m([31m"15:timeout"[0m)[97;25Hcounter = counter + [31m1[0m[98;25H[33mif[0m counter==[31m3[0m:[99;33Hcounter=[31m0[0m[100;33H[36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn015, raise a trap"[0m)[101;33Hthread_list.pop(username)[102;33H[33mbreak[103;25Helif[0m counter < [31m3[0m:[104;33H[33mcontinue[0m
[34m#o==================================o====================================o================================[0m
[33mdef[0m [36mesc_sn023_Q_thread[0m(username):[107;9Hthread_list.append(username)[108;9Hcounter=[31m0[0m[109;9H[33mwhile[0m [36mTrue[0m:[110;17H[33mtry[0m:[111;25Hhb = esc_sn023_Q.get([36mTrue[0m, [31m20[0m)[112;25H[33mif[0m hb:[113;29Hesc_sn023_Q.task_done()[114;17H[33mexcept[0m:[115;25H[36mprint[0m([31m"23:timeout"[0m)[116;215H10,1[10CTop[10;1H[34h[?25h[?25l[116;218H2[10;2H[34h[?25h[?25l[116;218H3[10;3H[34h[?25h[?25l[116;218H4[10;4H[34h[?25h[?25l[116;218H5[10;5H[34h[?25h[?25l[116;218H6[10;6H[34h[?25h[?25l[116;218H7[10;7H[34h[?25h[?25l[116;218H8[10;8H[34h[?25h[?25l[116;218H9[10;9H[34h[?25h[?25l[116;218H10[10;10H[34h[?25h[?25l[116;219H1[10;11H[34h[?25h[?25l[116;219H2[10;12H[34h[?25h[?25l[116;219H3[10;13H[34h[?25h[?25l[116;219H4[10;14H[34h[?25h[?25l[116;219H5[10;15H[34h[?25h[?25l[116;219H6[10;16H[34h[?25h[?25l[116;219H7[10;17H[34h[?25h[?25l[116;219H8[10;18H[34h[?25h[?25l[116;219H9[10;19H[34h[?25h[?25le[46m()[0m[116;218H20[10;20H[34h[?25h[?25l[116;219H1[10;21H[34h[?25h[?25l[116;1H/\<escQ\>[116;10H[K[116;1H[31msearch hit BOTTOM, continuing at TOP[0m[1m[37m[41mE486: Pattern not found: \<escQ\>[0m[116;34H[K[116;215H10,21[9CTop[10;21H[34h[?25h[?25l[116;1H/\<escQ\>[116;10H[K[116;1H[31msearch hit BOTTOM, continuing at TOP[0m[1m[37m[41mE486: Pattern not found: \<escQ\>[0m[116;34H[K[116;215H10,21[9CTop[10;21H[34h[?25h[?25l[9;20H[46m()[0m[10;20H()[116;215H9,21 [9;21H[34h[?25h[?25l()[10;20H[46m()[0m[116;215H10,21[10;21H[34h[?25h[?25l()[11;19H[46m()[0m[116;216H1,20[11;20H[34h[?25h[?25l()[12;20H[46m()[0m[116;216H2,21[12;21H[34h[?25h[?25l()[116;216H3,0-1[13;1H[34h[?25h[?25l[116;1H[K[116;1H:[34h[?25he[?25l[34h[?25h[?25l [34h[?25hs[?25l[34h[?25hn[?25l[34h[?25hm[?25l[34h[?25h...[?25lp_stat.py[34h[?25h[?25l"snmp_stat.py" 278L, 10078C[1;1H    [33melse[0m:[1;10H[K[2;9H[33mif[0m errorStatus:
            [36mprint[0m([31m'%s at %s'[0m % (errorStatus.prettyPrint(),
                  errorIndex [33mand[0m varBinds[[36mint[0m(errorIndex) - [31m1[0m] [33mor[0m [31m'?'[0m))[5;9H[33melse[0m:
            [33mfor[0m name, val [33min[0m varBinds:
                [36mprint[0m([31m'%s = %s'[0m % (name.prettyPrint(), val.prettyPrint()))[8;1H[K[9;1H[K[10;1H[K[11;1H[34m# snmpset -v2c -c federated 34.215.95.184 1.3.6.1.4.1.8072.2.7.1.1.4.1.2.1 s "FL033C"
# esIndex         escID channelId detectionFlag timeStampSensorResults maxRssiDbm minRssiDbm maxSnrDb minSnrDb numDetections numAttempts numDetectionsTimeWindow numAttemptsTimeWindow probDetection probDetectionTimeWindow[0m
stats = [31m"1.3.6.1.4.1.8072.2.7.1.1.3.1."[0m[14;1H[K[16;1H[34m#atexit.register(cleanup)[0m[17;1H[K[18;9H[K[19;1H[31m""" Function: Thread_2 handle csv file ahndler requests """[0m[19;60H[K[20;1H[33mdef[0m [36mcsv_client_hdlr[0m(connection,e,t):[20;38H[K[21;5H[33mwhile[0m [36mTrue[0m:[21;17H[K[22;9H[33mwhile[0m [33mnot[0m e.isSet():[22;29H[K[23;13H[36mprint[0m([31m'wait for event timeout'[0m)[23;44H[K[24;13Hevent_is_set = e.wait()[24;36H[K[25;13H[33mif[0m event_is_set:[25;29H[K[26;9H        [36mprint[0m([31m"Sync sent to CSV app"[0m)[27;17Hdata=connection.send([31m"Sync"[0m)[27;45H[K[28;13H[33melse[0m:[28;18H[K[29;17H[36mprint[0m([31m'do nothing'[0m)[30;9Htime.sleep([31m2[0m)[30;22H[K[31;17H[K[32;17H[K[33;1H[31m""" Function: Thread_1 handle rest server requests """[0m[34;9H[K[35;17H[K[36;1H[33mdef[0m [36mhandle_response[0m(data):[36;27H[K[37;5H[33mglobal[0m create_flag[37;23H[K[38;5Hindex_counter = [31m0[0m[38;22H[K[39;5Hhb_counter=[31m0[0m[39;17H[K[40;1H[34m# receive the data in small chunks[0m[40;35H[K[41;5H[34m#while True:[0m[41;17H[K[42;5H[36mprint[0m([31m"(rest_server) Waiting for data..."[0m)
    [34m#data = connection.recv(2048)[0m[43;34H[K[44;5H[33mif[0m data:[44;17H[K[45;13Hjson_parse = json.loads(data)[46;13HjsonHdlr = [36mopen[0m([31m"health_data.json"[0m, [31m'w'[0m)
            pickle.dump(json_parse, jsonHdlr)[47;46H[K[48;1H            jsonHdlr.close()[48;29H[K[49;9H    [36mprint[0m([31m'Event is set'[0m)[49;34H[K[50;9H    [34m#e.set()[0m[51;9H[K[52;13H[36mprint[0m(json_parse)[53;13HbandId = json_parse[[31m'bandIndex'[0m][53;45H[K[54;25H[K[55;13Hentry = bandId[55;29H[K[56;13HescId = json_parse[[31m'sensorId'[0m][57;13H[34m#retrieve sensor Id fed_esc_029 to esc_sn029[0m[58;13HnewEscId = escId[[31m4[0m:[31m8[0m] + [31m"sn"[0m + escId[[31m8[0m:[31m11[0m] +[31m"_Q"[0m[59;13H[36mprint[0m(newEscId)[59;28H[K[60;13H[30m[43mescQ[0m.newEscId.put(json_parse)[61;33H[K[62;33H[K[63;13H[36mprint[0m([31m"----------------------- rest_server_hdlr ---------------------[0m[35m\n[0m[31m"[0m)[64;13H[33mif[0m ((bandId == [31m0[0m [33mor[0m bandId == [31m1[0m) [33mand[0m index_counter < [31m6[0m):[65;17H[36mprint[0m([31m"---> Window Stared <---"[0m)[66;17H[33mif[0m (create_flag == [31m1[0m):
                    [33mfor[0m num [33min[0m [36mxrange[0m([31m1[0m,[31m7[0m):[67;44H[K[68;1H                        siteId = escId + [31m"_"[0m + [36mstr[0m(num)[69;9H                siteID_list.append(siteId)[70;9H         [7ChealthDB.createItem(siteId)[71;9H            create_flag = [31m0[0m[72;17H[33melse[0m:[73;25H[36mprint[0m([31m""[0m)[73;34H[K[74;25H[K[75;13H[33mif[0m(index_counter == [31m6[0m):[75;36H[K[76;17H[36mprint[0m([31m"reset counter to zero"[0m)[77;17Hindex_counter = [31m0[0m[77;34H[K[78;25H[K[79;13HbandInfo = json_parse[[31m'bandInfo'[0m][[31m'timeStampHealthCheck'[0m][80;13Hsensor = json_parse[[31m'bandInfo'[0m][[31m'sensor'[0m][81;13HadiSettings = json_parse[[31m'bandInfo'[0m][[31m'adiSettings'[0m][81;64H[K[82;13Hhps = json_parse[[31m'hps'[0m][82;36H[K[83;13Hi2c = json_parse[[31m'i2c'[0m][83;36H[K[84;25H[K[85;9H[34m# print("DEBUG -> timeStamp %s" %bandInfo)[0m
        [34m# print("DEBUG -> sensor %s" %sensor)[0m[86;46H[K[87;1H        [34m# print("DEBUG -> adiSettings %s" %adiSettings)[88;9H# print("DEBUG -> hps%s" %hps)[89;9H# print("DEBUG -> i2c%s" %i2c)[0m[90;9H[K[91;13HsetDB_str((stats + [36mstr[0m([31m2[0m) + [31m"."[0m + [36mstr[0m(entry)), escId);[92;13HsetDB_int((stats + [36mstr[0m([31m3[0m) + [31m"."[0m + [36mstr[0m(entry)), bandId);[93;13HsetDB_int((stats + [36mstr[0m([31m4[0m) + [31m"."[0m + [36mstr[0m(entry)), bandInfo);[94;13HsetDB_int((stats + [36mstr[0m([31m5[0m) + [31m"."[0m + [36mstr[0m(entry)), sensor[[31m'agcGain'[0m]);[95;13HsetDB_int((stats + [36mstr[0m([31m6[0m) + [31m"."[0m + [36mstr[0m(entry)),[96;23Hsensor[[31m'gpioOverLoad'[0m]);[97;13HsetDB_int((stats + [36mstr[0m([31m7[0m) + [31m"."[0m + [36mstr[0m(entry)),[98;23Hsensor[[31m'gpioSPIvalue'[0m]);[99;13HsetDB_str((stats + [36mstr[0m([31m8[0m) + [31m"."[0m + [36mstr[0m(entry)),[100;23Hsensor[[31m'rmsAverage'[0m]);[100;45H[K[101;13HsetDB_int((stats + [36mstr[0m([31m9[0m) + [31m"."[0m + [36mstr[0m(entry)),[102;23Hsensor[[31m'agcMaxVal'[0m]);[103;13HsetDB_str((stats + [36mstr[0m([31m10[0m) + [31m"."[0m + [36mstr[0m(entry)),[104;23Hsensor[[31m'noiseRssiDbm'[0m]);
            setDB_int((stats + [36mstr[0m([31m11[0m) + [31m"."[0m + [36mstr[0m(entry)), sensor[[31m'dcI'[0m]);[105;76H[K[106;1H            setDB_int((stats + [36mstr[0m([31m12[0m) + [31m"."[0m + [36mstr[0m(entry)), sensor[[31m'dcQ'[0m]);[107;9H    setDB_int((stats + [36mstr[0m([31m13[0m) + [31m"."[0m + [36mstr[0m(entry)),[108;9H              sensor[[31m'iqImbalanceGaindB'[0m]);[109;9H    setDB_int((stats + [36mstr[0m([31m14[0m) + [31m"."[0m + [36mstr[0m(entry)),[110;17H      sensor[[31m'iqImbalancePhaseDeg'[0m]);[111;13HsetDB_int((stats + [36mstr[0m([31m15[0m) + [31m"."[0m + [36mstr[0m(entry)),[112;23Hsensor[[31m'numDmaOverflows'[0m]);[113;13HsetDB_unsigned((stats + [36mstr[0m([31m16[0m) + [31m"."[0m + [36mstr[0m(entry)),[114;17H           adiSettings[[31m'adiRxLoHz'[0m]);[115;13HsetDB_unsigned((stats + [36mstr[0m([31m17[0m) + [31m"."[0m + [36mstr[0m(entry)),[116;215H132,13[8C45%[58;13H[34h[?25h[?25l[116;1H/\<escQ\>[116;10H[K[116;1H[214C134,13[8C45%[60;13H[34h[?25h[?25l[116;220H4[60;14H[34h[?25h[?25l[116;220H5[60;15H[34h[?25h[?25l[116;220H6[60;16H[34h[?25h[?25l[116;220H7[60;17H[34h[?25h[?25l[116;220H8[60;18H[34h[?25h[?25l[116;220H9[60;19H[34h[?25h[?25l[116;219H20[60;20H[34h[?25h[?25l[116;220H1[60;21H[34h[?25h[?25l[116;220H2[60;22H[34h[?25h[?25l[116;220H3[60;23H[34h[?25h[?25l[116;220H4[60;24H[34h[?25h[?25l[116;220H5[60;25H[34h[?25h[?25l[116;220H6[60;26H[34h[?25h[?25l[116;1H[K[116;1H:[34h[?25hw[?25l[34h[?25hq[?25l[34h[?25h[?25l"snmp_stat.py" 278L, 10078C written
[?1l>[34h[?25h[?1049l(23:11 root@ip-10-1-1-199 monitoring-system) > 
(23:11 root@ip-10-1-1-199 monitoring-system) > 
(23:11 root@ip-10-1-1-199 monitoring-system) > 
(23:11 root@ip-10-1-1-199 monitoring-system) > clear
[H[J(23:11 root@ip-10-1-1-199 monitoring-system) > ls
[0m[01;32mcleanup_tables.sh[0m  [01;32mconvert_json_to_csv.py[0m  dynamodblib.pyc                          esc_main.pyc   [01;32mfetch_data_openvpn_mgmt.py[0m   health_data.json  openvpn-monitor.conf  portmanagerlib.pyc  [01;32mrest_server.py[0m   snmp_stat.pyc  typescript
config_loader.py   dict_compare.py         esc_health_data_2017_11_08_20_27_39.csv  esc_queue.py   fetch_data_openvpn_mgmt.pyc  iptablelib.py     port_info.txt         portmanager.pyc     rest_server.pyc  [01;32mtrap_v2c.py[0m
config_loader.pyc  dynamodblib.py          [01;32mesc_main.py[0m                              esc_queue.pyc  [01;32mgui_interface_app.py[0m         iptablelib.pyc    portmanagerlib.py     README.md           [01;32msnmp_stat.py[0m     trap_v2c.pyc
(23:11 root@ip-10-1-1-199 monitoring-system) > 
(23:11 root@ip-10-1-1-199 monitoring-system) > ./esc_main.py 
1
INFO: Using config file: ./openvpn-monitor.conf
Preparing DELETE >>>
			 Connected to MySQL database
Snmp stat handler
starting up on localhost port 10000
Created rest server handler
connecting to localhost port 10000
 !!!!!!!!!!!!!!!!!!!!!!!!!! 1 !!!!!!!!!!!!!!!!!!!!!!!!!!! 
Exception in thread snmp_stat:
Traceback (most recent call last):
  File "/usr/lib64/python2.7/threading.py", line 811, in __bootstrap_inner
    self.run()
  File "/usr/lib64/python2.7/threading.py", line 764, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/home/sarath/monitoring-system/snmp_stat.py", line 251, in snmp_stat_hdlr
    sock = create_socket()
  File "/home/sarath/monitoring-system/snmp_stat.py", line 243, in create_socket
    sock.bind(server_addr)
  File "/usr/lib64/python2.7/socket.py", line 224, in meth
    return getattr(self._sock,name)(*args)
error: [Errno 98] Address already in use

{u'nclients': 7, u'bytesout': 114194375, u'bytesin': 32094124}
Exception in thread rest_server:
Traceback (most recent call last):
  File "/usr/lib64/python2.7/threading.py", line 811, in __bootstrap_inner
    self.run()
  File "/usr/lib64/python2.7/threading.py", line 764, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/home/sarath/monitoring-system/rest_server.py", line 53, in rest_server_hdlr
    app.run(host='100.61.0.1', port=8080, threaded=True)
  File "/usr/lib64/python2.7/site-packages/flask/app.py", line 841, in run
    run_simple(host, port, self, **options)
  File "/usr/lib/python2.7/site-packages/werkzeug/serving.py", line 739, in run_simple
    inner()
  File "/usr/lib/python2.7/site-packages/werkzeug/serving.py", line 699, in inner
    fd=fd)
  File "/usr/lib/python2.7/site-packages/werkzeug/serving.py", line 587, in make_server
    passthrough_errors, ssl_context, fd=fd)
  File "/usr/lib/python2.7/site-packages/werkzeug/serving.py", line 504, in __init__
    HTTPServer.__init__(self, (host, int(port)), handler)
  File "/usr/lib64/python2.7/SocketServer.py", line 419, in __init__
    self.server_bind()
  File "/usr/lib64/python2.7/BaseHTTPServer.py", line 108, in server_bind
    SocketServer.TCPServer.server_bind(self)
  File "/usr/lib64/python2.7/SocketServer.py", line 430, in server_bind
    self.socket.bind(self.server_address)
  File "/usr/lib64/python2.7/socket.py", line 224, in meth
    return getattr(self._sock,name)(*args)
error: [Errno 98] Address already in use

esc_sn015
<------ No notification ----->

esc_sn014
<------ No notification ----->

esc_sn023
<------ No notification ----->

esc_sn08
<------ No notification ----->

esc_sn01
<------ No notification ----->

esc_sn029
<------ No notification ----->

esc_sn026
<------ No notification ----->

{u'esc_sn08': 4, u'esc_sn01': 5, u'esc_sn023': 3, u'esc_sn026': 7, u'esc_sn029': 6, u'esc_sn015': 1, u'esc_sn014': 2}
			 new connections in App.. please sync with Db
Preparing DELETE >>>
			 Connected to MySQL database
HB thread active are...
[u'esc_sn08', u'esc_sn01', u'esc_sn023', u'esc_sn026', u'esc_sn029', u'esc_sn015', u'esc_sn014']
PING 100.61.0.14 (100.61.0.14) 56(84) bytes of data.
64 bytes from 100.61.0.14: icmp_seq=1 ttl=64 time=164 ms

--- 100.61.0.14 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 164.172/164.172/164.172/0.000 ms
Comm is up 100.61.0.14
PING 100.61.0.34 (100.61.0.34) 56(84) bytes of data.
^CTraceback (most recent call last):
  File "./esc_main.py", line 90, in <module>
    main()
  File "./esc_main.py", line 70, in main
    time.sleep(interval)
KeyboardInterrupt

--- 100.61.0.34 ping statistics ---
1 packets transmitted, 0 received, 100% packet loss, time 0ms

No response from 100.61.0.34
PING 100.61.0.22 (100.61.0.22) 56(84) bytes of data.
64 bytes from 100.61.0.22: icmp_seq=1 ttl=64 time=424 ms

--- 100.61.0.22 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 424.161/424.161/424.161/0.000 ms
Comm is up 100.61.0.22
PING 100.61.0.30 (100.61.0.30) 56(84) bytes of data.
^C
--- 100.61.0.30 ping statistics ---
1 packets transmitted, 0 received, 100% packet loss, time 0ms

No response from 100.61.0.30
PING 100.61.0.10 (100.61.0.10) 56(84) bytes of data.
^C
--- 100.61.0.10 ping statistics ---
1 packets transmitted, 0 received, 100% packet loss, time 0ms

No response from 100.61.0.10
PING 100.61.0.26 (100.61.0.26) 56(84) bytes of data.
^C
--- 100.61.0.26 ping statistics ---
1 packets transmitted, 0 received, 100% packet loss, time 0ms

No response from 100.61.0.26
PING 100.61.0.18 (100.61.0.18) 56(84) bytes of data.
^Z
[2]+  Stopped                 ./esc_main.py
(23:11 root@ip-10-1-1-199 monitoring-system) > 
(23:11 root@ip-10-1-1-199 monitoring-system) > ps[K[K[C[25Preverse-i-search)`':[C[15@p': ./esc_main.pys': ps -eaf | grep -i esc_main[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1@ [C[C[C[1@-[C[C[C[1@e[C[C[C[1@a[C[C[C[1@f[C[C[C[C[18@23:11 root@ip-10-1-1-199 monitoring-system) >[C
root     16884 16866  0 23:09 pts/8    00:00:00 python ./[01;31m[Kesc_main[m[K.py
root     16944 16866  2 23:11 pts/8    00:00:00 python ./[01;31m[Kesc_main[m[K.py
root     16993 16866  0 23:11 pts/8    00:00:00 grep --color=auto -i [01;31m[Kesc_main[m[K
(23:11 root@ip-10-1-1-199 monitoring-system) > 
(23:11 root@ip-10-1-1-199 monitoring-system) > kill -9 16884 ; kill -9 16954[K44
bash: kill: (169544) - No such process
(23:11 root@ip-10-1-1-199 monitoring-system) > [1]-  Killed                  ./esc_main.py

(23:11 root@ip-10-1-1-199 monitoring-system) > 
(23:11 root@ip-10-1-1-199 monitoring-system) > 
(23:11 root@ip-10-1-1-199 monitoring-system) > kill -9 16884 ; kill -9 169544[4Pps -eaf | grep -i esc_main
root     16944 16866  1 23:11 pts/8    00:00:00 python ./[01;31m[Kesc_main[m[K.py
root     16995 16866  0 23:11 pts/8    00:00:00 grep --color=auto -i [01;31m[Kesc_main[m[K
(23:11 root@ip-10-1-1-199 monitoring-system) > kill -9 16944
(23:11 root@ip-10-1-1-199 monitoring-system) > [2]+  Killed                  ./esc_main.py

(23:11 root@ip-10-1-1-199 monitoring-system) > 
(23:11 root@ip-10-1-1-199 monitoring-system) > 
(23:11 root@ip-10-1-1-199 monitoring-system) > 
(23:11 root@ip-10-1-1-199 monitoring-system) > 
(23:11 root@ip-10-1-1-199 monitoring-system) > 
(23:11 root@ip-10-1-1-199 monitoring-system) > 
(23:11 root@ip-10-1-1-199 monitoring-system) > clear
[H[J(23:11 root@ip-10-1-1-199 monitoring-system) > ls
[0m[01;32mcleanup_tables.sh[0m  [01;32mconvert_json_to_csv.py[0m  dynamodblib.pyc                          esc_main.pyc   [01;32mfetch_data_openvpn_mgmt.py[0m   health_data.json  openvpn-monitor.conf  portmanagerlib.pyc  [01;32mrest_server.py[0m   snmp_stat.pyc  typescript
config_loader.py   dict_compare.py         esc_health_data_2017_11_08_20_27_39.csv  esc_queue.py   fetch_data_openvpn_mgmt.pyc  iptablelib.py     port_info.txt         portmanager.pyc     rest_server.pyc  [01;32mtrap_v2c.py[0m
config_loader.pyc  dynamodblib.py          [01;32mesc_main.py[0m                              esc_queue.pyc  [01;32mgui_interface_app.py[0m         iptablelib.pyc    portmanagerlib.py     README.md           [01;32msnmp_stat.py[0m     trap_v2c.pyc
(23:11 root@ip-10-1-1-199 monitoring-system) > ./esc_main.py 
1
INFO: Using config file: ./openvpn-monitor.conf
Preparing DELETE >>>
			 Connected to MySQL database
Snmp stat handler
starting up on localhost port 10000
Waiting for a connection..
Created rest server handler
connecting to localhost port 10000
 !!!!!!!!!!!!!!!!!!!!!!!!!! 1 !!!!!!!!!!!!!!!!!!!!!!!!!!! 
connection from ('127.0.0.1', 57606)
<socket._socketobject object at 0x4036fa0>
Waiting for a connection..
{u'nclients': 7, u'bytesout': 114199259, u'bytesin': 32104602}
esc_sn015
<------ No notification ----->

esc_sn014
<------ No notification ----->

esc_sn023
<------ No notification ----->

esc_sn08
<------ No notification ----->

esc_sn01
<------ No notification ----->

esc_sn029
<------ No notification ----->

esc_sn026
<------ No notification ----->

{u'esc_sn08': 4, u'esc_sn01': 5, u'esc_sn023': 3, u'esc_sn026': 7, u'esc_sn029': 6, u'esc_sn015': 1, u'esc_sn014': 2}
			 new connections in App.. please sync with Db
Preparing DELETE >>>
			 Connected to MySQL database
 * Running on http://100.61.0.1:8080/ (Press CTRL+C to quit)
HB thread active are...
[u'esc_sn08', u'esc_sn01', u'esc_sn023', u'esc_sn026', u'esc_sn029', u'esc_sn015', u'esc_sn014']
PING 100.61.0.14 (100.61.0.14) 56(84) bytes of data.
64 bytes from 100.61.0.14: icmp_seq=1 ttl=64 time=172 ms

--- 100.61.0.14 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 172.173/172.173/172.173/0.000 ms
Comm is up 100.61.0.14
PING 100.61.0.34 (100.61.0.34) 56(84) bytes of data.
100.61.0.22 - - [14/Nov/2017 23:12:11] "POST /upload/ HTTP/1.1" 200 -
{"sensorId":"fed_esc_029","bandIndex":0,"bandInfo":{"timeStampHealthCheck":14858.573544,"sensor":{"agcGain":57,"gpioOverLoad":0,"gpioSPIvalue":0,"rmsAverage":18.055470,"agcMaxVal":377,"noiseRssiDbm":-86.087822,"dcI":-9,"dcQ":-7,"iqImbalanceGaindB":0,"iqImbalancePhaseDeg":0,"numDmaOverflows":0},"adiSettings":{"adiRxLoHz":3571503998,"adiTxLoHz":3571503998,"adiGainValue":57,"adiTxAttenutation":88000,"adiRxClockHz":49151999,"adiTxClockHz":49151999}},"hps":{"oneMinLoad":0,"memoryFreeKb":717020,"memoryTotalKb":763048,"upTime":15232,"cpuClockSpeed":0},"i2c":{"humidity":7.086182,"temperature":110.620911,"compass_x_axis":168,"compass_y_axis":-434,"compass_z_axis":29,"compassChange":0}}
--------------> 

(rest_server) Waiting for data...
Event is set
{'hps': {'memoryFreeKb': 717020, 'cpuClockSpeed': 0, 'upTime': 15232, 'oneMinLoad': 0, 'memoryTotalKb': 763048}, 'sensorId': 'fed_esc_029', 'i2c': {'compassChange': 0, 'temperature': 110.620911, 'humidity': 7.086182, 'compass_x_axis': 168, 'compass_y_axis': -434, 'compass_z_axis': 29}, 'bandIndex': 0, 'bandInfo': {'adiSettings': {'adiTxAttenutation': 88000, 'adiTxClockHz': 49151999, 'adiRxClockHz': 49151999, 'adiTxLoHz': 3571503998, 'adiGainValue': 57, 'adiRxLoHz': 3571503998}, 'sensor': {'noiseRssiDbm': -86.087822, 'rmsAverage': 18.05547, 'gpioOverLoad': 0, 'gpioSPIvalue': 0, 'dcI': -9, 'numDmaOverflows': 0, 'iqImbalanceGaindB': 0, 'iqImbalancePhaseDeg': 0, 'agcGain': 57, 'agcMaxVal': 377, 'dcQ': -7}, 'timeStampHealthCheck': 14858.573544}}
esc_sn029_Q
[2017-11-14 23:12:12,092] ERROR in app: Exception on /upload/ [POST]
Traceback (most recent call last):
  File "/usr/lib64/python2.7/site-packages/flask/app.py", line 1982, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib64/python2.7/site-packages/flask/app.py", line 1614, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib64/python2.7/site-packages/flask/app.py", line 1517, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib64/python2.7/site-packages/flask/app.py", line 1612, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib64/python2.7/site-packages/flask/app.py", line 1598, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/home/sarath/monitoring-system/rest_server.py", line 30, in api_upload
    snmpStat.handle_response(response)
  File "/home/sarath/monitoring-system/snmp_stat.py", line 134, in handle_response
    escQ.newEscId.put(json_parse)
AttributeError: 'module' object has no attribute 'newEscId'
100.61.0.26 - - [14/Nov/2017 23:12:12] "POST /upload/ HTTP/1.1" 500 -

--- 100.61.0.34 ping statistics ---
1 packets transmitted, 0 received, 100% packet loss, time 0ms

No response from 100.61.0.34
PING 100.61.0.22 (100.61.0.22) 56(84) bytes of data.
64 bytes from 100.61.0.22: icmp_seq=1 ttl=64 time=415 ms

--- 100.61.0.22 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 415.019/415.019/415.019/0.000 ms
Comm is up 100.61.0.22
PING 100.61.0.30 (100.61.0.30) 56(84) bytes of data.
 !!!!!!!!!!!!!!!!!!!!!!!!!! 1 !!!!!!!!!!!!!!!!!!!!!!!!!!! 
{u'nclients': 7, u'bytesout': 114202358, u'bytesin': 32110809}
{u'esc_sn08': 4, u'esc_sn01': 5, u'esc_sn023': 3, u'esc_sn026': 7, u'esc_sn029': 6, u'esc_sn015': 1, u'esc_sn014': 2}
			 DB is in sync with App
HB thread active are...
[u'esc_sn08', u'esc_sn01', u'esc_sn023', u'esc_sn026', u'esc_sn029', u'esc_sn015', u'esc_sn014']
^Z
[1]+  Stopped                 ./esc_main.py
(23:12 root@ip-10-1-1-199 monitoring-system) > vim esc_queue.py
[?1049h[?1h=[1;116r[34l[34h[?25h[23m[24m[0m[H[J[?25l[116;1H"esc_queue.py" 182L, 5070C[1;1H[34m#!/usr/bin/env python[0m

[35mfrom[0m Queue [35mimport[0m Queue
[35mimport[0m threading

esc_sn01_Q= Queue()
esc_sn015_Q = Queue()
esc_sn023_Q = Queue()
esc_sn026_Q = Queue()
esc_sn029_Q = Queue()
esc_sn08_Q = Queue()
esc_sn014_Q = Queue()

thread_list=[]


[33mdef[0m [36mesc_thread_handler[0m(username):[18;9H[33mif[0m username == [31m'esc_sn014'[0m:[19;17Hesc_worker = threading.Thread(name=username, target=esc_sn014_Q_thread, args=(username,))[20;17Hesc_worker.setDaemon = [36mTrue[0m[21;17Hesc_worker.start()[22;9H[33mif[0m username == [31m'esc_sn029'[0m:[23;17Hesc_worker = threading.Thread(name=username, target=esc_sn029_Q_thread, args=(username,))[24;17Hesc_worker.setDaemon = [36mTrue[0m[25;17Hesc_worker.start()[26;9H[33mif[0m username == [31m'esc_sn026'[0m:[27;17Hesc_worker = threading.Thread(name=username, target=esc_sn026_Q_thread, args=(username,))[28;17Hesc_worker.setDaemon = [36mTrue[0m[29;17Hesc_worker.start()[30;9H[33mif[0m username == [31m'esc_sn023'[0m:[31;17Hesc_worker = threading.Thread(name=username, target=esc_sn023_Q_thread, args=(username,))[32;17Hesc_worker.setDaemon = [36mTrue[0m[33;17Hesc_worker.start()[34;9H[33mif[0m username == [31m'esc_sn015'[0m:[35;17Hesc_worker = threading.Thread(name=username, target=esc_sn015_Q_thread, args=(username,))[36;17Hesc_worker.setDaemon = [36mTrue[0m[37;17Hesc_worker.start()[38;9H[33mif[0m username == [31m'esc_sn01'[0m:[39;17Hesc_worker = threading.Thread(name=username, target=esc_sn01_Q_thread, args=(username,))[40;17Hesc_worker.setDaemon = [36mTrue[0m[41;17Hesc_worker.start()[42;9H[33mif[0m username == [31m'esc_sn08'[0m:[43;17Hesc_worker = threading.Thread(name=username, target=esc_sn08_Q_thread, args=(username,))[44;17Hesc_worker.setDaemon = [36mTrue[0m[45;17Hesc_worker.start()

[34m#o==================================o====================================o================================[0m
[33mdef[0m [36mesc_sn014_Q_thread[0m(username):[49;9Hthread_list.append(username)[50;9Hcounter=[31m0[0m[51;9H[33mwhile[0m [36mTrue[0m:[52;17H[33mtry[0m:[53;25Hhb = esc_sn014_Q.get([36mTrue[0m, [31m20[0m)[54;25H[33mif[0m hb:[55;29Hesc_sn014_Q.task_done()[56;17H[33mexcept[0m:[57;25H[36mprint[0m([31m"14:timeout"[0m)[58;25Hcounter = counter + [31m1[0m[59;25H[33mif[0m counter==[31m3[0m:[60;33Hcounter=[31m0[0m[61;33H[36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn014, raise a trap"[0m)[62;33Hthread_list.pop(username)[63;33H[33mbreak[64;25Helif[0m counter < [31m3[0m:[65;33H[33mcontinue[0m

[34m#o==================================o====================================o================================[0m
[33mdef[0m [36mesc_sn01_Q_thread[0m(username):[69;9Hthread_list.append(username)[70;9Hcounter=[31m0[0m[71;9H[33mwhile[0m [36mTrue[0m:[72;17H[33mtry[0m:[73;25Hhb = esc_sn01_Q.get([36mTrue[0m, [31m20[0m)[74;25H[33mif[0m hb:[75;29Hesc_sn01_Q.task_done()[76;17H[33mexcept[0m:[77;25H[36mprint[0m([31m"01:timeout"[0m)[78;25Hcounter = counter + [31m1[0m[79;25H[33mif[0m counter==[31m3[0m:[80;33Hcounter=[31m0[0m[81;33H[36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn01, raise a trap"[0m)[82;33Hthread_list.pop(username)[83;33H[33mbreak[84;25Helif[0m counter < [31m3[0m:[85;33H[33mcontinue[0m
[34m#o==================================o====================================o================================[0m
[33mdef[0m [36mesc_sn015_Q_thread[0m(username):[88;9Hthread_list.append(username)[89;9Hcounter=[31m0[0m[90;9H[33mwhile[0m [36mTrue[0m:[91;17H[33mtry[0m:[92;25Hhb = esc_sn015_Q.get([36mTrue[0m, [31m20[0m)[93;25H[33mif[0m hb:[94;29Hesc_sn015_Q.task_done()[95;17H[33mexcept[0m:[96;25H[36mprint[0m([31m"15:timeout"[0m)[97;25Hcounter = counter + [31m1[0m[98;25H[33mif[0m counter==[31m3[0m:[99;33Hcounter=[31m0[0m[100;33H[36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn015, raise a trap"[0m)[101;33Hthread_list.pop(username)[102;33H[33mbreak[103;25Helif[0m counter < [31m3[0m:[104;33H[33mcontinue[0m
[34m#o==================================o====================================o================================[0m
[33mdef[0m [36mesc_sn023_Q_thread[0m(username):[107;9Hthread_list.append(username)[108;9Hcounter=[31m0[0m[109;9H[33mwhile[0m [36mTrue[0m:[110;17H[33mtry[0m:[111;25Hhb = esc_sn023_Q.get([36mTrue[0m, [31m20[0m)[112;25H[33mif[0m hb:[113;29Hesc_sn023_Q.task_done()[114;17H[33mexcept[0m:[115;25H[36mprint[0m([31m"23:timeout"[0m)[116;215H13,0-1[8CTop[13;1H[34h[?25h[?25l[116;1H[K[116;1H/[34h[?25hesc_sn029_Q[?25l[34h[?25h[?25l[10;1H[30m[43mesc_sn029_Q[23;69Hesc_sn029_Q[0m[116;215H23,55-69      Top[23;69H[34h[?25h[?25l[116;1H[K[116;1H:[34h[?25he[?25l[34h[?25h[?25l [34h[?25hs[?25l[34h[?25hn[?25l[34h[?25h...[?25lmp_stat.py[34h[?25h[?25l"snmp_stat.py" 278L, 10078C[1;1H            [36mprint[0m([31m'%s at %s'[0m % (errorStatus.prettyPrint(),[2;19HerrorIndex [33mand[0m varBinds[[36mint[0m(errorIndex) - [31m1[0m] [33mor[0m [31m'?'[0m))
        [33melse[0m:[3;14H[K[4;1H            [33mfor[0m name, val [33min[0m varBinds:[5;17H[36mprint[0m([31m'%s = %s'[0m % (name.prettyPrint(), val.prettyPrint()))[6;1H[K[7;1H[K[8;1H[K[9;1H[34m# snmpset -v2c -c federated 34.215.95.184 1.3.6.1.4.1.8072.2.7.1.1.4.1.2.1 s "FL033C"
# esIndex         escID channelId detectionFlag timeStampSensorResults maxRssiDbm minRssiDbm maxSnrDb minSnrDb numDetections numAttempts numDetectionsTimeWindow numAttemptsTimeWindow probDetection probDetectionTimeWindow[0m
stats = [31m"1.3.6.1.4.1.8072.2.7.1.1.3.1."[0m[12;1H[K[14;1H[34m#atexit.register(cleanup)[0m


[31m""" Function: Thread_2 handle csv file ahndler requests """[0m
[33mdef[0m [36mcsv_client_hdlr[0m(connection,e,t):
    [33mwhile[0m [36mTrue[0m:[19;17H[K[20;9H[33mwhile[0m [33mnot[0m e.isSet():[20;29H[K[21;13H[36mprint[0m([31m'wait for event timeout'[0m)[22;9H    event_is_set = e.wait()[23;13H[33mif[0m event_is_set:[23;30H[K[24;17H[36mprint[0m([31m"Sync sent to CSV app"[0m)[25;17Hdata=connection.send([31m"Sync"[0m)[26;9H    [33melse[0m:[26;18H[K[27;17H[36mprint[0m([31m'do nothing'[0m)[27;36H[K[28;9Htime.sleep([31m2[0m)[28;22H[K[29;17H[K[30;9H[K[31;1H[31m""" Function: Thread_1 handle rest server requests """[0m[31;55H[K[32;17H[K[33;17H[K[34;1H[33mdef[0m [36mhandle_response[0m(data):[34;27H[K[35;5H[33mglobal[0m create_flag[35;23H[K[36;5Hindex_counter = [31m0[0m[36;22H[K[37;5Hhb_counter=[31m0[0m[37;17H[K[38;1H[34m# receive the data in small chunks
[0m    [34m#while True:[0m[39;17H[K[40;5H[36mprint[0m([31m"(rest_server) Waiting for data..."[0m)
    [34m#data = connection.recv(2048)[0m[41;34H[K[42;5H[33mif[0m data:[42;13H[K[43;13Hjson_parse = json.loads(data)[43;42H[K[44;13HjsonHdlr = [36mopen[0m([31m"health_data.json"[0m, [31m'w'[0m)[45;13Hpickle.dump(json_parse, jsonHdlr)[46;13HjsonHdlr.close()
            [36mprint[0m([31m'Event is set'[0m)[47;34H[K[48;1H            [34m#e.set()[0m[48;21H[K[49;9H[K[50;9H    [36mprint[0m(json_parse)[51;9H    bandId = json_parse[[31m'bandIndex'[0m][52;17H[K[53;13Hentry = bandId[53;28H[K[54;13HescId = json_parse[[31m'sensorId'[0m][55;13H[34m#retrieve sensor Id fed_esc_029 to esc_sn029[0m[56;13HnewEscId = escId[[31m4[0m:[31m8[0m] + [31m"sn"[0m + escId[[31m8[0m:[31m11[0m] +[31m"_Q"[0m[57;13H[36mprint[0m(newEscId)[57;28H[K[58;13HescQ.newEscId.put(json_parse)[58;43H[K[59;25H[K[60;33H[K[61;13H[36mprint[0m([31m"----------------------- rest_server_hdlr ---------------------[0m[35m\n[0m[31m"[0m)[61;86H[K[62;13H[33mif[0m ((bandId == [31m0[0m [33mor[0m bandId == [31m1[0m) [33mand[0m index_counter < [31m6[0m):[63;17H[36mprint[0m([31m"---> Window Stared <---"[0m)[64;17H[33mif[0m (create_flag == [31m1[0m):[64;40H[K[65;21H[33mfor[0m num [33min[0m [36mxrange[0m([31m1[0m,[31m7[0m):[66;25HsiteId = escId + [31m"_"[0m + [36mstr[0m(num)
                        siteID_list.append(siteId)[67;51H[K[68;1H                        healthDB.createItem(siteId)[69;9H            create_flag = [31m0[0m[69;36H[K[70;9H        [33melse[0m:[71;9H                [36mprint[0m([31m""[0m)[72;17H[K[73;13H[33mif[0m(index_counter == [31m6[0m):[73;36H[K[74;17H[36mprint[0m([31m"reset counter to zero"[0m)[75;17Hindex_counter = [31m0[0m[75;34H[K[76;17H[K[77;13HbandInfo = json_parse[[31m'bandInfo'[0m][[31m'timeStampHealthCheck'[0m][78;13Hsensor = json_parse[[31m'bandInfo'[0m][[31m'sensor'[0m][79;13HadiSettings = json_parse[[31m'bandInfo'[0m][[31m'adiSettings'[0m][80;13Hhps = json_parse[[31m'hps'[0m][80;36H[K[81;13Hi2c = json_parse[[31m'i2c'[0m][81;36H[K[82;33H[K[83;9H[34m# print("DEBUG -> timeStamp %s" %bandInfo)[84;9H# print("DEBUG -> sensor %s" %sensor)[85;9H# print("DEBUG -> adiSettings %s" %adiSettings)[0m
        [34m# print("DEBUG -> hps%s" %hps)[0m[86;39H[K[87;1H        [34m# print("DEBUG -> i2c%s" %i2c)[0m[88;9H[K[89;9H    setDB_str((stats + [36mstr[0m([31m2[0m) + [31m"."[0m + [36mstr[0m(entry)), escId);[90;9H    setDB_int((stats + [36mstr[0m([31m3[0m) + [31m"."[0m + [36mstr[0m(entry)), bandId);[91;13HsetDB_int((stats + [36mstr[0m([31m4[0m) + [31m"."[0m + [36mstr[0m(entry)), bandInfo);[92;13HsetDB_int((stats + [36mstr[0m([31m5[0m) + [31m"."[0m + [36mstr[0m(entry)), sensor[[31m'agcGain'[0m]);[93;13HsetDB_int((stats + [36mstr[0m([31m6[0m) + [31m"."[0m + [36mstr[0m(entry)),[94;23Hsensor[[31m'gpioOverLoad'[0m]);[94;47H[K[95;13HsetDB_int((stats + [36mstr[0m([31m7[0m) + [31m"."[0m + [36mstr[0m(entry)),[96;23Hsensor[[31m'gpioSPIvalue'[0m]);[97;13HsetDB_str((stats + [36mstr[0m([31m8[0m) + [31m"."[0m + [36mstr[0m(entry)),[98;23Hsensor[[31m'rmsAverage'[0m]);[99;13HsetDB_int((stats + [36mstr[0m([31m9[0m) + [31m"."[0m + [36mstr[0m(entry)),[100;23Hsensor[[31m'agcMaxVal'[0m]);[100;44H[K[101;13HsetDB_str((stats + [36mstr[0m([31m10[0m) + [31m"."[0m + [36mstr[0m(entry)),[102;23Hsensor[[31m'noiseRssiDbm'[0m]);[103;13HsetDB_int((stats + [36mstr[0m([31m11[0m) + [31m"."[0m + [36mstr[0m(entry)), sensor[[31m'dcI'[0m]);[104;13HsetDB_int((stats + [36mstr[0m([31m12[0m) + [31m"."[0m + [36mstr[0m(entry)), sensor[[31m'dcQ'[0m]);
            setDB_int((stats + [36mstr[0m([31m13[0m) + [31m"."[0m + [36mstr[0m(entry)),[105;60H[K[106;1H                      sensor[[31m'iqImbalanceGaindB'[0m]);[107;9H    setDB_int((stats + [36mstr[0m([31m14[0m) + [31m"."[0m + [36mstr[0m(entry)),[108;9H              sensor[[31m'iqImbalancePhaseDeg'[0m]);[109;9H    setDB_int((stats + [36mstr[0m([31m15[0m) + [31m"."[0m + [36mstr[0m(entry)),[110;17H      sensor[[31m'numDmaOverflows'[0m]);[111;13HsetDB_unsigned((stats + [36mstr[0m([31m16[0m) + [31m"."[0m + [36mstr[0m(entry)),[112;25H   adiSettings[[31m'adiRxLoHz'[0m]);[113;13HsetDB_unsigned((stats + [36mstr[0m([31m17[0m) + [31m"."[0m + [36mstr[0m(entry)),[114;17H           adiSettings[[31m'adiTxLoHz'[0m]);[115;13HsetDB_int((stats + [36mstr[0m([31m18[0m) + [1C[31m."[0m + [36mstr[0m(entry)),[116;215H134,13[8C46%[58;13H[34h[?25h[?25l[116;220H4[58;14H[34h[?25h[?25l[116;220H5[58;15H[34h[?25h[?25l[116;220H6[58;16H[34h[?25h[?25l[116;220H7[58;17H[34h[?25h[?25l[116;220H8[58;18H[34h[?25h[?25l[57;18H[46m([8C)[0m[116;217H3,11-18[57;18H[34h[?25h[?25l([8C)[116;220H0-17[57;17H[34h[?25h[?25l[116;219H9-16 [57;16H[34h[?25h[?25l[116;219H8-15[57;15H[34h[?25h[?25l[116;219H7-14[57;14H[34h[?25h[?25l[116;219H6-13[57;13H[34h[?25h[?25l[116;217H2,13  [56;13H[34h[?25h[?25l[116;217H1[55;13H[34h[?25h[?25l[116;217H0,6-13[54;13H[34h[?25h[?25l[116;216H29[53;13H[34h[?25h[?25l[116;217H8,0-1 [52;1H[34h[?25h[?25l[116;217H7,6-13[51;13H[34h[?25h[?25l[116;217H6[50;13H[34h[?25h[?25l[116;217H5,0-1 [49;1H[34h[?25h[?25l[116;217H4,6-13[48;13H[34h[?25h[?25l[116;217H3[47;13H[34h[?25h[?25l[116;217H2[46;13H[34h[?25h[?25l[116;217H1[45;13H[34h[?25h[?25l[116;217H0[44;13H[34h[?25h[?25l[116;216H19[43;13H[34h[?25h[?25l[116;217H8,12  [42;12H[34h[?25h[?25l[116;217H7,13[41;13H[34h[?25h[?25l[116;217H6[40;13H[34h[?25h[?25l[116;217H5[39;13H[34h[?25h[?25l[116;217H4[38;13H[34h[?25h[?25l[116;217H3[37;13H[34h[?25h[?25l[116;217H2[36;13H[34h[?25h[?25l[116;217H1[35;13H[34h[?25h[?25l[116;217H0[34;13H[34h[?25h[?25l[116;216H09,0-1[33;1H[34h[?25h[?25l[116;217H8[32;1H[34h[?25h[?25l[116;217H7,13 [31;13H[34h[?25h[?25l[116;1H[1m-- INSERT --[0m[116;13H[K[116;215H108,1[9C46%[32;115r[32;1H[L[1;116r[116;215H[K[116;215H108,1[9C46%[32;1H[34h[?25h[?25l[33;115r[33;1H[L[1;116r[116;215H[K[116;215H109,1[9C46%[33;1H[34h[?25h[?25ld[116;219H2[33;2H[34h[?25h[?25le[116;219H3[33;3H[34h[?25h[?25l[33mdef[0m[116;219H4[33;4H[34h[?25h[?25l[116;219H5[33;5H[34h[?25h[?25l[36mp[0m[116;219H6[33;6H[34h[?25h[?25l[36mu[0m[116;219H7[33;7H[34h[?25h[?25l[36mt[0m[116;219H8[33;8H[34h[?25h[?25l[36m_[0m[116;219H9[33;9H[34h[?25h[?25l[36md[0m[116;219H10[33;10H[34h[?25h[?25l[36ma[0m[116;220H1[33;11H[34h[?25h[?25l[36mt[0m[116;220H2[33;12H[34h[?25h[?25l[36ma[0m[116;220H3[33;13H[34h[?25h[?25l[36m_[0m[116;220H4[33;14H[34h[?25h[?25l[36mi[0m[116;220H5[33;15H[34h[?25h[?25l[36mn[0m[116;220H6[33;16H[34h[?25h[?25l[36mt[0m[116;220H7[33;17H[34h[?25h[?25l[36mo[0m[116;220H8[33;18H[34h[?25h[?25l[36m_[0m[116;220H9[33;19H[34h[?25h[?25l[36mq[0m[116;219H20[33;20H[34h[?25h[?25l[36mu[0m[116;220H1[33;21H[34h[?25h[?25l[36me[0m[116;220H2[33;22H[34h[?25h[?25l[36mu[0m[116;220H3[33;23H[34h[?25h[?25l[36me[0m[116;220H4[33;24H[34h[?25h[?25l([116;215H[K[116;215H109,25[8C46%[33;25H[34h[?25h[?25lu[116;220H6[33;26H[34h[?25h[?25ls[116;220H7[33;27H[34h[?25h[?25le[116;220H8[33;28H[34h[?25h[?25lr[116;220H9[33;29H[34h[?25h[?25ln[116;219H30[33;30H[34h[?25h[?25la[116;220H1[33;31H[34h[?25h[?25lm[116;220H2[33;32H[34h[?25h[?25le[116;220H3[33;33H[34h[?25h[?25l)[33;24H[46m([8C)[0m[116;215H[K[116;215H109,34[8C46%[33;34H[34h[?25h[?25l:[33;24H([8C)[116;220H5[33;35H[34h[?25h[116;1H[K[?25l[116;215H109,34[8C46%[33;34H[34h[?25h[?25l[116;215H[K[116;1H:[34h[?25hw[?25l[34h[?25h[?25l"snmp_stat.py" 280L, 10114C written[179C109,34[8C46%[116;215H[K[116;215H109,34[8C46%[33;34H[34h[?25h[?25l[116;1H[1m-- INSERT --[0m[116;13H[K[116;215H110,1[9C45%[34;115r[34;1H[L[1;116r[116;215H[K[116;215H110,1[9C45%[34;1H[34h[?25h[?25li[116;219H2[34;2H[34h[?25h[?25l[33mif[0m[116;219H3[34;3H[34h[?25h[?25li[34;2H[K[116;219H2[34;2H[34h[?25h[?25l[34;1H[K[116;219H1[34;1H[34h[?25h[?25l[116;219H2-9[34;9H[34h[?25h[?25li[116;219H3-10[34;10H[34h[?25h[?25l[33mif[0m[116;219H4-11[34;11H[34h[?25h[?25l[116;219H5-12[34;12H[34h[?25h[?25lu[116;219H6-13[34;13H[34h[?25h[?25ls[116;219H7-14[34;14H[34h[?25h[?25le[116;219H8-15[34;15H[34h[?25h[?25lr[116;219H9-16[34;16H[34h[?25h[?25ln[116;219H10-17[34;17H[34h[?25h[?25la[116;220H1-18[34;18H[34h[?25h[?25lm[116;220H2-19[34;19H[34h[?25h[?25le[116;220H3-20[34;20H[34h[?25h[?25l[116;220H4-21[34;21H[34h[?25h[?25l=[116;220H5-22[34;22H[34h[?25h[?25l=[116;220H6-23[34;23H[34h[?25h[?25l[116;220H7-24[34;24H[34h[?25h[?25l[31m'


def handle_response(data):
    global create_flag
    index_counter = 
    hb_counter=
# receive the data in small chunks
    #while True:
    print([35C)
    #data = connection.recv(2048)
    if data:
            json_parse = json.loads(data)
            jsonHdlr = open([18C, [0m[1Cw[1C[31m)
            pickle.dump(json_parse, jsonHdlr)
            jsonHdlr.close()
            print([0m[1CEvent [33mis[0m [36mset[0m[1C[31m)
            #e.set()

            print(json_parse)
            bandId = json_parse[[0m[1CbandIndex[1C[31m]

            entry = bandId
            escId = json_parse[[0m[1CsensorId[1C[31m] 
            #retrieve sensor Id fed_esc_029 to esc_sn029
            newEscId = escId[4:8] + "sn" + escId[8:11] +
            print(newEscId)
            escQ.newEscId.put(json_parse)


            print([66C)
            if ((bandId == 0 or bandId == 1) and index_counter < 6):
                print([25C)
                if (create_flag == 1):
                    for num in xrange(1,7):
                        siteId = escId + "_" + str(num)
                        siteID_list.append(siteId)
                        healthDB.createItem(siteId)
                    create_flag = 
                else:
                        print("")

            if(index_counter == 6):
                print([23C)
                index_counter = 

            bandInfo = json_parse[[0m[1CbandInfo[1C[31m][[0m[1CtimeStampHealthCheck[1C[31m]
            sensor = json_parse[[0m[1CbandInfo[1C[31m][[0m[1Csenso[2C[31m]
            adiSettings = json_parse[[0m[1CbandInfo[1C[31m][[0m[1CadiSettings[1C[31m]
            hps = json_parse[[0m[1Chps[1C[31m]
            i2c = json_parse[[0m[1Ci2c[1C[31m]

        # print("DEBUG -> timeStamp %s" %bandInfo)
        # print("DEBUG -> sensor %s" %sensor)
        # print("DEBUG -> adiSettings %s" %adiSettings)
        # print("DEBUG -> hps%s" %hps)
        # print("DEBUG -> i2c%s" %i2c)

            setDB_str((stats + str(2) + "." + str(entry)), escId);
            setDB_int((stats + str(3) + "." + str(entry)), bandId);
            setDB_int((stats + str(4) + "." + str(entry)), bandInfo);
            setDB_int((stats + str(5) + "." + str(entry)), sensor[[0m[1CagcGain[1C[31m]);
            setDB_int((stats + str(6) + "." + str(entry)),
                      sensor[[0m[1CgpioOverLoad[1C[31m]);
            setDB_int((stats + str(7) + "." + str(entry)),
                      sensor[[0m[1CgpioSPIvalue[1C[31m]);
            setDB_str((stats + str(8) + "." + str(entry)),
                      sensor[[0m[1CrmsAverage[1C[31m]);
            setDB_int((stats + str(9) + "." + str(entry)),
                      sensor[[0m[1CagcMaxVal[1C[31m]);
            setDB_str((stats + str(10) + "." + str(entry)),
                      sensor[[0m[1CnoiseRssiDbm[1C[31m]);
            setDB_int((stats + str(11) + "." + str(entry)), sensor[[0m[1CdcI[1C[31m]);
            setDB_int((stats + str(12) + "." + str(entry)), sensor[[0m[1CdcQ[1C[31m]);
            setDB_int((stats + str(13) + "." + str(entry)),
                      sensor[[0m[1CiqImbalanceGaindB[1C[31m]);
            setDB_int((stats + str(14) + "." + str(entry)),
                      sensor[[0m[1CiqImbalancePhaseDeg[1C[31m]);
            setDB_int((stats + str(15) + "." + str(entry)),
                      sensor[[0m[1CnumDmaOverflows[1C[31m]);
            setDB_unsigned((stats + str(16) + "." + str(entry)),
                           adiSettings[[0m[1CadiRxLoHz[1C[31m]);[0m[116;220H8-25[34;25H[34h[?25h[?25l[31m'[0m


[33mdef[0m [36mhandle_response[0m(data):
    [33mglobal[0m create_flag
    index_counter = 
    hb_counter=
[34m# receive the data in small chunks[0m
    [34m#while True:[0m
    [36mprint[0m([35C)
    [34m#data = connection.recv(2048)[0m
    [33mif[0m data:
            json_parse = json.loads(data)
            jsonHdlr = [36mopen[0m([18C, [1C[31mw[0m[1C)
            pickle.dump(json_parse, jsonHdlr)
            jsonHdlr.close()
            [36mprint[0m([1C[31mEvent is set[0m[1C)
            [34m#e.set()[0m

            [36mprint[0m(json_parse)
            bandId = json_parse[[1C[31mbandIndex[0m[1C]

            entry = bandId
            escId = json_parse[[1C[31msensorId[0m[1C] 
            [34m#retrieve sensor Id fed_esc_029 to esc_sn029[0m
            newEscId = escId[[1C:[1C] + [4C + escId[[1C:[2C] +
            [36mprint[0m(newEscId)
            escQ.newEscId.put(json_parse)


            [36mprint[0m([66C)
            [33mif[0m ((bandId == [1C [33mor[0m bandId == [1C) [33mand[0m index_counter < [1C):
                [36mprint[0m([25C)
                [33mif[0m (create_flag == [1C):
                    [33mfor[0m num [33min[0m [36mxrange[0m([1C,[1C):
                        siteId = escId + [3C + [36mstr[0m(num)
                        siteID_list.append(siteId)
                        healthDB.createItem(siteId)
                    create_flag = 
                [33melse[0m:
                        [36mprint[0m([2C)

            [33mif[0m(index_counter == [1C):
                [36mprint[0m([23C)
                index_counter = 

            bandInfo = json_parse[[1C[31mbandInfo[0m[1C][[1C[31mtimeStampHealthCheck[0m[1C]
            sensor = json_parse[[1C[31mbandInfo[0m[1C][[1C[31msenso[0m[2C]
            adiSettings = json_parse[[1C[31mbandInfo[0m[1C][[1C[31madiSettings[0m[1C]
            hps = json_parse[[1C[31mhps[0m[1C]
            i2c = json_parse[[1C[31mi2c[0m[1C]

        [34m# print("DEBUG -> timeStamp %s" %bandInfo)[0m
        [34m# print("DEBUG -> sensor %s" %sensor)[0m
        [34m# print("DEBUG -> adiSettings %s" %adiSettings)[0m
        [34m# print("DEBUG -> hps%s" %hps)[0m
        [34m# print("DEBUG -> i2c%s" %i2c)[0m

            setDB_str((stats + [36mstr[0m([1C) + [3C + [36mstr[0m(entry)), escId);
            setDB_int((stats + [36mstr[0m([1C) + [3C + [36mstr[0m(entry)), bandId);
            setDB_int((stats + [36mstr[0m([1C) + [3C + [36mstr[0m(entry)), bandInfo);
            setDB_int((stats + [36mstr[0m([1C) + [3C + [36mstr[0m(entry)), sensor[[1C[31magcGain[0m[1C]);
            setDB_int((stats + [36mstr[0m([1C) + [3C + [36mstr[0m(entry)),
                      sensor[[1C[31mgpioOverLoad[0m[1C]);
            setDB_int((stats + [36mstr[0m([1C) + [3C + [36mstr[0m(entry)),
                      sensor[[1C[31mgpioSPIvalue[0m[1C]);
            setDB_str((stats + [36mstr[0m([1C) + [3C + [36mstr[0m(entry)),
                      sensor[[1C[31mrmsAverage[0m[1C]);
            setDB_int((stats + [36mstr[0m([1C) + [3C + [36mstr[0m(entry)),
                      sensor[[1C[31magcMaxVal[0m[1C]);
            setDB_str((stats + [36mstr[0m([2C) + [3C + [36mstr[0m(entry)),
                      sensor[[1C[31mnoiseRssiDbm[0m[1C]);
            setDB_int((stats + [36mstr[0m([2C) + [3C + [36mstr[0m(entry)), sensor[[1C[31mdcI[0m[1C]);
            setDB_int((stats + [36mstr[0m([2C) + [3C + [36mstr[0m(entry)), sensor[[1C[31mdcQ[0m[1C]);
            setDB_int((stats + [36mstr[0m([2C) + [3C + [36mstr[0m(entry)),
                      sensor[[1C[31miqImbalanceGaindB[0m[1C]);
            setDB_int((stats + [36mstr[0m([2C) + [3C + [36mstr[0m(entry)),
                      sensor[[1C[31miqImbalancePhaseDeg[0m[1C]);
            setDB_int((stats + [36mstr[0m([2C) + [3C + [36mstr[0m(entry)),
                      sensor[[1C[31mnumDmaOverflows[0m[1C]);
            setDB_unsigned((stats + [36mstr[0m([2C) + [3C + [36mstr[0m(entry)),
                           adiSettings[[1C[31madiRxLoHz[0m[1C]);[116;220H9-26[34;26H[34h[?25h[?25l:[116;219H20-27[34;27H[34h[?25h[?25l[35;115r[35;1H[L[1;116r[116;215H[K[116;215H111,1[9C45%[35;1H[34h[?25h[?25l[116;219H2-9[35;9H[34h[?25h[?25l[116;219H3-17[35;17H[34h[?25h[?25le[116;219H4-18[35;18H[34h[?25h[?25ls[116;219H5-19[35;19H[34h[?25h[?25lc[116;219H6-20[35;20H[34h[?25h[?25lQ[116;219H7-21[35;21H[34h[?25h[?25l.[116;219H8-22[35;22H[34h[?25h[116;1H[K[35;21H[?25l[116;215H111,7-21      45%[35;21H[34h[?25h[?25l[116;215H[K[116;1H:[34h[?25hv[?25l[34h[?25hs[?25l[34h[?25hp[?25l[34h[?25h[?25l [34h[?25he[?25l[34h[?25hs[?25l[34h[?25hc[?25l[34h[?25h...[?25l_health_data_2017_11_08_20_27_39.csv[34h[?25h...[?25l[116;10Hmain.py[116;17H[K[116;17H[34h[?25h...[?25l[116;10Hqueue.py[116;18H[K[116;18H[34h[?25h[?25l"esc_queue.py" [116;16H[K[116;16H182L, 5070C[1;1H[34m#!/usr/bin/env python[0m                                     [58C[7m|[0m[2;19H                                                     [45C[7m|[0m
[35mfrom[0m Queue [35mimport[0m Queue[93C[7m|[0m
[35mimport[0m threading                      [78C[7m|[0m[5;17H                                                          [42C[7m|[0m
esc_sn01_Q= Queue()[97C[7m|[0m
esc_sn015_Q = Queue()[95C[7m|[0m
esc_sn023_Q = Queue()[95C[7m|[0m
esc_sn026_Q = Queue()                                                                [31C[7m|[0m
[30m[43mesc_sn029_Q[0m = Queue()                                                                                               [7m|[0m
esc_sn08_Q = Queue()                   [77C[7m|[0m
esc_sn014_Q = Queue()[95C[7m|[13;117H|[0m
thread_list=[]           [91C[7m|[15;117H|[16;117H|[0m
[33mdef[0m [36mesc_thread_handler[0m(username):                          [57C[7m|[0m
        [33mif[0m username == [31m'esc_sn014'[0m: [80C[7m|[0m
                esc_worker = threading.Thread(name=username, target=esc_sn014_Q_thread, args=(username,))[11C[7m|[0m[20;9H        esc_worker.setDaemon = [36mTrue[0m[73C[7m|[0m[21;13H    esc_worker.start()         [73C[7m|[0m[22;9H[33mif[0m username == [31m'esc_sn029'[0m:[81C[7m|[0m[23;13H    esc_worker = threading.Thread(name=username, target=[30m[43mesc_sn029_Q[0m_thread, args=(username,))[11C[7m|[0m[24;17Hesc_worker.setDaemon = [36mTrue[0m  [71C[7m|[0m[25;17Hesc_worker.start()          [72C[7m|[0m[26;9H[33mif[0m username == [31m'esc_sn026'[0m:[81C[7m|[0m[27;17Hesc_worker = threading.Thread(name=username, target=esc_sn026_Q_thread, args=(username,))[11C[7m|[0m[28;9H        esc_worker.setDaemon = [36mTrue[0m[73C[7m|[0m[29;17Hesc_worker.start()[82C[7m|[0m[30;9H[33mif[0m username == [31m'esc_sn023'[0m:[81C[7m|[0m
                esc_worker = threading.Thread(name=username, target=esc_sn023_Q_thread, args=(username,))[11C[7m|[0m[32;17Hesc_worker.setDaemon = [36mTrue[0m[73C[7m|[0m
                esc_worker.start()[82C[7m|[0m[34;25H[31mesc_sn015'[0m:[81C[7m|[0m[35;20H_worker = threading.Thread(name=username, target=esc_sn015_Q_thread, args=(username,))[11C[7m|[0m[36;17Hesc_worker.setDaemon = [36mTrue[0m[73C[7m|[0m[37;17Hesc_worker.start()[82C[7m|[0m
        [33mif[0m username == [31m'esc_sn01'[0m:[82C[7m|[0m
                esc_worker = threading.Thread(name=username, target=esc_sn01_Q_thread, args=(username,))[12C[7m|[0m
                esc_worker.setDaemon = [36mTrue[0m[73C[7m|[0m
                esc_worker.start()[82C[7m|[0m
        [33mif[0m username == [31m'esc_sn08'[0m:[82C[7m|[0m
                esc_worker = threading.Thread(name=username, target=esc_sn08_Q_thread, args=(username,))[12C[7m|[0m
                esc_worker.setDaemon = [36mTrue[0m   [70C[7m|[0m
                esc_worker.start()[82C[7m|[0m
            [104C[7m|[0m
[34m#o==================================o====================================o================================[0m[10C[7m|[0m
[33mdef[0m [36mesc_sn014_Q_thread[0m(username):                   [64C[7m|[0m[49;9Hthread_list.append(username)         [71C[7m|[0m[50;9Hcounter=[31m0[0m           [88C[7m|[0m[51;9H[33mwhile[0m [36mTrue[0m:              [83C[7m|[0m[52;13H    [33mtry[0m:[96C[7m|[0m[53;25Hhb = esc_sn014_Q.get([36mTrue[0m, [31m20[0m)[62C[7m|[0m[54;13H            [33mif[0m hb:[86C[7m|[0m[55;13H                esc_sn014_Q.task_done()[65C[7m|[0m[56;17H[33mexcept[0m:[93C[7m|[0m[57;13H            [36mprint[0m([31m"14:timeout"[0m)[73C[7m|[0m[58;13H            counter = counter + [31m1[0m[71C[7m|[0m[59;13H            [33mif[0m counter==[31m3[0m:                  [60C[7m|[0m[60;13H                    counter=[31m0[0m                   [56C[7m|[0m[61;13H                    [36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn014, raise a trap"[0m)[16C[7m|[0m[62;13H                    thread_list.pop(username)[59C[7m|[0m[63;33H[33mbreak[0m[79C[7m|[0m[64;25H[33melif[0m counter < [31m3[0m:[75C[7m|[0m[65;13H                    [33mcontinue[0m                                             [31C[7m|[0m[66;13H                                                        [48C[7m|[0m
[34m#o==================================o====================================o================================[0m[10C[7m|[0m
[33mdef[0m [36mesc_sn01_Q_thread[0m(username):      [78C[7m|[0m[69;9Hthread_list.append(username)       [73C[7m|[0m[70;9Hcounter=[31m0[0m[7C                               [61C[7m|[0m[71;9H[33mwhile[0m [36mTrue[0m:                               [66C[7m|[0m[72;17H[33mtry[0m:                               [65C[7m|[0m[73;21H    hb = esc_sn01_Q.get([36mTrue[0m, [31m20[0m)[63C[7m|[0m[74;17H        [33mif[0m hb:[86C[7m|[0m[75;25H    esc_sn01_Q.task_done()[66C[7m|[0m[76;17H[33mexcept[0m:[93C[7m|[0m[77;13H            [36mprint[0m([31m"01:timeout"[0m)[73C[7m|[0m[78;17H        counter = counter + [31m1[0m [70C[7m|[0m[79;17H        [33mif[0m counter==[31m3[0m:[78C[7m|[0m[80;33Hcounter=[31m0[0m[75C[7m|[0m[81;13H                    [36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn01, raise a trap"[0m)[17C[7m|[0m[82;13H                    thread_list.pop(username)[59C[7m|[0m[83;13H                    [33mbreak[0m                          [53C[7m|[0m[84;13H            [33melif[0m counter < [31m3[0m:[75C[7m|[0m[85;13H                    [33mcontinue[0m[76C[7m|[0m
[34m#o==================================o====================================o================================[0m[10C[7m|[0m
[33mdef[0m [36mesc_sn015_Q_thread[0m(username):                 [66C[7m|[0m[88;9Hthread_list.append(username)         [71C[7m|[0m[89;9Hcounter=[31m0[0m                                      [61C[7m|[0m[90;9H[33mwhile[0m [36mTrue[0m:                   [78C[7m|[0m[91;9H        [33mtry[0m:                  [78C[7m|[0m[92;25Hhb = esc_sn015_Q.get([36mTrue[0m, [31m20[0m)[62C[7m|[0m[93;13H            [33mif[0m hb:                                    [50C[7m|[0m[94;13H                esc_sn015_Q.task_done()                [49C[7m|[0m[95;13H    [33mexcept[0m:                                              [47C[7m|[0m[96;13H            [36mprint[0m([31m"15:timeout"[0m)                                   [38C[7m|[0m[97;13H            counter = counter + [31m1[0m             [58C[7m|[0m[98;23H  [33mif[0m counter==[31m3[0m:        [70C[7m|[0m[99;13H                    counter=[31m0[0m                 [58C[7m|[0m[100;23H          [36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn015, raise a trap"[0m)[16C[7m|[0m[101;13H                    thread_list.pop(username) [58C[7m|[0m[102;23H          [33mbreak[0m       [72C[7m|[0m[103;13H            [33melif[0m counter < [31m3[0m:                 [58C[7m|[0m[104;23H          [33mcontinue[0m   [73C[7m|[0m
[34m#o==================================o====================================o================================[0m[10C[7m|[0m
[33mdef[0m [36mesc_sn023_Q_thread[0m(username):             [70C[7m|[0m[107;9Hthread_list.append(username)                                       [41C[7m|[0m[108;9Hcounter=[31m0[0m                                                          [41C[7m|[0m[109;9H[33mwhile[0m [36mTrue[0m:                                        [57C[7m|[0m[110;17H[33mtry[0m:                               [65C[7m|[0m[111;13H            hb = esc_sn023_Q.get([36mTrue[0m, [31m20[0m)     [57C[7m|[0m[112;23H  [33mif[0m hb:                       [63C[7m|[0m[113;13H                esc_sn023_Q.task_done()        [57C[7m|[0m[114;17H[33mexcept[0m:                          [67C[7m|[0m
[1m[7mesc_queue.py                                                                                      23,3-17        Top [0m[1;130H[36mprint[0m([31m'%s at %s'[0m % (errorStatus.prettyPrint(),[2;136HerrorIndex [33mand[0m varBinds[[36mint[0m(errorIndex) - [31m1[0m] [33mor[0m [31m'?'[0m))[3;126H[33melse[0m:[4;130H[33mfor[0m name, val [33min[0m varBinds:[5;134H[36mprint[0m([31m'%s = %s'[0m % (name.prettyPrint(), val.prettyPrint()))[9;118H[34m# snmpset -v2c -c federated 34.215.95.184 1.3.6.1.4.1.8072.2.7.1.1.4.1.2.1 s "FL033C"[10;118H# esIndex         escID channelId detectionFlag timeStampSensorResults maxRssiDbm minRssiDbm maxSnrDb minSnrDb numD[11;118Hetections numAttempts numDetectionsTimeWindow numAttemptsTimeWindow probDetection probDetectionTimeWindow[0m[12;118Hstats = [31m"1.3.6.1.4.1.8072.2.7.1.1.3.1."[0m[15;118H[34m#atexit.register(cleanup)[0m[18;118H[31m""" Function: Thread_2 handle csv file ahndler requests """[0m[19;118H[33mdef[0m [36mcsv_client_hdlr[0m(connection,e,t):[20;122H[33mwhile[0m [36mTrue[0m:[21;126H[33mwhile[0m [33mnot[0m e.isSet():[22;130H[36mprint[0m([31m'wait for event timeout'[0m)[23;130Hevent_is_set = e.wait()[24;130H[33mif[0m event_is_set:[25;134H[36mprint[0m([31m"Sync sent to CSV app"[0m)[26;134Hdata=connection.send([31m"Sync"[0m)[27;130H[33melse[0m:[28;134H[36mprint[0m([31m'do nothing'[0m)[29;126Htime.sleep([31m2[0m)[32;118H[31m""" Function: Thread_1 handle rest server requests """[0m[34;118H[33mdef[0m [36mput_data_into_queue[0m(username):[35;126H[33mif[0m username == [31m''[0m:[36;134HescQ.[39;118H[33mdef[0m [36mhandle_response[0m(data):[40;122H[33mglobal[0m create_flag[41;122Hindex_counter = [31m0[0m[42;122Hhb_counter=[31m0[0m[43;118H[34m# receive the data in small chunks[44;122H#while True:[0m[45;122H[36mprint[0m([31m"(rest_server) Waiting for data..."[0m)[46;122H[34m#data = connection.recv(2048)[0m[47;122H[33mif[0m data:[48;130Hjson_parse = json.loads(data)[49;130HjsonHdlr = [36mopen[0m([31m"health_data.json"[0m, [31m'w'[0m)[50;130Hpickle.dump(json_parse, jsonHdlr)[51;130HjsonHdlr.close()[52;130H[36mprint[0m([31m'Event is set'[0m)[53;130H[34m#e.set()[0m[55;130H[36mprint[0m(json_parse)[56;130HbandId = json_parse[[31m'bandIndex'[0m][58;130Hentry = bandId[59;130HescId = json_parse[[31m'sensorId'[0m][60;130H[34m#retrieve sensor Id fed_esc_029 to esc_sn029[0m[61;130HnewEscId = escId[[31m4[0m:[31m8[0m] + [31m"sn"[0m + escId[[31m8[0m:[31m11[0m] +[31m"_Q"[0m[62;130H[36mprint[0m(newEscId)[63;130HescQ.newEscId.put(json_parse)[66;130H[36mprint[0m([31m"----------------------- rest_server_hdlr ---------------------[0m[35m\n[0m[31m"[0m)[67;130H[33mif[0m ((bandId == [31m0[0m [33mor[0m bandId == [31m1[0m) [33mand[0m index_counter < [31m6[0m):[68;134H[36mprint[0m([31m"---> Window Stared <---"[0m)[69;134H[33mif[0m (create_flag == [31m1[0m):[70;138H[33mfor[0m num [33min[0m [36mxrange[0m([31m1[0m,[31m7[0m):[71;142HsiteId = escId + [31m"_"[0m + [36mstr[0m(num)[72;142HsiteID_list.append(siteId)[73;142HhealthDB.createItem(siteId)[74;138Hcreate_flag = [31m0[0m[75;134H[33melse[0m:[76;142H[36mprint[0m([31m""[0m)[78;130H[33mif[0m(index_counter == [31m6[0m):[79;134H[36mprint[0m([31m"reset counter to zero"[0m)[80;134Hindex_counter = [31m0[0m[82;130HbandInfo = json_parse[[31m'bandInfo'[0m][[31m'timeStampHealthCheck'[0m][83;130Hsensor = json_parse[[31m'bandInfo'[0m][[31m'sensor'[0m][84;130HadiSettings = json_parse[[31m'bandInfo'[0m][[31m'adiSettings'[0m][85;130Hhps = json_parse[[31m'hps'[0m][86;130Hi2c = json_parse[[31m'i2c'[0m][88;126H[34m# print("DEBUG -> timeStamp %s" %bandInfo)[89;126H# print("DEBUG -> sensor %s" %sensor)[90;126H# print("DEBUG -> adiSettings %s" %adiSettings)[91;126H# print("DEBUG -> hps%s" %hps)[92;126H# print("DEBUG -> i2c%s" %i2c)[0m[94;130HsetDB_str((stats + [36mstr[0m([31m2[0m) + [31m"."[0m + [36mstr[0m(entry)), escId);[95;130HsetDB_int((stats + [36mstr[0m([31m3[0m) + [31m"."[0m + [36mstr[0m(entry)), bandId);[96;130HsetDB_int((stats + [36mstr[0m([31m4[0m) + [31m"."[0m + [36mstr[0m(entry)), bandInfo);[97;130HsetDB_int((stats + [36mstr[0m([31m5[0m) + [31m"."[0m + [36mstr[0m(entry)), sensor[[31m'agcGain'[0m]);[98;130HsetDB_int((stats + [36mstr[0m([31m6[0m) + [31m"."[0m + [36mstr[0m(entry)),[99;140Hsensor[[31m'gpioOverLoad'[0m]);[100;130HsetDB_int((stats + [36mstr[0m([31m7[0m) + [31m"."[0m + [36mstr[0m(entry)),[101;140Hsensor[[31m'gpioSPIvalue'[0m]);[102;130HsetDB_str((stats + [36mstr[0m([31m8[0m) + [31m"."[0m + [36mstr[0m(entry)),[103;140Hsensor[[31m'rmsAverage'[0m]);[104;130HsetDB_int((stats + [36mstr[0m([31m9[0m) + [31m"."[0m + [36mstr[0m(entry)),[105;140Hsensor[[31m'agcMaxVal'[0m]);[106;130HsetDB_str((stats + [36mstr[0m([31m10[0m) + [31m"."[0m + [36mstr[0m(entry)),[107;140Hsensor[[31m'noiseRssiDbm'[0m]);[108;130HsetDB_int((stats + [36mstr[0m([31m11[0m) + [31m"."[0m + [36mstr[0m(entry)), sensor[[31m'dcI'[0m]);[109;130HsetDB_int((stats + [36mstr[0m([31m12[0m) + [31m"."[0m + [36mstr[0m(entry)), sensor[[31m'dcQ'[0m]);[110;130HsetDB_int((stats + [36mstr[0m([31m13[0m) + [31m"."[0m + [36mstr[0m(entry)),[111;140Hsensor[[31m'iqImbalanceGaindB'[0m]);[112;130HsetDB_int((stats + [36mstr[0m([31m14[0m) + [31m"."[0m + [36mstr[0m(entry)),[113;140Hsensor[[31m'iqImbalancePhaseDeg'[0m]);[114;130HsetDB_int((stats + [36mstr[0m([31m15[0m) + [31m"."[0m + [36mstr[0m(entry)),[115;118H[7msnmp_stat.py [+]                                                                                 111,7-21       44%[23;17H[34h[?25h[115;1Hesc_queue.py                                                                                      [?25l23,3-17        Top [0m[1m[7msnmp_stat.py [+]                                                                                 111,7-21       44%[36;138H[34h[?25h[?25l[0m[116;1H[1m-- INSERT --[0m[116;13H[K[36;138H[34h[?25h[?25l[115;219H[1m[7m8-22[36;139H[34h[?25h[?25l[0mesc_sn01_Q=[115;219H[1m[7m19-33[36;150H[34h[?25h[?25l[0m[36;149H[K[115;220H[1m[7m8-32[36;149H[34h[?25h[?25l[0m.[115;220H[1m[7m9-33[36;150H[34h[?25h[?25l[0mp[115;219H[1m[7m20-34[36;151H[34h[?25h[?25l[0mu[115;220H[1m[7m1-35[36;152H[34h[?25h[?25l[0mt[115;220H[1m[7m2-36[36;153H[34h[?25h[?25l[0m([115;220H[1m[7m3-37[36;154H[34h[?25h[?25l[0md[115;220H[1m[7m4-38[36;155H[34h[?25h[?25l[0ma[115;220H[1m[7m5-39[36;156H[34h[?25h[?25l[0mt[115;220H[1m[7m6-40[36;157H[34h[?25h[?25l[0ma[115;220H[1m[7m7-41[36;158H[34h[?25h[?25l[0m)[46m([0mdata[46m)[0m[115;220H[1m[7m8-42[36;159H[34h[?25h[0m: [116;1H[K[?25l[115;220H[1m[7m7-41[36;158H[34h[?25h[?25l[116;1H[0m:w[34h[?25h[?25l"snmp_stat.py" 282L, 10162C written[115;131H[1m[7m   [36;158H[34h[?25h[?25l[0m(data)[115;217H[1m[7m0,19-26[35;143H[34h[?25h[?25l[115;216H09,34   [34;151H[34h[?25h[?25l[0m[34;141H[46m([8C)[0m[115;220H[1m[7m3[34;150H[34h[?25h[?25l[0m[116;1H[1m-- INSERT --[0m[116;13H[K[34;150H[34h[?25h[?25l[46m,[0m):[115;131H[1m[7m[+][86C4[0m[34;150H,[46m)[34h[?25h[?25ld[0m):d[46m)[0m[115;220H[1m[7m5[34;152H[34h[?25h[?25l[0m[46ma[0m):a[46m)[0m[115;220H[1m[7m6[34;153H[34h[?25h[?25l[0m[46mt[0m):t[46m)[0m[115;220H[1m[7m7[34;154H[34h[?25h[?25l[0m[46ma[0m):a[46m)[0m[115;220H[1m[7m8[34;155H[34h[?25h[0m[116;1H[K[?25l[34;141H([13C)[115;220H[1m[7m7[34;154H[34h[?25h[?25l[116;1H[0m:[34h[?25hw[?25l[34h[?25h[?25l"snmp_stat.py" 282L, 10167C written[115;131H[1m[7m   [34;154H[34h[?25h[?25l[115;216H10,19-26[35;143H[34h[?25h[?25l[115;220H8-25[35;142H[34h[?25h[?25l[0m[116;1H[1m-- INSERT --[0m[116;13H[K[35;142H[34h[?25h[?25l[31mf'[0m:[115;131H[1m[7m[+][86C9-26[35;143H[34h[?25h[?25l[0m[31me'[0m:[115;219H[1m[7m20-27[35;144H[34h[?25h[?25l[0m[31md'[0m:[115;220H[1m[7m1-28[35;145H[34h[?25h[?25l[0m[31m_'[0m:[115;220H[1m[7m2-29[35;146H[34h[?25h[?25l[0m[31me'[0m:[115;220H[1m[7m3-30[35;147H[34h[?25h[?25l[0m[31ms'[0m:[115;220H[1m[7m4-31[35;148H[34h[?25h[?25l[0m[31mc'[0m:[115;220H[1m[7m5-32[35;149H[34h[?25h[?25l[0m[31m_'[0m:[115;220H[1m[7m6-33[35;150H[34h[?25h[?25l[0m[31m0'[0m:[115;220H[1m[7m7-34[35;151H[34h[?25h[?25l[0m[31m1'[0m:[115;220H[1m[7m8-35[35;152H[34h[?25h[0m[116;1H[K[?25l[115;220H[1m[7m7-34[35;151H[34h[?25h[?25l[116;1H[0m:[34h[?25hw[?25l[34h[?25h[?25l"snmp_stat.py" 282L, 10177C written[115;131H[1m[7m   [35;151H[34h[?25h[?25l[0m[116;1H[K[116;1H:[34h[?25hv[?25l[34h[?25hs[?25l[34h[?25hp[?25l[34h[?25h[?25l [34h[?25h[?25l[34h[?25h[?25l[116;4H[K[116;4H[34h[?25h[?25l[116;3H[K[116;3H[34h[?25h[?25l[116;2H[K[116;2H[34h[?25he[?25l[34h[?25h[?25l [34h[?25ht[?25l[34h[?25hr[?25l[34h[?25h[?25l[116;5H[K[116;5H[34h[?25hy[?25l[34h[?25hp[?25l[34h[?25h...[?25lescript[34h[?25h[?25l"typescript" [noeol] 899L, 106496C[1;118H<------ No notification ----->[34m^M[0m[1;150H[K[2;118H[34m^M[0m[2;136H[K[3;118Hesc_sn01[34m^M[0m[3;128H[K[4;118H<------ No notification ----->[34m^M[0m[4;150H[K[5;118H[34m^M[0m[5;134H[K[6;118Hesc_sn029[34m^M[0m[7;118H<------ No notification ----->[34m^M[8;118H^M[0m[9;118Hesc_sn026[34m^M[0m[9;129H[K[10;118H<------ No notification ----->[34m^M[0m[10;150H[K[11;118H[34m^M[0m[11;120H[K[12;118H{u'esc_sn08': 4, u'esc_sn01': 5, u'esc_sn023': 3, u'esc_sn026': 7, u'esc_sn029': 6, u'esc_sn015': 1, u'esc_sn014':[13;118H2}[34m^M[0m[14;143Hnew connections in App.. please sync with Db[34m^M[0m[15;118HPreparing DELETE >>>[34m^M[0m[15;140H[K[16;143HConnected to MySQL database[34m^M[0m[17;118HHB thread active are...[34m^M[0m[18;118H[u'esc_sn08', u'esc_sn01', u'esc_sn023', u'esc_sn026', u'esc_sn029', u'esc_sn015', u'esc_sn014'][34m^M[0m[19;118HPING 100.61.0.14 (100.61.0.14) 56(84) bytes of data.[34m^M[0m[20;118H64 bytes from 100.61.0.14: icmp_seq=1 ttl=64 time=387 ms[34m^M[21;118H^M[0m[21;126H[K[22;118H--- 100.61.0.14 ping statistics ---[34m^M[0m[22;155H[K[23;118H1 packets transmitted, 1 received, 0% packet loss, time 0ms[34m^M[0m[24;118Hrtt min/avg/max/mdev = 387.110/387.110/387.110/0.000 ms[34m^M[0m[25;118HComm is up 100.61.0.14[34m^M[0m[25;142H[K[26;118HPING 100.61.0.34 (100.61.0.34) 56(84) bytes of data.[34m^M[27;118H^M[0m[27;130H[K[28;118H--- 100.61.0.34 ping statistics ---[34m^M[0m[29;118H1 packets transmitted, 0 received, 100% packet loss, time 0ms[34m^M[30;118H^M[0m[31;118HNo response from 100.61.0.34[34m^M[0m[32;118HPING 100.61.0.22 (100.61.0.22) 56(84) bytes of data.[34m^M[0m[33;118H64 bytes from 100.61.0.22: icmp_seq=1 ttl=64 time=445 ms[34m^M[34;118H^M[0m[34;120H[K[35;118H--- 100.61.0.22 ping statistics ---[34m^M[0m[36;118H1 packets transmitted, 1 received, 0% packet loss, time 0ms[34m^M[0m[37;118Hrtt min/avg/max/mdev = 445.931/445.931/445.931/0.000 ms[34m^M[0m[38;118HComm is up 100.61.0.22[34m^M[0m[39;118HPING 100.61.0.30 (100.61.0.30) 56(84) bytes of data.[34m^M[0m[40;118H{"sensorId":"fed_esc_029","bandIndex":0,"bandInfo":{"timeStampHealthCheck":14704.853613,"sensor":{"agcGain":57,"gpi[41;118HoOverLoad":0,"gpioSPIvalue":0,"rmsAverage":18.055470,"agcMaxVal":120,"noiseRssiDbm":-86.087822,"dcI":-10,"dcQ":-10,[42;118H"iqImbalanceGaindB":0,"iqImbalancePhaseDeg":0,"numDmaOverflows":0},"adiSettings":{"adiRxLoHz":3571503998,"adiTxLoHz[43;118H":3571503998,"adiGainValue":57,"adiTxAttenutation":88000,"adiRxClockHz":49151999,"adiTxClockHz":49151999}},"hps":{"[44;118HoneMinLoad":0,"memoryFreeKb":717020,"memoryTotalKb":763048,"upTime":15078,"cpuClockSpeed":0},"i2c":{"humidity":6.98[45;118H8525,"temperature":111.074097,"compass_x_axis":177,"compass_y_axis":-437,"compass_z_axis":28,"compassChange":0}}[34m^M[0m[46;118H--------------> [34m^M[0m[46;136H[K[47;118H[34m^M[0m[47;122H[K[48;118H(rest_server) Waiting for data...[34m^M[0m[48;153H[K[49;118HEvent is set[34m^M[0m[49;132H[K[50;118H{'hps': {'memoryFreeKb': 717020, 'cpuClockSpeed': 0, 'upTime': 15078, 'oneMinLoad': 0, 'memoryTotalKb': 763048}, 's[51;118HensorId': 'fed_esc_029', 'i2c': {'compassChange': 0, 'temperature': 111.074097, 'humidity': 6.988525, 'compass_x_ax[52;118His': 177, 'compass_y_axis': -437, 'compass_z_axis': 28}, 'bandIndex': 0, 'bandInfo': {'adiSettings': {'adiTxAttenut[53;118Hation': 88000, 'adiTxClockHz': 49151999, 'adiRxClockHz': 49151999, 'adiTxLoHz': 3571503998, 'adiGainValue': 57, 'ad[54;118HiRxLoHz': 3571503998}, 'sensor': {'noiseRssiDbm': -86.087822, 'rmsAverage': 18.05547, 'gpioOverLoad': 0, 'gpioSPIva[55;118Hlue': 0, 'dcI': -10, 'numDmaOverflows': 0, 'iqImbalanceGaindB': 0, 'iqImbalancePhaseDeg': 0, 'agcGain': 57, 'agcMax[56;118HVal': 120, 'dcQ': -10}, 'timeStampHealthCheck': 14704.853613}}[34m^M[0m[57;118Hescsn02_Q[34m^M[0m[58;118H[2017-11-14 23:09:38,362] ERROR in app: Exception on /upload/ [POST][34m^M[0m[59;118HTraceback (most recent call last):[34m^M[0m[59;154H[K[60;120HFile "/usr/lib64/python2.7/site-packages/flask/app.py", line 1982, in wsgi_app[34m^M[0m[61;122Hresponse = self.full_dispatch_request()[34m^M[0m[61;163H[K[62;120HFile "/usr/lib64/python2.7/site-packages/flask/app.py", line 1614, in full_dispatch_request[34m^M[0m[63;122Hrv = self.handle_user_exception(e)[34m^M[0m[63;158H[K[64;120HFile "/usr/lib64/python2.7/site-packages/flask/app.py", line 1517, in handle_user_exception[34m^M[0m[65;122Hreraise(exc_type, exc_value, tb)[34m^M[0m[66;120HFile "/usr/lib64/python2.7/site-packages/flask/app.py", line 1612, in full_dispatch_request[34m^M[0m[67;122Hrv = self.dispatch_request()[34m^M[0m[67;152H[K[68;120HFile "/usr/lib64/python2.7/site-packages/flask/app.py", line 1598, in dispatch_request[34m^M[0m[69;122Hreturn self.view_functions[rule.endpoint](**req.view_args)[34m^M[0m[70;120HFile "/home/sarath/monitoring-system/rest_server.py", line 30, in api_upload[34m^M[0m[71;122HsnmpStat.handle_response(response)[34m^M[0m[71;159H[K[72;120HFile "/home/sarath/monitoring-system/snmp_stat.py", line 134, in handle_response[34m^M[0m[73;122HescQ.newEscId.put(json_parse)[34m^M[0m[73;153H[K[74;118HAttributeError: 'module' object has no attribute 'newEscId'[34m^M[0m[75;118H100.61.0.26 - - [14/Nov/2017 23:09:38] "POST /upload/ HTTP/1.1" 500 -[34m^M[0m[76;118H100.61.0.22 - - [14/Nov/2017 23:09:38] "POST /upload/ HTTP/1.1" 200 -[34m^M[0m[77;119H!!!!!!!!!!!!!!!!!!!!!!!!!! 1 !!!!!!!!!!!!!!!!!!!!!!!!!!! [34m^M[0m[78;118H{u'nclients': 7, u'bytesout': 114186536, u'bytesin': 32079492}[34m^M[0m[79;118H{u'esc_sn08': 4, u'esc_sn01': 5, u'esc_sn023': 3, u'esc_sn026': 7, u'esc_sn029': 6, u'esc_sn015': 1, u'esc_sn014':[80;118H2}[34m^M[0m[80;134H[K[81;143HDB is in sync with App[34m^M[0m[82;118HHB thread active are...[34m^M[0m[82;143H[K[83;118H[u'esc_sn08', u'esc_sn01', u'esc_sn023', u'esc_sn026', u'esc_sn029', u'esc_sn015', u'esc_sn014'][34m^M[0m[84;118H08:timeout[34m^M[0m[84;130H[K[85;118H01:timeout[34m^M[0m[85;130H[K[86;118H23:timeout[34m^M[0m[86;130H[K[87;118H26:timeout[34m^M[0m[88;118H29:timeout[34m^M[0m[88;130H[K[89;118H15:timeout[34m^M[0m[89;130H[K[90;118H14:timeout[34m^M[0m[90;130H[K[91;118H[34m^M[0m[91;126H[K[92;118H--- 100.61.0.30 ping statistics ---[34m^M[0m[92;155H[K[93;118H1 packets transmitted, 0 received, 100% packet loss, time 0ms[34m^M[94;118H^M[0m[94;130H[K[95;118HNo response from 100.61.0.30[34m^M[0m[95;149H[K[96;118HPING 100.61.0.10 (100.61.0.10) 56(84) bytes of data.[34m^M[0m[96;172H[K[97;118H{"sensorId":"fed_esc_029","bandIndex":1,"bandInfo":{"timeStampHealthCheck":14720.510180,"sensor":{"agcGain":57,"gpi[98;118HoOverLoad":0,"gpioSPIvalue":0,"rmsAverage":17.691807,"agcMaxVal":121,"noiseRssiDbm":-86.264557,"dcI":-10,"dcQ":-15,[99;118H"iqImbalanceGaindB":0,"iqImbalancePhaseDeg":0,"numDmaOverflows":0},"adiSettings":{"adiRxLoHz":3621504000,"adiTxLoHz[100;118H":3571503998,"adiGainValue":57,"adiTxAttenutation":88000,"adiRxClockHz":49151999,"adiTxClockHz":49151999}},"hps":{"[101;118HoneMinLoad":0,"memoryFreeKb":717020,"memoryTotalKb":763048,"upTime":15093,"cpuClockSpeed":0},"i2c":{"humidity":6.89[102;118H0869,"temperature":111.164734,"compass_x_axis":172,"compass_y_axis":-434,"compass_z_axis":32,"compassChange":0}}[34m^M[0m[103;118H--------------> [34m^M[0m[103;140H[K[104;118H[34m^M[0m[104;130H[K[105;118H(rest_server) Waiting for data...[34m^M[0m[105;153H[K[106;118HEvent is set[34m^M[0m[106;132H[K[107;118H{'hps': {'memoryFreeKb': 717020, 'cpuClockSpeed': 0, 'upTime': 15093, 'oneMinLoad': 0, 'memoryTotalKb': 763048}, 's[108;118HensorId': 'fed_esc_029', 'i2c': {'compassChange': 0, 'temperature': 111.164734, 'humidity': 6.890869, 'compass_x_ax[109;118His': 172, 'compass_y_axis': -434, 'compass_z_axis': 32}, 'bandIndex': 1, 'bandInfo': {'adiSettings': {'adiTxAttenut[110;118Hation': 88000, 'adiTxClockHz': 49151999, 'adiRxClockHz': 49151999, 'adiTxLoHz': 3571503998, 'adiGainValue': 57, 'ad[111;118HiRxLoHz': 3621504000}, 'sensor': {'noiseRssiDbm': -86.264557, 'rmsAverage': 17.691807, 'gpioOverLoad': 0, 'gpioSPIv[112;118Halue': 0, 'dcI': -10, 'numDmaOverflows': 0, 'iqImbalanceGaindB': 0, 'iqImbalancePhaseDeg': 0, 'agcGain': 57, 'agcMa[113;118HxVal': 121, 'dcQ': -15}, 'timeStampHealthCheck': 14720.51018}}[34m^M[0m[114;118Hescsn02_Q[34m^M[0m[114;130H[K[115;118H[1m[7mtypescript  [85C82,1            [57;118H[34h[?25h[?25l[0m[116;1H[K[116;1H/[34h[?25hf[?25l[34h[?25he[?25l[34h[?25hd[?25l[34h[?25h_[?25l[34h[?25he[?25l[34h[?25hs[?25l[34h[?25hc[?25l[34h[?25h[?25l[10;1Hesc_sn029_Q[23;69Hesc_sn029_Q[40;131H[30m[43mfed_esc[51;129Hfed_esc[97;131Hfed_esc[108;129Hfed_esc[0m[115;215H[1m[7m121,14[97;131H[34h[?25h[?25l[0m[116;1H[K[116;1H:[34h[?25hb[?25l[34h[?25hn[?25l[34h[?25h[?25l[1;118H[34m#!/usr/bin/env python[0m[1;139H[K[2;118H[K[3;118H[35mfrom[0m Queue [35mimport[0m Queue[4;118H[35mimport[0m threading[4;134H[K[5;118H[K[6;125H1_Q= Queue()[7;118Hesc_sn015_Q = Queue()[7;139H[K[8;118Hesc_sn023_Q = Queue()[9;127H_Q = Queue()[10;118Hesc_sn029_Q = Queue()[10;139H[K[11;118Hesc_sn08_Q = Queue()[12;118Hesc_sn014_Q = Queue()[12;139H[K[13;118H[K[14;118Hthread_list=[][14;143H[K[15;118H[K[16;143H[K[17;118H[33mdef[0m [36mesc_thread_handler[0m(username):[18;118H        [33mif[0m username == [31m'esc_sn014'[0m:[18;153H[K[19;118H                esc_worker = threading.Thread(name=username, target=esc_sn014_Q_thread, args=(username,))[20;118H                esc_worker.setDaemon = [36mTrue[0m[20;161H[K[21;118H  [14Cesc_worker.start()[22;118H        [33mif[0m username == [31m'esc_sn029'[0m:[22;153H[K[23;118H                esc_worker = threading.Thread(name=username, target=esc_sn029_Q_thread, args=(username,))[24;118H                esc_worker.setDaemon = [36mTrue[0m[24;161H[K[25;118H                esc_worker.start()[26;118H        [33mif[0m username == [31m'esc_sn026'[0m:[26;153H[K[27;118H  [14Cesc_worker = threading.Thread(name=username, target=esc_sn026_Q_thread, args=(username,))[28;118H                esc_worker.setDaemon = [36mTrue[0m[29;118H                esc_worker.start()[29;153H[K[30;118H        [33mif[0m username == [31m'esc_sn023'[0m:[31;118H                esc_worker = threading.Thread(name=username, target=esc_sn023_Q_thread, args=(username,))[32;118H                esc_worker.setDaemon = [36mTrue[0m[32;162H[K[33;118H                esc_worker.start()[33;152H[K[34;118H        [33mif[0m username == [31m'esc_sn015'[0m:[35;118H                esc_worker = threading.Thread(name=username, target=esc_sn015_Q_thread, args=(username,))[36;118H                esc_worker.setDaemon = [36mTrue[0m[36;161H[K[37;118H                esc_worker.start()[37;152H[K[38;118H        [33mif[0m username == [31m'esc_sn01'[0m:[39;118H                esc_worker = threading.Thread(name=username, target=esc_sn01_Q_thread, args=(username,))[40;118H                esc_worker.setDaemon = [36mTrue[0m[40;161H[K[41;118H                esc_worker.start()[41;152H[K[42;118H        [33mif[0m username == [31m'esc_sn08'[0m:[42;152H[K[43;118H                esc_worker = threading.Thread(name=username, target=esc_sn08_Q_thread, args=(username,))[43;222H[K[44;118H                esc_worker.setDaemon = [36mTrue[0m[44;161H[K[45;118H                esc_worker.start()[45;152H[K[46;118H[K[47;118H[34m#o==================================o====================================o================================[0m[48;118H[33mdef[0m [36mesc_sn014_Q_thread[0m(username):[48;151H[K[49;118H        thread_list.append(username)[50;118H        counter=[31m0[0m[50;135H[K[51;118H        [33mwhile[0m [36mTrue[0m:[51;137H[K[52;118H                [33mtry[0m:[52;138H[K[53;118H                        hb = esc_sn014_Q.get([36mTrue[0m, [31m20[0m)[53;172H[K[54;118H                        [33mif[0m hb:[54;148H[K[55;118H                            esc_sn014_Q.task_done()[55;169H[K[56;118H                [33mexcept[0m:[56;142H[K[57;118H           [13C[36mprint[0m([31m"14:timeout"[0m)[58;118H                        counter = counter + [31m1[0m[58;163H[K[59;118H                        [33mif[0m counter==[31m3[0m:[60;120H                              counter=[31m0[0m[60;159H[K[61;122H                            [36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn014, raise a trap"[0m)[62;120H                              thread_list.pop(username)[62;176H[K[63;122H                            [33mbreak[0m[63;155H[K[64;120H                      [33melif[0m counter < [31m3[0m:[64;159H[K[65;122H                            [33mcontinue[0m[66;120H[K[67;118H[34m#o==================================o====================================o================================[0m[68;118H[33mdef[0m [36mesc_sn01_Q_thread[0m(username):[68;150H[K[69;122H    thread_list.append(username)[69;154H[K[70;120H      counter=[31m0[0m[70;135H[K[71;122H    [33mwhile[0m [36mTrue[0m:[71;137H[K[72;120H              [33mtry[0m:[72;138H[K[73;122H                    hb = esc_sn01_Q.get([36mTrue[0m, [31m20[0m)[74;118H                        [33mif[0m hb:[74;148H[K[75;118H                            esc_sn01_Q.task_done()[75;168H[K[76;118H                [33mexcept[0m:[76;141H[K[77;119H                       [36mprint[0m([31m"01:timeout"[0m)[77;161H[K[78;118H                        counter = counter + [31m1[0m[78;163H[K[79;118H                        [33mif[0m counter==[31m3[0m:[79;156H[K[80;118H    [28Ccounter=[31m0[0m[81;143H       [36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn01, raise a trap"[0m)[82;118H                         [7Cthread_list.pop(username)[83;118H                                [33mbreak[0m[83;155H[K[84;118H            [12C[33melif[0m counter < [31m3[0m:[85;118H            [20C[33mcontinue[0m[86;118H[34m#o==================================o====================================o================================[0m[87;118H[33mdef[0m [36mesc_sn015_Q_thread[0m(username):[88;118H        thread_list.append(username)[89;118H        counter=[31m0[0m[90;118H        [33mwhile[0m [36mTrue[0m:[91;118H  [14C[33mtry[0m:[92;118H                        hb = esc_sn015_Q.get([36mTrue[0m, [31m20[0m)[93;118H                        [33mif[0m hb:[93;148H[K[94;118H  [26Cesc_sn015_Q.task_done()[95;118H                [33mexcept[0m:[95;141H[K[96;118H                        [36mprint[0m([31m"15:timeout"[0m)[96;162H[K[97;118H                        counter = counter + [31m1[0m[97;163H[K[98;118H                        [33mif[0m counter==[31m3[0m:[98;156H[K[99;118H                                counter=[31m0[0m[99;159H[K[100;118H                                [36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn015, raise a trap"[0m)[100;218H[K[101;118H                                thread_list.pop(username)[101;175H[K[102;118H                                [33mbreak[0m[102;155H[K[103;118H                        [33melif[0m counter < [31m3[0m:[104;118H  [30C[33mcontinue[0m[105;118H[34m#o==================================o====================================o================================[0m[106;118H[33mdef[0m [36mesc_sn023_Q_thread[0m(username):[107;118H        thread_list.append(username)[107;154H[K[108;118H        counter=[31m0[0m[108;135H[K[109;118H        [33mwhile[0m [36mTrue[0m:[109;137H[K[110;118H                [33mtry[0m:[110;138H[K[111;118H                        hb = esc_sn023_Q.get([36mTrue[0m, [31m20[0m)[111;172H[K[112;118H                        [33mif[0m hb:[112;148H[K[113;118H                            esc_sn023_Q.task_done()[113;169H[K[114;118H                [33mexcept[0m:[115;118H[1m[7mesc_queue.py[85C23,1-8[9CTop[0m[116;1H"esc_queue.py" 182 lines --12%--[23;125H[34h[?25h[?25l[115;218H[1m[7m2-16[23;133H[34h[?25h[?25l[115;218H3-17[23;134H[34h[?25h[?25l[115;218H4-18[23;135H[34h[?25h[?25l[115;218H5-19[23;136H[34h[?25h[?25l[115;218H6-20[23;137H[34h[?25h[?25l[115;218H7-21[23;138H[34h[?25h[?25l[115;218H8-22[23;139H[34h[?25h[?25l[115;218H9-23[23;140H[34h[?25h[?25l[115;218H10-24[23;141H[34h[?25h[?25l[115;219H1-25[23;142H[34h[?25h[?25l[115;219H2-26[23;143H[34h[?25h[?25l[115;219H3-27[23;144H[34h[?25h[?25l[115;219H4-28[23;145H[34h[?25h[?25l[115;219H5-29[23;146H[34h[?25h[?25l[115;219H6-30[23;147H[34h[?25h[?25l[115;216H4[24;147H[34h[?25h[?25l[0m[116;1H[K[116;1H:[34h[?25hb[?25l[34h[?25hn[?25l[34h[?25h[?25l"snmp_stat.py" 282L, 10177C[1;118H            [36mprint[0m(errorIndication)[2;122H[33melse[0m:[3;118H        [33mif[0m errorStatus:[4;118H            [36mprint[0m([31m'%s at %s'[0m % (errorStatus.prettyPrint(),[5;136HerrorIndex [33mand[0m varBinds[[36mint[0m(errorIndex) - [31m1[0m] [33mor[0m [31m'?'[0m))[6;118H        [33melse[0m:[6;131H[K[7;118H            [33mfor[0m name, val [33min[0m varBinds:[8;118H                [36mprint[0m([31m'%s = %s'[0m % (name.prettyPrint(), val.prettyPrint()))[9;118H[K[10;118H[K[11;118H[34m# unsigned handler[0m[11;136H[K[12;118H[33mdef[0m [36msetDB_unsigned[0m(entry, value):[13;122HerrorIndication, errorStatus, errorIndex, varBinds = cmdGen.setCmd([14;118H        cmdgen.CommunityData([31m'federated'[0m),[15;126Hcmdgen.UdpTransportTarget(([31m'34.215.95.184'[0m, [31m161[0m)),[16;126H(entry, rfc1902.Counter64(value)),[17;118H        )[17;127H[K[18;118H[34m# Check for errors and print out results[0m[19;122H[33mif[0m errorIndication:[19;141H[K[20;130H[36mprint[0m(errorIndication)[20;152H[K[21;122H[33melse[0m:[21;134H[K[22;129HerrorStatus:[22;141H[K[23;130H[36mprint[0m([31m'%s at %s'[0m % (errorStatus.prettyPrint(),[23;176H[K[24;134H  errorIndex [33mand[0m varBinds[[36mint[0m(errorIndex) - [31m1[0m] [33mor[0m [31m'?'[0m))[25;126H[33melse[0m:[25;134H[K[26;126H    [33mfor[0m name, val [33min[0m varBinds:[27;134H[36mprint[0m([31m'%s = %s'[0m % (name.prettyPrint(), val.prettyPrint()))[27;192H[K[28;134H[K[29;134H[K[30;126H[K[31;118H[34m# snmpset -v2c -c federated 34.215.95.184 1.3.6.1.4.1.8072.2.7.1.1.4.1.2.1 s "FL033C"[0m[31;203H[K[32;118H[34m# esIndex         escID channelId detectionFlag timeStampSensorResults maxRssiDbm minRssiDbm maxSnrDb minSnrDb numD[33;118Hetections numAttempts numDetectionsTimeWindow numAttemptsTimeWindow probDetection probDetectionTimeWindow[0m[34;118Hstats = [31m"1.3.6.1.4.1.8072.2.7.1.1.3.1."[0m[35;134H[K[36;134H[K[37;118H[34m#atexit.register(cleanup)[0m[37;143H[K[38;126H[K[39;134H[K[40;118H[31m""" Function: Thread_2 handle csv file ahndler requests """[0m[41;118H[33mdef[0m [36mcsv_client_hdlr[0m(connection,e,t):[42;122H[33mwhile[0m [36mTrue[0m:[42;133H[K[43;126H[33mwhile[0m [33mnot[0m e.isSet():[43;147H[K[44;130H[36mprint[0m([31m'wait for event timeout'[0m)[45;130Hevent_is_set = e.wait()[46;130H[33mif[0m event_is_set:[47;118H                [36mprint[0m([31m"Sync sent to CSV app"[0m)[47;163H[K[48;118H                data=connection.send([31m"Sync"[0m)[49;126H    [33melse[0m:[49;135H[K[50;126H        [36mprint[0m([31m'do nothing'[0m)[51;126Htime.sleep([31m2[0m)[52;134H[K[53;142H[K[54;118H[31m""" Function: Thread_1 handle rest server requests """[0m[55;146H[K[56;118H[33mdef[0m [36mput_data_into_queue[0m(username,data):[57;126H[33mif[0m username == [31m'[0m[30m[43mfed_esc[0m[31m_01'[0m:[57;154H[K[58;134HescQ.esc_sn01_Q.put(data)[58;160H[K[59;142H[K[60;150H[K[61;118H[33mdef[0m [36mhandle_response[0m(data):[61;150H[K[62;122H[33mglobal[0m create_flag[62;150H[K[63;122Hindex_counter = [31m0[0m[63;150H[K[64;122Hhb_counter=[31m0[0m[64;142H[K[65;118H[34m# receive the data in small chunks[0m[65;152H[K[66;122H[34m#while True:[0m[67;118H    [36mprint[0m([31m"(rest_server) Waiting for data..."[0m)[67;164H[K[68;118H    [34m#data = connection.recv(2048)[0m[69;122H[33mif[0m data:[69;130H[K[70;126H    json_parse = json.loads(data)[71;126H    jsonHdlr = [36mopen[0m([31m"health_data.json"[0m, [31m'w'[0m)[72;130Hpickle.dump(json_parse, jsonHdlr)[73;130HjsonHdlr.close()[73;147H[K[74;130H[36mprint[0m([31m'Event is set'[0m)[75;130H[34m#e.set()[0m[75;146H[K[76;134H[K[77;130H[36mprint[0m(json_parse)[77;147H[K[78;130HbandId = json_parse[[31m'bandIndex'[0m][78;162H[K[79;142H[K[80;130Hentry = bandId[80;150H[K[81;130HescId = json_parse[[31m'sensorId'[0m] [81;161H[K[82;130H[34m#retrieve sensor Id [0m[30m[43mfed_esc[0m[34m_029 to esc_sn029[0m[82;174H[K[83;130HnewEscId = escId[[31m4[0m:[31m8[0m] + [31m"sn"[0m + escId[[31m8[0m:[31m11[0m] +[31m"_Q"[0m[84;130H[36mprint[0m(newEscId)[84;145H[K[85;130HescQ.newEscId.put(json_parse)[86;118H[K[87;118H[K[88;126H    [36mprint[0m([31m"----------------------- rest_server_hdlr ---------------------[0m[35m\n[0m[31m"[0m)[89;126H    [33mif[0m ((bandId == [31m0[0m [33mor[0m bandId == [31m1[0m) [33mand[0m index_counter < [31m6[0m):[90;126H        [36mprint[0m([31m"---> Window Stared <---"[0m)[91;134H[33mif[0m (create_flag == [31m1[0m):[92;138H[33mfor[0m num [33min[0m [36mxrange[0m([31m1[0m,[31m7[0m):[92;161H[K[93;142HsiteId = escId + [31m"_"[0m + [36mstr[0m(num)[94;142HsiteID_list.append(siteId)[94;168H[K[95;134H        healthDB.createItem(siteId)[96;138Hcreate_flag = [31m0[0m[96;153H[K[97;134H[33melse[0m:[97;142H[K[98;142H[36mprint[0m([31m""[0m)[98;151H[K[99;150H[K[100;130H[33mif[0m(index_counter == [31m6[0m):[100;153H[K[101;134H[36mprint[0m([31m"reset counter to zero"[0m)[101;164H[K[102;134Hindex_counter = [31m0[0m[102;151H[K[103;142H[K[104;130HbandInfo = json_parse[[31m'bandInfo'[0m][[31m'timeStampHealthCheck'[0m][105;118H            sensor = json_parse[[31m'bandInfo'[0m][[31m'sensor'[0m][105;171H[K[106;118H            adiSettings = json_parse[[31m'bandInfo'[0m][[31m'adiSettings'[0m][107;126H    hps = json_parse[[31m'hps'[0m][107;153H[K[108;126H    i2c = json_parse[[31m'i2c'[0m][109;126H[K[110;126H[34m# print("DEBUG -> timeStamp %s" %bandInfo)[111;126H# print("DEBUG -> sensor %s" %sensor)[0m[111;163H[K[112;126H[34m# print("DEBUG -> adiSettings %s" %adiSettings)[113;126H# print("DEBUG -> hps%s" %hps)[0m[113;156H[K[114;126H[34m# print("DEBUG -> i2c%s" %i2c)[0m[115;118H[1m[7msnmp_stat[88C110,2-9 [7C31%[57;126H[34h[?25h[?25l[115;217H1,2-16[58;133H[34h[?25h[?25l[115;217H0,2-9 [57;126H[34h[?25h[?25l[115;219H5-12[57;129H[34h[?25h[?25l[115;216H09,12  [56;129H[34h[?25h[?25l[115;217H8,0-1[55;118H[34h[?25h[?25l[115;217H7,12 [54;129H[34h[?25h[?25l[115;217H6,0-1[53;118H[34h[?25h[?25l[115;217H5[52;118H[34h[?25h[?25l[115;217H4,12 [51;129H[34h[?25h[?25l[115;217H3[50;129H[34h[?25h[?25l[115;217H2[49;129H[34h[?25h[?25l[115;217H1[48;129H[34h[?25h[?25l[115;217H0[47;129H[34h[?25h[?25l[115;215H99,12 [46;129H[34h[?25h[?25l[115;216H8[45;129H[34h[?25h[?25l[115;216H7[44;129H[34h[?25h[?25l[115;216H6[43;129H[34h[?25h[?25l[115;216H5[42;129H[34h[?25h[?25l[115;216H4[41;129H[34h[?25h[?25l[115;216H3[40;129H[34h[?25h[?25l[115;216H2,0-1[39;118H[34h[?25h[?25l[115;216H1[38;118H[34h[?25h[?25l[115;216H2[39;118H[34h[?25h[?25l[115;216H3,12 [40;129H[34h[?25h[?25l[115;216H4[41;129H[34h[?25h[?25l[115;216H5[42;129H[34h[?25h[?25l[115;216H6[43;129H[34h[?25h[?25l[115;216H7[44;129H[34h[?25h[?25l[115;216H8[45;129H[34h[?25h[?25l[115;216H9[46;129H[34h[?25h[?25l[115;215H100,12[47;129H[34h[?25h[?25l[115;217H1[48;129H[34h[?25h[?25l[115;217H2[49;129H[34h[?25h[?25l[115;217H3[50;129H[34h[?25h[?25l[115;217H4[51;129H[34h[?25h[?25l[115;217H5,0-1[52;118H[34h[?25h[?25l[115;217H6[53;118H[34h[?25h[?25l[115;217H7,12 [54;129H[34h[?25h[?25l[115;217H8,0-1[55;118H[34h[?25h[?25l[115;217H9,12 [56;129H[34h[?25h[?25l[115;216H10,5-12[57;129H[34h[?25h[?25l[115;217H1,2-16[58;133H[34h[?25h[?25l[0m
[117C                                                                                                                   [60;118H                                                                                                                   [61;118H                                                                                                                   [62;118H                                                                                                                   [63;118H[33mdef[0m [36mhandle_response[0m(data):                                                                                         [64;118H    [33mglobal[0m create_flag                                                                                             [65;118H    index_counter = [31m0[0m                                                                                              [66;118H    hb_counter=[31m0[0m                                                                                                   [67;118H[34m# receive the data in small chunks[0m                                                                                 [68;118H    [34m#while True:[0m                                                                                                   [69;118H    [36mprint[0m([31m"(rest_server) Waiting for data..."[0m)                                                                     [70;118H    [34m#data = connection.recv(2048)[0m                                                                                  [71;118H    [33mif[0m data:                                                                                                       [72;118H            json_parse = json.loads(data)                                                                          [73;118H            jsonHdlr = [36mopen[0m([31m"health_data.json"[0m, [31m'w'[0m)                                                               [74;118H            pickle.dump(json_parse, jsonHdlr)                                                                      [75;118H            jsonHdlr.close()                                                                                       [76;118H            [36mprint[0m([31m'Event is set'[0m)                                                                                  [77;118H            [34m#e.set()[0m                                                                                               [78;118H                                                                                                                   [79;118H            [36mprint[0m(json_parse)                                                                                      [80;118H            bandId = json_parse[[31m'bandIndex'[0m]                                                                       [81;118H                                                                                                                   [82;118H            entry = bandId                                                                                         [83;118H            escId = json_parse[[31m'sensorId'[0m]                                                                         [84;118H            [34m#retrieve sensor Id [0m[30m[43mfed_esc[0m[34m_029 to esc_sn029[0m                                                           [85;118H            newEscId = escId[[31m4[0m:[31m8[0m] + [31m"sn"[0m + escId[[31m8[0m:[31m11[0m] +[31m"_Q"[0m                                                       [86;118H            [36mprint[0m(newEscId)                                                                                        [87;118H            escQ.newEscId.put(json_parse)                                                                          [88;118H                                                                                                                   [89;118H                                                                                                                   [90;118H            [36mprint[0m([31m"----------------------- rest_server_hdlr ---------------------[0m[35m\n[0m[31m"[0m)                              [91;118H            [33mif[0m ((bandId == [31m0[0m [33mor[0m bandId == [31m1[0m) [33mand[0m index_counter < [31m6[0m):                                               [92;118H                [36mprint[0m([31m"---> Window Stared <---"[0m)                                                                   [93;118H                [33mif[0m (create_flag == [31m1[0m):                                                                             [94;118H                    [33mfor[0m num [33min[0m [36mxrange[0m([31m1[0m,[31m7[0m):                                                                        [95;118H                        siteId = escId + [31m"_"[0m + [36mstr[0m(num)                                                            [96;118H                        siteID_list.append(siteId)                                                                 [97;118H                        healthDB.createItem(siteId)                                                                [98;118H                    create_flag = [31m0[0m                                                                                [99;118H                [33melse[0m:                                                                                              [100;118H                        [36mprint[0m([31m""[0m)                                                                                  [101;118H                                                                                                                   [102;118H            [33mif[0m(index_counter == [31m6[0m):                                                                                [103;118H                [36mprint[0m([31m"reset counter to zero"[0m)                                                                     [104;118H                index_counter = [31m0[0m                                                                                  [105;118H                                                                                                                   [106;118H            bandInfo = json_parse[[31m'bandInfo'[0m][[31m'timeStampHealthCheck'[0m]                                              [107;118H            sensor = json_parse[[31m'bandInfo'[0m][[31m'sensor'[0m]                                                              [108;118H            adiSettings = json_parse[[31m'bandInfo'[0m][[31m'adiSettings'[0m]                                                    [109;118H            hps = json_parse[[31m'hps'[0m]                                                                                [110;118H            i2c = json_parse[[31m'i2c'[0m]                                                                                [111;118H                                                                                                                   [112;118H        [34m# print("DEBUG -> timeStamp %s" %bandInfo)[0m                                                                 [113;118H        [34m# print("DEBUG -> sensor %s" %sensor)[0m                                                                      [114;118H        [34m# print("DEBUG -> adiSettings %s" %adiSettings)[0m                                                            [59;126H[33mif[0m username == [31m'[0m[30m[43mfed_esc[0m[31m_01'[0m:[60;134HescQ.esc_sn01_Q.put(data)[115;131H[1m[7m[+][83C2,2-9 [0m[116;1H[K[59;126H[34h[?25h[?25l[115;219H[1m[7m3-10[59;127H[34h[?25h[?25l[115;219H4-11[59;128H[34h[?25h[?25l[115;219H5-12[59;129H[34h[?25h[?25l[115;219H6-13[59;130H[34h[?25h[?25l[115;219H7-14[59;131H[34h[?25h[?25l[115;219H8-15[59;132H[34h[?25h[?25l[115;219H9-16[59;133H[34h[?25h[?25l[115;219H10-17[59;134H[34h[?25h[?25l[115;220H1-18[59;135H[34h[?25h[?25l[115;220H2-19[59;136H[34h[?25h[?25l[115;220H3-20[59;137H[34h[?25h[?25l[115;220H4-21[59;138H[34h[?25h[?25l[115;220H5-22[59;139H[34h[?25h[?25l[115;220H6-23[59;140H[34h[?25h[?25l[115;220H7-24[59;141H[34h[?25h[?25l[115;220H8-25[59;142H[34h[?25h[?25l[115;220H9-26[59;143H[34h[?25h[?25l[115;219H20-27[59;144H[34h[?25h[?25l[115;220H1-28[59;145H[34h[?25h[?25l[115;220H2-29[59;146H[34h[?25h[?25l[115;220H3-30[59;147H[34h[?25h[?25l[115;220H4-31[59;148H[34h[?25h[?25l[115;220H5-32[59;149H[34h[?25h[?25l[115;220H6-33[59;150H[34h[?25h[?25l[115;220H7-34[59;151H[34h[?25h[?25l[115;220H8-35[59;152H[34h[?25h[?25l[115;220H9-36[59;153H[34h[?25h[?25l[115;220H8-35[59;152H[34h[?25h[?25l[0m[116;1H[1m-- INSERT --[59;152H[34h[?25h[?25l[0m[31m5'[0m:[115;220H[1m[7m9-36[59;153H[34h[?25h[?25l[0m[60;153H[46m([0mdata[46m)[0m[115;217H[1m[7m3,22[60;153H[34h[?25h[?25l[0m(data)[115;220H[1m[7m1-35[60;152H[34h[?25h[?25l[115;220H0-34[60;151H[34h[?25h[?25l[115;219H19-33[60;150H[34h[?25h[?25l[115;220H8-32[60;149H[34h[?25h[?25l[115;220H7-31[60;148H[34h[?25h[?25l[115;220H6-30[60;147H[34h[?25h[?25l[0m5_Q.put(data)[115;220H[1m[7m7-31[60;148H[34h[?25h[0m[116;1H[K[60;147H[?25l[115;220H[1m[7m6-30[60;147H[34h[?25h[?25l[0m
[117C                                                                                                                   [62;118H                                                                                                                   [63;118H                                                                                                                   [64;118H                                                                                                                   [65;118H[33mdef[0m [36mhandle_response[0m(data):                                                                                         [66;118H    [33mglobal[0m create_flag                                                                                             [67;118H    index_counter = [31m0[0m                                                                                              [68;118H    hb_counter=[31m0[0m                                                                                                   [69;118H[34m# receive the data in small chunks[0m                                                                                 [70;118H    [34m#while True:[0m                                                                                                   [71;118H    [36mprint[0m([31m"(rest_server) Waiting for data..."[0m)                                                                     [72;118H    [34m#data = connection.recv(2048)[0m                                                                                  [73;118H    [33mif[0m data:                                                                                                       [74;118H            json_parse = json.loads(data)                                                                          [75;118H            jsonHdlr = [36mopen[0m([31m"health_data.json"[0m, [31m'w'[0m)                                                               [76;118H            pickle.dump(json_parse, jsonHdlr)                                                                      [77;118H            jsonHdlr.close()                                                                                       [78;118H            [36mprint[0m([31m'Event is set'[0m)                                                                                  [79;118H            [34m#e.set()[0m                                                                                               [80;118H                                                                                                                   [81;118H            [36mprint[0m(json_parse)                                                                                      [82;118H            bandId = json_parse[[31m'bandIndex'[0m]                                                                       [83;118H                                                                                                                   [84;118H            entry = bandId                                                                                         [85;118H            escId = json_parse[[31m'sensorId'[0m]                                                                         [86;118H            [34m#retrieve sensor Id [0m[30m[43mfed_esc[0m[34m_029 to esc_sn029[0m                                                           [87;118H            newEscId = escId[[31m4[0m:[31m8[0m] + [31m"sn"[0m + escId[[31m8[0m:[31m11[0m] +[31m"_Q"[0m                                                       [88;118H            [36mprint[0m(newEscId)                                                                                        [89;118H            escQ.newEscId.put(json_parse)                                                                          [90;118H                                                                                                                   [91;118H                                                                                                                   [92;118H            [36mprint[0m([31m"----------------------- rest_server_hdlr ---------------------[0m[35m\n[0m[31m"[0m)                              [93;118H            [33mif[0m ((bandId == [31m0[0m [33mor[0m bandId == [31m1[0m) [33mand[0m index_counter < [31m6[0m):                                               [94;118H                [36mprint[0m([31m"---> Window Stared <---"[0m)                                                                   [95;118H                [33mif[0m (create_flag == [31m1[0m):                                                                             [96;118H                    [33mfor[0m num [33min[0m [36mxrange[0m([31m1[0m,[31m7[0m):                                                                        [97;118H                        siteId = escId + [31m"_"[0m + [36mstr[0m(num)                                                            [98;118H                        siteID_list.append(siteId)                                                                 [99;118H                        healthDB.createItem(siteId)                                                                [100;118H                    create_flag = [31m0[0m                                                                                [101;118H                [33melse[0m:                                                                                              [102;118H                        [36mprint[0m([31m""[0m)                                                                                  [103;118H                                                                                                                   [104;118H            [33mif[0m(index_counter == [31m6[0m):                                                                                [105;118H                [36mprint[0m([31m"reset counter to zero"[0m)                                                                     [106;118H                index_counter = [31m0[0m                                                                                  [107;118H                                                                                                                   [108;118H            bandInfo = json_parse[[31m'bandInfo'[0m][[31m'timeStampHealthCheck'[0m]                                              [109;118H            sensor = json_parse[[31m'bandInfo'[0m][[31m'sensor'[0m]                                                              [110;118H            adiSettings = json_parse[[31m'bandInfo'[0m][[31m'adiSettings'[0m]                                                    [111;118H            hps = json_parse[[31m'hps'[0m]                                                                                [112;118H            i2c = json_parse[[31m'i2c'[0m]                                                                                [113;118H                                                                                                                   [114;118H        [34m# print("DEBUG -> timeStamp %s" %bandInfo)[0m                                                                 [61;126H[33mif[0m username == [31m'[0m[30m[43mfed_esc[0m[31m_01'[0m:[62;134HescQ.esc_sn01_Q.put(data)[115;217H[1m[7m4,2-9  [61;126H[34h[?25h[?25l[115;219H3-10[61;127H[34h[?25h[?25l[115;219H4-11[61;128H[34h[?25h[?25l[115;219H5-12[61;129H[34h[?25h[?25l[115;219H6-13[61;130H[34h[?25h[?25l[115;219H7-14[61;131H[34h[?25h[?25l[115;219H8-15[61;132H[34h[?25h[?25l[115;219H9-16[61;133H[34h[?25h[?25l[115;219H10-17[61;134H[34h[?25h[?25l[115;220H1-18[61;135H[34h[?25h[?25l[115;220H2-19[61;136H[34h[?25h[?25l[115;220H3-20[61;137H[34h[?25h[?25l[115;220H4-21[61;138H[34h[?25h[?25l[115;220H5-22[61;139H[34h[?25h[?25l[115;220H6-23[61;140H[34h[?25h[?25l[115;220H7-24[61;141H[34h[?25h[?25l[115;220H8-25[61;142H[34h[?25h[?25l[115;220H9-26[61;143H[34h[?25h[?25l[115;219H20-27[61;144H[34h[?25h[?25l[115;220H1-28[61;145H[34h[?25h[?25l[115;220H2-29[61;146H[34h[?25h[?25l[115;220H3-30[61;147H[34h[?25h[?25l[115;220H4-31[61;148H[34h[?25h[?25l[115;220H5-32[61;149H[34h[?25h[?25l[115;220H6-33[61;150H[34h[?25h[?25l[115;220H7-34[61;151H[34h[?25h[?25l[115;220H8-35[61;152H[34h[?25h[?25l[0m[116;1H[1m-- INSERT --[61;152H[34h[?25h[?25l[0m[31m'[0m:[61;153H[K[115;220H[1m[7m7-34[61;151H[34h[?25h[?25l[0m[31m2'[0m:[115;220H[1m[7m8-35[61;152H[34h[?25h[?25l[0m[31m3'[0m:[115;220H[1m[7m9-36[61;153H[34h[?25h[?25l[0m[62;153H[46m([0mdata[46m)[0m[115;217H[1m[7m5,22[62;153H[34h[?25h[?25l[0m(data)[115;220H[1m[7m1-35[62;152H[34h[?25h[?25l[115;220H0-34[62;151H[34h[?25h[?25l[115;219H19-33[62;150H[34h[?25h[?25l[115;220H8-32[62;149H[34h[?25h[?25l[115;220H7-31[62;148H[34h[?25h[?25l[115;220H6-30[62;147H[34h[?25h[?25l[0m_Q.put(data)[62;158H[K[115;220H[1m[7m5-29[62;146H[34h[?25h[?25l[0m2_Q.put(data)[115;220H[1m[7m6-30[62;147H[34h[?25h[?25l[0m3_Q.put(data)[115;220H[1m[7m7-31[62;148H[34h[?25h[0m[116;1H[K[62;147H[?25l[115;220H[1m[7m6-30[62;147H[34h[?25h[?25l[115;217H4,23[61;147H[34h[?25h[?25l[115;217H5,16[62;147H[34h[?25h[?25l[0m
[117C                                                                                                                   [64;118H                                                                                                                   [65;118H                                                                                                                   [66;118H                                                                                                                   [67;118H[33mdef[0m [36mhandle_response[0m(data):                                                                                         [68;118H    [33mglobal[0m create_flag                                                                                             [69;118H    index_counter = [31m0[0m                                                                                              [70;118H    hb_counter=[31m0[0m                                                                                                   [71;118H[34m# receive the data in small chunks[0m                                                                                 [72;118H    [34m#while True:[0m                                                                                                   [73;118H    [36mprint[0m([31m"(rest_server) Waiting for data..."[0m)                                                                     [74;118H    [34m#data = connection.recv(2048)[0m                                                                                  [75;118H    [33mif[0m data:                                                                                                       [76;118H            json_parse = json.loads(data)                                                                          [77;118H            jsonHdlr = [36mopen[0m([31m"health_data.json"[0m, [31m'w'[0m)                                                               [78;118H            pickle.dump(json_parse, jsonHdlr)                                                                      [79;118H            jsonHdlr.close()                                                                                       [80;118H            [36mprint[0m([31m'Event is set'[0m)                                                                                  [81;118H            [34m#e.set()[0m                                                                                               [82;118H                                                                                                                   [83;118H            [36mprint[0m(json_parse)                                                                                      [84;118H            bandId = json_parse[[31m'bandIndex'[0m]                                                                       [85;118H                                                                                                                   [86;118H            entry = bandId                                                                                         [87;118H            escId = json_parse[[31m'sensorId'[0m]                                                                         [88;118H            [34m#retrieve sensor Id [0m[30m[43mfed_esc[0m[34m_029 to esc_sn029[0m                                                           [89;118H            newEscId = escId[[31m4[0m:[31m8[0m] + [31m"sn"[0m + escId[[31m8[0m:[31m11[0m] +[31m"_Q"[0m                                                       [90;118H            [36mprint[0m(newEscId)                                                                                        [91;118H            escQ.newEscId.put(json_parse)                                                                          [92;118H                                                                                                                   [93;118H                                                                                                                   [94;118H            [36mprint[0m([31m"----------------------- rest_server_hdlr ---------------------[0m[35m\n[0m[31m"[0m)                              [95;118H            [33mif[0m ((bandId == [31m0[0m [33mor[0m bandId == [31m1[0m) [33mand[0m index_counter < [31m6[0m):                                               [96;118H                [36mprint[0m([31m"---> Window Stared <---"[0m)                                                                   [97;118H                [33mif[0m (create_flag == [31m1[0m):                                                                             [98;118H                    [33mfor[0m num [33min[0m [36mxrange[0m([31m1[0m,[31m7[0m):                                                                        [99;118H                        siteId = escId + [31m"_"[0m + [36mstr[0m(num)                                                            [100;118H                        siteID_list.append(siteId)                                                                 [101;118H                        healthDB.createItem(siteId)                                                                [102;118H                    create_flag = [31m0[0m                                                                                [103;118H                [33melse[0m:                                                                                              [104;118H                        [36mprint[0m([31m""[0m)                                                                                  [105;118H                                                                                                                   [106;118H            [33mif[0m(index_counter == [31m6[0m):                                                                                [107;118H                [36mprint[0m([31m"reset counter to zero"[0m)                                                                     [108;118H                index_counter = [31m0[0m                                                                                  [109;118H                                                                                                                   [110;118H            bandInfo = json_parse[[31m'bandInfo'[0m][[31m'timeStampHealthCheck'[0m]                                              [111;118H            sensor = json_parse[[31m'bandInfo'[0m][[31m'sensor'[0m]                                                              [112;118H            adiSettings = json_parse[[31m'bandInfo'[0m][[31m'adiSettings'[0m]                                                    [113;118H            hps = json_parse[[31m'hps'[0m]                                                                                [114;118H            i2c = json_parse[[31m'i2c'[0m]                                                                                [63;126H[33mif[0m username == [31m'[0m[30m[43mfed_esc[0m[31m_01'[0m:[64;134HescQ.esc_sn01_Q.put(data)[115;217H[1m[7m6,2-9  [7C0[63;126H[34h[?25h[?25l[115;219H3-10[63;127H[34h[?25h[?25l[115;219H4-11[63;128H[34h[?25h[?25l[115;219H5-12[63;129H[34h[?25h[?25l[115;219H6-13[63;130H[34h[?25h[?25l[115;219H7-14[63;131H[34h[?25h[?25l[115;219H8-15[63;132H[34h[?25h[?25l[115;219H9-16[63;133H[34h[?25h[?25l[115;219H10-17[63;134H[34h[?25h[?25l[115;220H1-18[63;135H[34h[?25h[?25l[115;220H2-19[63;136H[34h[?25h[?25l[115;220H3-20[63;137H[34h[?25h[?25l[115;220H4-21[63;138H[34h[?25h[?25l[115;220H5-22[63;139H[34h[?25h[?25l[115;220H6-23[63;140H[34h[?25h[?25l[115;220H7-24[63;141H[34h[?25h[?25l[115;220H8-25[63;142H[34h[?25h[?25l[115;220H9-26[63;143H[34h[?25h[?25l[115;219H20-27[63;144H[34h[?25h[?25l[115;220H1-28[63;145H[34h[?25h[?25l[115;220H2-29[63;146H[34h[?25h[?25l[115;220H3-30[63;147H[34h[?25h[?25l[115;220H4-31[63;148H[34h[?25h[?25l[115;220H5-32[63;149H[34h[?25h[?25l[115;220H6-33[63;150H[34h[?25h[?25l[115;220H7-34[63;151H[34h[?25h[?25l[115;220H8-35[63;152H[34h[?25h[?25l[0m[116;1H[1m-- INSERT --[63;152H[34h[?25h[?25l[0m[31m'[0m:[63;153H[K[115;220H[1m[7m7-34[63;151H[34h[?25h[?25l[0m[31m2'[0m:[115;220H[1m[7m8-35[63;152H[34h[?25h[?25l[0m[31m6'[0m:[115;220H[1m[7m9-36[63;153H[34h[?25h[0m[116;1H[K[63;152H[?25l[115;220H[1m[7m8-35[63;152H[34h[?25h[?25l[115;217H7,21[64;152H[34h[?25h[?25l[115;220H0-34[64;151H[34h[?25h[?25l[115;219H19-33[64;150H[34h[?25h[?25l[115;220H8-32[64;149H[34h[?25h[?25l[115;220H7-31[64;148H[34h[?25h[?25l[115;220H6-30[64;147H[34h[?25h[?25l[0m[116;1H[1m-- INSERT --[64;147H[34h[?25h[?25l[0m_Q.put(data)[64;158H[K[115;220H[1m[7m5-29[64;146H[34h[?25h[?25l[0m2_Q.put(data)[115;220H[1m[7m6-30[64;147H[34h[?25h[?25l[0m6_Q.put(data)[115;220H[1m[7m7-31[64;148H[34h[?25h[0m[116;1H[K[64;147H[?25l[115;220H[1m[7m6-30[64;147H[34h[?25h[?25l[0m
[117C                                                                                                                   [66;118H                                                                                                                   [67;118H                                                                                                                   [68;118H                                                                                                                   [69;118H[33mdef[0m [36mhandle_response[0m(data):                                                                                         [70;118H    [33mglobal[0m create_flag                                                                                             [71;118H    index_counter = [31m0[0m                                                                                              [72;118H    hb_counter=[31m0[0m                                                                                                   [73;118H[34m# receive the data in small chunks[0m                                                                                 [74;118H    [34m#while True:[0m                                                                                                   [75;118H    [36mprint[0m([31m"(rest_server) Waiting for data..."[0m)                                                                     [76;118H    [34m#data = connection.recv(2048)[0m                                                                                  [77;118H    [33mif[0m data:                                                                                                       [78;118H            json_parse = json.loads(data)                                                                          [79;118H            jsonHdlr = [36mopen[0m([31m"health_data.json"[0m, [31m'w'[0m)                                                               [80;118H            pickle.dump(json_parse, jsonHdlr)                                                                      [81;118H            jsonHdlr.close()                                                                                       [82;118H            [36mprint[0m([31m'Event is set'[0m)                                                                                  [83;118H            [34m#e.set()[0m                                                                                               [84;118H                                                                                                                   [85;118H            [36mprint[0m(json_parse)                                                                                      [86;118H            bandId = json_parse[[31m'bandIndex'[0m]                                                                       [87;118H                                                                                                                   [88;118H            entry = bandId                                                                                         [89;118H            escId = json_parse[[31m'sensorId'[0m]                                                                         [90;118H            [34m#retrieve sensor Id [0m[30m[43mfed_esc[0m[34m_029 to esc_sn029[0m                                                           [91;118H            newEscId = escId[[31m4[0m:[31m8[0m] + [31m"sn"[0m + escId[[31m8[0m:[31m11[0m] +[31m"_Q"[0m                                                       [92;118H            [36mprint[0m(newEscId)                                                                                        [93;118H            escQ.newEscId.put(json_parse)                                                                          [94;118H                                                                                                                   [95;118H                                                                                                                   [96;118H            [36mprint[0m([31m"----------------------- rest_server_hdlr ---------------------[0m[35m\n[0m[31m"[0m)                              [97;118H            [33mif[0m ((bandId == [31m0[0m [33mor[0m bandId == [31m1[0m) [33mand[0m index_counter < [31m6[0m):                                               [98;118H                [36mprint[0m([31m"---> Window Stared <---"[0m)                                                                   [99;118H                [33mif[0m (create_flag == [31m1[0m):                                                                             [100;118H                    [33mfor[0m num [33min[0m [36mxrange[0m([31m1[0m,[31m7[0m):                                                                        [101;118H                        siteId = escId + [31m"_"[0m + [36mstr[0m(num)                                                            [102;118H                        siteID_list.append(siteId)                                                                 [103;118H                        healthDB.createItem(siteId)                                                                [104;118H                    create_flag = [31m0[0m                                                                                [105;118H                [33melse[0m:                                                                                              [106;118H                        [36mprint[0m([31m""[0m)                                                                                  [107;118H                                                                                                                   [108;118H            [33mif[0m(index_counter == [31m6[0m):                                                                                [109;118H                [36mprint[0m([31m"reset counter to zero"[0m)                                                                     [110;118H                index_counter = [31m0[0m                                                                                  [111;118H                                                                                                                   [112;118H            bandInfo = json_parse[[31m'bandInfo'[0m][[31m'timeStampHealthCheck'[0m]                                              [113;118H            sensor = json_parse[[31m'bandInfo'[0m][[31m'sensor'[0m]                                                              [114;118H            adiSettings = json_parse[[31m'bandInfo'[0m][[31m'adiSettings'[0m]                                                    [65;126H[33mif[0m username == [31m'[0m[30m[43mfed_esc[0m[31m_01'[0m:[66;134HescQ.esc_sn01_Q.put(data)[115;217H[1m[7m8,2-9  [65;126H[34h[?25h[?25l[115;219H3-10[65;127H[34h[?25h[?25l[115;219H4-11[65;128H[34h[?25h[?25l[115;219H5-12[65;129H[34h[?25h[?25l[115;219H6-13[65;130H[34h[?25h[?25l[115;219H7-14[65;131H[34h[?25h[?25l[115;219H8-15[65;132H[34h[?25h[?25l[115;219H9-16[65;133H[34h[?25h[?25l[115;219H10-17[65;134H[34h[?25h[?25l[115;220H1-18[65;135H[34h[?25h[?25l[115;220H2-19[65;136H[34h[?25h[?25l[115;220H3-20[65;137H[34h[?25h[?25l[115;220H4-21[65;138H[34h[?25h[?25l[115;220H5-22[65;139H[34h[?25h[?25l[115;220H6-23[65;140H[34h[?25h[?25l[115;220H7-24[65;141H[34h[?25h[?25l[115;220H8-25[65;142H[34h[?25h[?25l[115;220H9-26[65;143H[34h[?25h[?25l[115;219H20-27[65;144H[34h[?25h[?25l[115;220H1-28[65;145H[34h[?25h[?25l[115;220H2-29[65;146H[34h[?25h[?25l[115;220H3-30[65;147H[34h[?25h[?25l[115;220H4-31[65;148H[34h[?25h[?25l[115;220H5-32[65;149H[34h[?25h[?25l[115;220H6-33[65;150H[34h[?25h[?25l[115;220H7-34[65;151H[34h[?25h[?25l[115;220H8-35[65;152H[34h[?25h[?25l[0m[116;1H[1m-- INSERT --[65;152H[34h[?25h[?25l[0m[31m'[0m:[65;153H[K[115;220H[1m[7m7-34[65;151H[34h[?25h[?25l[0m[31m2'[0m:[115;220H[1m[7m8-35[65;152H[34h[?25h[?25l[0m[31m9'[0m:[115;220H[1m[7m9-36[65;153H[34h[?25h[0m[116;1H[K[65;152H[?25l[115;220H[1m[7m8-35[65;152H[34h[?25h[?25l[115;217H9,21[66;152H[34h[?25h[?25l[115;220H0-34[66;151H[34h[?25h[?25l[115;219H19-33[66;150H[34h[?25h[?25l[115;220H8-32[66;149H[34h[?25h[?25l[115;220H7-31[66;148H[34h[?25h[?25l[115;220H6-30[66;147H[34h[?25h[?25l[0m[116;1H[1m-- INSERT --[66;147H[34h[?25h[?25l[0m_Q.put(data)[66;158H[K[115;220H[1m[7m5-29[66;146H[34h[?25h[?25l[0m2_Q.put(data)[115;220H[1m[7m6-30[66;147H[34h[?25h[?25l[0m9_Q.put(data)[115;220H[1m[7m7-31[66;148H[34h[?25h[0m[116;1H[K[66;147H[?25l[115;220H[1m[7m6-30[66;147H[34h[?25h[?25l[0m
[117C                                                                                                                   [68;118H                                                                                                                   [69;118H                                                                                                                   [70;118H                                                                                                                   [71;118H[33mdef[0m [36mhandle_response[0m(data):                                                                                         [72;118H    [33mglobal[0m create_flag                                                                                             [73;118H    index_counter = [31m0[0m                                                                                              [74;118H    hb_counter=[31m0[0m                                                                                                   [75;118H[34m# receive the data in small chunks[0m                                                                                 [76;118H    [34m#while True:[0m                                                                                                   [77;118H    [36mprint[0m([31m"(rest_server) Waiting for data..."[0m)                                                                     [78;118H    [34m#data = connection.recv(2048)[0m                                                                                  [79;118H    [33mif[0m data:                                                                                                       [80;118H            json_parse = json.loads(data)                                                                          [81;118H            jsonHdlr = [36mopen[0m([31m"health_data.json"[0m, [31m'w'[0m)                                                               [82;118H            pickle.dump(json_parse, jsonHdlr)                                                                      [83;118H            jsonHdlr.close()                                                                                       [84;118H            [36mprint[0m([31m'Event is set'[0m)                                                                                  [85;118H            [34m#e.set()[0m                                                                                               [86;118H                                                                                                                   [87;118H            [36mprint[0m(json_parse)                                                                                      [88;118H            bandId = json_parse[[31m'bandIndex'[0m]                                                                       [89;118H                                                                                                                   [90;118H            entry = bandId                                                                                         [91;118H            escId = json_parse[[31m'sensorId'[0m]                                                                         [92;118H            [34m#retrieve sensor Id [0m[30m[43mfed_esc[0m[34m_029 to esc_sn029[0m                                                           [93;118H            newEscId = escId[[31m4[0m:[31m8[0m] + [31m"sn"[0m + escId[[31m8[0m:[31m11[0m] +[31m"_Q"[0m                                                       [94;118H            [36mprint[0m(newEscId)                                                                                        [95;118H            escQ.newEscId.put(json_parse)                                                                          [96;118H                                                                                                                   [97;118H                                                                                                                   [98;118H            [36mprint[0m([31m"----------------------- rest_server_hdlr ---------------------[0m[35m\n[0m[31m"[0m)                              [99;118H            [33mif[0m ((bandId == [31m0[0m [33mor[0m bandId == [31m1[0m) [33mand[0m index_counter < [31m6[0m):                                               [100;118H                [36mprint[0m([31m"---> Window Stared <---"[0m)                                                                   [101;118H                [33mif[0m (create_flag == [31m1[0m):                                                                             [102;118H                    [33mfor[0m num [33min[0m [36mxrange[0m([31m1[0m,[31m7[0m):                                                                        [103;118H                        siteId = escId + [31m"_"[0m + [36mstr[0m(num)                                                            [104;118H                        siteID_list.append(siteId)                                                                 [105;118H                        healthDB.createItem(siteId)                                                                [106;118H                    create_flag = [31m0[0m                                                                                [107;118H                [33melse[0m:                                                                                              [108;118H                        [36mprint[0m([31m""[0m)                                                                                  [109;118H                                                                                                                   [110;118H            [33mif[0m(index_counter == [31m6[0m):                                                                                [111;118H                [36mprint[0m([31m"reset counter to zero"[0m)                                                                     [112;118H                index_counter = [31m0[0m                                                                                  [113;118H                                                                                                                   [114;118H            bandInfo = json_parse[[31m'bandInfo'[0m][[31m'timeStampHealthCheck'[0m]                                              [67;126H[33mif[0m username == [31m'[0m[30m[43mfed_esc[0m[31m_01'[0m:[68;134HescQ.esc_sn01_Q.put(data)[115;216H[1m[7m20,2-9  [67;126H[34h[?25h[?25l[115;219H3-10[67;127H[34h[?25h[?25l[115;219H4-11[67;128H[34h[?25h[?25l[115;219H5-12[67;129H[34h[?25h[?25l[115;219H6-13[67;130H[34h[?25h[?25l[115;219H7-14[67;131H[34h[?25h[?25l[115;219H8-15[67;132H[34h[?25h[?25l[115;219H9-16[67;133H[34h[?25h[?25l[115;219H10-17[67;134H[34h[?25h[?25l[115;220H1-18[67;135H[34h[?25h[?25l[115;220H2-19[67;136H[34h[?25h[?25l[115;220H3-20[67;137H[34h[?25h[?25l[115;220H4-21[67;138H[34h[?25h[?25l[115;220H5-22[67;139H[34h[?25h[?25l[115;220H6-23[67;140H[34h[?25h[?25l[115;220H7-24[67;141H[34h[?25h[?25l[115;220H8-25[67;142H[34h[?25h[?25l[115;220H9-26[67;143H[34h[?25h[?25l[115;219H20-27[67;144H[34h[?25h[?25l[115;220H1-28[67;145H[34h[?25h[?25l[115;220H2-29[67;146H[34h[?25h[?25l[115;220H3-30[67;147H[34h[?25h[?25l[115;220H4-31[67;148H[34h[?25h[?25l[115;220H5-32[67;149H[34h[?25h[?25l[115;220H6-33[67;150H[34h[?25h[?25l[115;220H7-34[67;151H[34h[?25h[?25l[0m[31m8[34h[?25h[?25l[0m[115;217H[1m[7m1,20[68;151H[34h[?25h[?25l[115;217H2,0-1  [69;118H[34h[?25h[?25l[115;217H1,20-34[68;151H[34h[?25h[?25l[0mut[46m([0mdata[46m)[0m[115;220H[1m[7m2-36[68;153H[34h[?25h[?25l[0m(data)[115;220H[1m[7m1-35[68;152H[34h[?25h[?25l[115;220H0-34[68;151H[34h[?25h[?25l[115;219H19-33[68;150H[34h[?25h[?25l[115;220H8-32[68;149H[34h[?25h[?25l[115;220H7-31[68;148H[34h[?25h[?25l[115;220H6-30[68;147H[34h[?25h[?25l[115;220H5-29[68;146H[34h[?25h[?25l[115;220H4-28[68;145H[34h[?25h[?25l[115;220H3-27[68;144H[34h[?25h[?25l[115;220H2-26[68;143H[34h[?25h[?25l[115;220H1-25[68;142H[34h[?25h[?25l[115;220H0-24[68;141H[34h[?25h[?25l[115;220H1-25[68;142H[34h[?25h[?25l[115;220H2-26[68;143H[34h[?25h[?25l[115;220H3-27[68;144H[34h[?25h[?25l[115;220H4-28[68;145H[34h[?25h[?25l[115;220H5-29[68;146H[34h[?25h[?25l[0m8[34h[?25h[?25l
[117C                                                                                                                   [70;118H                                                                                                                   [71;118H                                                                                                                   [72;118H                                                                                                                   [73;118H[33mdef[0m [36mhandle_response[0m(data):                                                                                         [74;118H    [33mglobal[0m create_flag                                                                                             [75;118H    index_counter = [31m0[0m                                                                                              [76;118H    hb_counter=[31m0[0m                                                                                                   [77;118H[34m# receive the data in small chunks[0m                                                                                 [78;118H    [34m#while True:[0m                                                                                                   [79;118H    [36mprint[0m([31m"(rest_server) Waiting for data..."[0m)                                                                     [80;118H    [34m#data = connection.recv(2048)[0m                                                                                  [81;118H    [33mif[0m data:                                                                                                       [82;118H            json_parse = json.loads(data)                                                                          [83;118H            jsonHdlr = [36mopen[0m([31m"health_data.json"[0m, [31m'w'[0m)                                                               [84;118H            pickle.dump(json_parse, jsonHdlr)                                                                      [85;118H            jsonHdlr.close()                                                                                       [86;118H            [36mprint[0m([31m'Event is set'[0m)                                                                                  [87;118H            [34m#e.set()[0m                                                                                               [88;118H                                                                                                                   [89;118H            [36mprint[0m(json_parse)                                                                                      [90;118H            bandId = json_parse[[31m'bandIndex'[0m]                                                                       [91;118H                                                                                                                   [92;118H            entry = bandId                                                                                         [93;118H            escId = json_parse[[31m'sensorId'[0m]                                                                         [94;118H            [34m#retrieve sensor Id [0m[30m[43mfed_esc[0m[34m_029 to esc_sn029[0m                                                           [95;118H            newEscId = escId[[31m4[0m:[31m8[0m] + [31m"sn"[0m + escId[[31m8[0m:[31m11[0m] +[31m"_Q"[0m                                                       [96;118H            [36mprint[0m(newEscId)                                                                                        [97;118H            escQ.newEscId.put(json_parse)                                                                          [98;118H                                                                                                                   [99;118H                                                                                                                   [100;118H            [36mprint[0m([31m"----------------------- rest_server_hdlr ---------------------[0m[35m\n[0m[31m"[0m)                              [101;118H            [33mif[0m ((bandId == [31m0[0m [33mor[0m bandId == [31m1[0m) [33mand[0m index_counter < [31m6[0m):                                               [102;118H                [36mprint[0m([31m"---> Window Stared <---"[0m)                                                                   [103;118H                [33mif[0m (create_flag == [31m1[0m):                                                                             [104;118H                    [33mfor[0m num [33min[0m [36mxrange[0m([31m1[0m,[31m7[0m):                                                                        [105;118H                        siteId = escId + [31m"_"[0m + [36mstr[0m(num)                                                            [106;118H                        siteID_list.append(siteId)                                                                 [107;118H                        healthDB.createItem(siteId)                                                                [108;118H                    create_flag = [31m0[0m                                                                                [109;118H                [33melse[0m:                                                                                              [110;118H                        [36mprint[0m([31m""[0m)                                                                                  [111;118H                                                                                                                   [112;118H            [33mif[0m(index_counter == [31m6[0m):                                                                                [113;118H                [36mprint[0m([31m"reset counter to zero"[0m)                                                                     [114;118H                index_counter = [31m0[0m                                                                                  [69;126H[33mif[0m username == [31m'[0m[30m[43mfed_esc[0m[31m_01'[0m:[70;134HescQ.esc_sn01_Q.put(data)[115;217H[1m[7m2,2-9        29[69;126H[34h[?25h[?25l[115;219H3-10[69;127H[34h[?25h[?25l[115;219H4-11[69;128H[34h[?25h[?25l[115;219H5-12[69;129H[34h[?25h[?25l[115;219H6-13[69;130H[34h[?25h[?25l[115;219H7-14[69;131H[34h[?25h[?25l[115;219H8-15[69;132H[34h[?25h[?25l[115;219H9-16[69;133H[34h[?25h[?25l[115;219H10-17[69;134H[34h[?25h[?25l[115;220H1-18[69;135H[34h[?25h[?25l[115;220H2-19[69;136H[34h[?25h[?25l[115;220H3-20[69;137H[34h[?25h[?25l[115;220H4-21[69;138H[34h[?25h[?25l[115;220H5-22[69;139H[34h[?25h[?25l[115;220H6-23[69;140H[34h[?25h[?25l[115;220H7-24[69;141H[34h[?25h[?25l[115;220H8-25[69;142H[34h[?25h[?25l[115;220H9-26[69;143H[34h[?25h[?25l[115;219H20-27[69;144H[34h[?25h[?25l[115;220H1-28[69;145H[34h[?25h[?25l[115;220H2-29[69;146H[34h[?25h[?25l[115;220H3-30[69;147H[34h[?25h[?25l[115;220H4-31[69;148H[34h[?25h[?25l[115;220H5-32[69;149H[34h[?25h[?25l[115;220H6-33[69;150H[34h[?25h[?25l[115;220H7-34[69;151H[34h[?25h[?25l[115;220H8-35[69;152H[34h[?25h[?25l[0m[116;1H[1m-- INSERT --[69;152H[34h[?25h[?25l[0m[31m4'[0m:[115;220H[1m[7m9-36[69;153H[34h[?25h[0m[116;1H[K[?25l[115;220H[1m[7m8-35[69;152H[34h[?25h[?25l[115;217H3,21[70;152H[34h[?25h[?25l[115;220H0-34[70;151H[34h[?25h[?25l[115;219H19-33[70;150H[34h[?25h[?25l[115;220H8-32[70;149H[34h[?25h[?25l[115;220H7-31[70;148H[34h[?25h[?25l[115;220H6-30[70;147H[34h[?25h[?25l[0m[116;1H[1m-- INSERT --[70;147H[34h[?25h[?25l[0m4_Q.put(data)[115;220H[1m[7m7-31[70;148H[34h[?25h[0m[116;1H[K[?25l[115;220H[1m[7m6-30[70;147H[34h[?25h[?25l[116;1H[0m:[34h[?25hw[?25l[34h[?25h[?25l"snmp_stat.py" 294L, 10535C written[115;131H[1m[7m   [70;147H[34h[?25h[?25l[115;217H2,23[69;147H[34h[?25h[?25l[115;217H1,16[68;147H[34h[?25h[?25l[115;217H0,23[67;147H[34h[?25h[?25l[115;216H19,16[66;147H[34h[?25h[?25l[115;217H8,23[65;147H[34h[?25h[?25l[115;217H7,16[64;147H[34h[?25h[?25l[115;217H6,23[63;147H[34h[?25h[?25l[115;217H5,16[62;147H[34h[?25h[?25l[115;217H4,23[61;147H[34h[?25h[?25l[115;217H3,16[60;147H[34h[?25h[?25l[0m[116;1H[K[116;1H:[34h[?25hw[?25l[34h[?25h[?25l"snmp_stat.py" 294L, 10535C written[60;147H[34h[?25h[115;1H[1m[7mesc_queue.py                                                                                      [?25l23,3-17        Top [0m[7msnmp_stat.py                                                                                     113,16-30      29%[23;17H[34h[?25h[?25l[0m[115;100H[1m[7m2,10-17[22;17H[34h[?25h[?25l[115;100H1,3-17 [21;17H[34h[?25h[?25l[115;100H0[20;17H[34h[?25h[?25l[0m[116;1H[K[116;1H:[34h[?25hw[?25l[34h[?25hq[?25l[34h[?25h[?25l"esc_queue.py" 182L, 5070C written[1;2H[34m Check for errors and print out results[0m[1;117H[K[2;5H[33mif[0m errorIndication:[2;117H[K[3;1H            [36mprint[0m(errorIndication)[3;117H[K[4;1H    [33melse[0m:[4;10H[K[5;9H[33mif[0m errorStatus:[5;117H[K[6;1H            [36mprint[0m([31m'%s at %s'[0m % (errorStatus.prettyPrint(),[6;117H[K[7;1H                  errorIndex [33mand[0m varBinds[[36mint[0m(errorIndex) - [31m1[0m] [33mor[0m [31m'?'[0m))[7;117H[K[8;1H        [33melse[0m:[8;15H[K[9;1H            [33mfor[0m name, val [33min[0m varBinds:[9;117H[K[10;1H                [36mprint[0m([31m'%s = %s'[0m % (name.prettyPrint(), val.prettyPrint()))[10;117H[K[11;1H[K[12;1H[K[13;1H[34m# unsigned handler[0m[13;117H[K[14;1H[33mdef[0m [36msetDB_unsigned[0m(entry, value):[14;117H[K[15;5HerrorIndication, errorStatus, errorIndex, varBinds = cmdGen.setCmd([15;117H[K[16;9Hcmdgen.CommunityData([31m'federated'[0m),[16;117H[K[17;1H        cmdgen.UdpTransportTarget(([31m'34.215.95.184'[0m, [31m161[0m)),[17;117H[K[18;9H(entry, rfc1902.Counter64(value)),[18;117H[K[19;9H)[19;17H[K[20;1H[34m# Check for errors and print out results[0m[20;41H[K[21;5H[33mif[0m errorIndication:[21;24H[K[22;9H    [36mprint[0m(errorIndication)[22;35H[K[23;5H[33melse[0m:[23;17H[K[24;9H[33mif[0m errorStatus:[24;24H[K[25;13H[36mprint[0m([31m'%s at %s'[0m % (errorStatus.prettyPrint(),[25;117H[K[26;9H          errorIndex [33mand[0m varBinds[[36mint[0m(errorIndex) - [31m1[0m] [33mor[0m [31m'?'[0m))[26;117H[K[27;9H[33melse[0m:[27;17H[K[28;13H[33mfor[0m name, val [33min[0m varBinds:[28;40H[K[29;17H[36mprint[0m([31m'%s = %s'[0m % (name.prettyPrint(), val.prettyPrint()))[29;117H[K[30;9H[K[31;17H[K[32;17H[K[33;1H[34m# snmpset -v2c -c federated 34.215.95.184 1.3.6.1.4.1.8072.2.7.1.1.4.1.2.1 s "FL033C"[0m[33;117H[K[34;1H[34m# esIndex         escID channelId detectionFlag timeStampSensorResults maxRssiDbm minRssiDbm maxSnrDb minSnrDb numDetections numAttempts numDetectionsTimeWindow numAttemptsTimeWindow probDetection probDetectionTimeWindow[0m
stats = [31m"1.3.6.1.4.1.8072.2.7.1.1.3.1."[0m[35;40H[K[36;17H[K[37;17H[K[38;1H[34m#atexit.register(cleanup)[0m[38;26H[K[39;17H[K[40;17H[K[41;1H[31m""" Function: Thread_2 handle csv file ahndler requests """[0m[41;117H[K[42;1H[33mdef[0m [36mcsv_client_hdlr[0m(connection,e,t):[42;117H[K[43;5H[33mwhile[0m [36mTrue[0m:[43;17H[K[44;9H[33mwhile[0m [33mnot[0m e.isSet():[44;29H[K[45;13H[36mprint[0m([31m'wait for event timeout'[0m)[45;117H[K[46;13Hevent_is_set = e.wait()[46;117H[K[47;1H            [33mif[0m event_is_set:[47;29H[K[48;1H                [36mprint[0m([31m"Sync sent to CSV app"[0m)[48;117H[K[49;9H        data=connection.send([31m"Sync"[0m)[49;117H[K[50;9H    [33melse[0m:[50;117H[K[51;9H        [36mprint[0m([31m'do nothing'[0m)[51;117H[K[52;9Htime.sleep([31m2[0m)[52;117H[K[53;25H[K[54;25H[K[55;1H[31m""" Function: Thread_1 handle rest server requests """[0m[55;117H[K[56;17H[K[57;1H[33mdef[0m [36mput_data_into_queue[0m(username,data):[57;40H[K[58;9H[33mif[0m username == [31m'[0m[30m[43mfed_esc[0m[31m_01'[0m:[58;37H[K[59;17HescQ.esc_sn01_Q.put(data)[59;117H[K[60;9H[33mif[0m username == [31m'[0m[30m[43mfed_esc[0m[31m_015'[0m:[60;38H[K[61;17HescQ.esc_sn015_Q.put(data)[61;43H[K[62;9H[33mif[0m username == [31m'[0m[30m[43mfed_esc[0m[31m_023'[0m:[62;38H[K[63;17HescQ.esc_sn023_Q.put(data)[63;117H[K[64;9H[33mif[0m username == [31m'[0m[30m[43mfed_esc[0m[31m_026'[0m:[64;38H[K[65;17HescQ.esc_sn026_Q.put(data)[65;117H[K[66;9H[33mif[0m username == [31m'[0m[30m[43mfed_esc[0m[31m_029'[0m:[66;117H[K[67;1H                escQ.esc_sn029_Q.put(data)[67;43H[K[68;1H        [33mif[0m username == [31m'[0m[30m[43mfed_esc[0m[31m_08'[0m:[68;117H[K[69;9H        escQ.esc_sn08_Q.put(data)[69;117H[K[70;9H[33mif[0m username == [31m'[0m[30m[43mfed_esc[0m[31m_014'[0m:[70;117H[K[71;9H        escQ.esc_sn014_Q.put(data)[71;117H[K[72;17H[K[73;25H[K[74;1H[33mdef[0m [36mhandle_response[0m(data):[74;28H[K[75;5H[33mglobal[0m create_flag[75;29H[K[76;5Hindex_counter = [31m0[0m[76;22H[K[77;5Hhb_counter=[31m0[0m[77;25H[K[78;1H[34m# receive the data in small chunks[0m[78;35H[K[79;5H[34m#while True:[0m[79;25H[K[80;5H[36mprint[0m([31m"(rest_server) Waiting for data..."[0m)[80;117H[K[81;5H[34m#data = connection.recv(2048)[0m[81;34H[K[82;5H[33mif[0m data:[82;33H[K[83;13Hjson_parse = json.loads(data)[83;117H[K[84;13HjsonHdlr = [36mopen[0m([31m"health_data.json"[0m, [31m'w'[0m)[84;117H[K[85;13Hpickle.dump(json_parse, jsonHdlr)[85;117H[K[86;1H            jsonHdlr.close()[86;29H[K[87;1H            [36mprin[0m[1C([31m'Event is set'[0m)[87;117H[K[88;9H    [34m#e.set()[0m[88;21H[K[89;9H[K[90;9H    [36mprint[0m(json_parse)[90;117H[K[91;13HbandId = json_parse[[31m'bandIndex'[0m][91;117H[K[92;25H[K[93;13Hentry = bandId[93;28H[K[94;13HescId = json_parse[[31m'sensorId'[0m] [94;44H[K[95;13H[34m#retrieve sensor Id [0m[30m[43mfed_esc[0m[34m_029 to esc_sn029[0m[95;117H[K[96;13HnewEscId = escId[[31m4[0m:[31m8[0m] + [31m"sn"[0m + escId[[31m8[0m:[31m11[0m] +[31m"_Q"[0m[96;117H[K[97;13H[36mprint[0m(newEscId)[97;28H[K[98;13HescQ.newEscId.put(json_parse)[98;117H[K[99;33H[K[100;33H[K[101;13H[36mprint[0m([31m"----------------------- rest_server_hdlr ---------------------[0m[35m\n[0m[31m"[0m)[101;117H[K[102;13H[33mif[0m ((bandId == [31m0[0m [33mor[0m bandId == [31m1[0m) [33mand[0m index_counter < [31m6[0m):[102;117H[K[103;17H[36mprint[0m([31m"---> Window Stared <---"[0m)[103;117H[K[104;17H[33mif[0m (create_flag == [31m1[0m):[104;39H[K[105;1H                    [33mfor[0m num [33min[0m [36mxrange[0m([31m1[0m,[31m7[0m):[105;44H[K[106;1H                        siteId = escId + [31m"_"[0m + [36mstr[0m(num)[106;117H[K[107;9H                siteID_list.append(siteId)[107;117H[K[108;9H         [7ChealthDB.createItem(siteId)[108;117H[K[109;9H            create_flag = [31m0[0m[109;117H[K[110;17H[33melse[0m:[110;117H[K[111;25H[36mprint[0m([31m""[0m)[111;34H[K[112;25H[K[113;13H[33mif[0m(index_counter == [31m6[0m):[113;36H[K[114;17H[36mprint[0m([31m"reset counter to zero"[0m)[114;117H[K[115;1H                index_counter = [31m0[0m[115;34H[K[116;215H113,16-30     29%[116;215H[K[116;215H113,16-30     29%[61;30H[34h[?25h[?25l[116;1H[K[116;1H:[34h[?25hw[?25l[34h[?25hq[?25l[34h[?25h[?25l"snmp_stat.py" 294L, 10535C written
[?1l>[34h[?25h[?1049l(23:16 root@ip-10-1-1-199 monitoring-system) > 
(23:16 root@ip-10-1-1-199 monitoring-system) > 
(23:16 root@ip-10-1-1-199 monitoring-system) > ./[K[Kvim snmp_stat.py
[?1049h[?1h=[1;116r[34l[34h[?25h[23m[24m[0m[H[J[?25l[116;1H"snmp_stat.py" 294L, 10535C[1;1H[34m#!/usr/bin/python[0m

[35mimport[0m socket
[35mimport[0m sys
[35mimport[0m simplejson [33mas[0m json
[35mimport[0m trap_v2c [33mas[0m snmpA
[35mimport[0m unicodedata
[35mimport[0m dynamodblib
[35mimport[0m boto3
[35mimport[0m atexit
[35mimport[0m pickle
[35mimport[0m threading
[35mimport[0m time
[35mimport[0m logging

[35mfrom[0m pysnmp.entity.rfc3413.oneliner [35mimport[0m cmdgen
[35mfrom[0m pysnmp.proto [35mimport[0m rfc1902
[35mimport[0m esc_queue [33mas[0m escQ

dyanmodb = dynamodblib.DynamoDB()
healthDB = dynamodblib.sensorHealthDB()
siteID_list=[]
create_flag=[31m1[0m

cmdGen = cmdgen.CommandGenerator()

[34m#logging.basicConfig(level=logging.DEBUG, format='(%(threadName)-9s) %(message)s',)[0m

[33mdef[0m [36msetDB_str[0m(entry, value):
    errorIndication, errorStatus, errorIndex, varBinds = cmdGen.setCmd([31;9Hcmdgen.CommunityData([31m'federated'[0m),[32;9Hcmdgen.UdpTransportTarget(([31m'34.215.95.184'[0m, [31m161[0m)),[33;9H(entry, rfc1902.OctetString(value)),[34;9H)
[34m# Check for errors and print out results[0m
    [33mif[0m errorIndication:[37;13H[36mprint[0m(errorIndication)
    [33melse[0m:[39;9H[33mif[0m errorStatus:[40;13H[36mprint[0m([31m'%s at %s'[0m % (errorStatus.prettyPrint(),[41;19HerrorIndex [33mand[0m varBinds[[36mint[0m(errorIndex) - [31m1[0m] [33mor[0m [31m'?'[0m))[42;9H[33melse[0m:[43;13H[33mfor[0m name, val [33min[0m varBinds:[44;17H[36mprint[0m([31m'%s = %s'[0m % (name.prettyPrint(), val.prettyPrint()))


[33mdef[0m [36msetDB_int[0m(entry, value):
    errorIndication, errorStatus, errorIndex, varBinds = cmdGen.setCmd([49;9Hcmdgen.CommunityData([31m'federated'[0m),[50;9Hcmdgen.UdpTransportTarget(([31m'34.215.95.184'[0m, [31m161[0m)),[51;9H(entry, rfc1902.Integer(value)),[52;9H)
[34m# Check for errors and print out results[0m
    [33mif[0m errorIndication:[55;13H[36mprint[0m(errorIndication)
    [33melse[0m:[57;9H[33mif[0m errorStatus:[58;13H[36mprint[0m([31m'%s at %s'[0m % (errorStatus.prettyPrint(),[59;19HerrorIndex [33mand[0m varBinds[[36mint[0m(errorIndex) - [31m1[0m] [33mor[0m [31m'?'[0m))[60;9H[33melse[0m:[61;13H[33mfor[0m name, val [33min[0m varBinds:[62;17H[36mprint[0m([31m'%s = %s'[0m % (name.prettyPrint(), val.prettyPrint()))


[34m# unsigned handler[0m
[33mdef[0m [36msetDB_unsigned[0m(entry, value):
    errorIndication, errorStatus, errorIndex, varBinds = cmdGen.setCmd([68;9Hcmdgen.CommunityData([31m'federated'[0m),[69;9Hcmdgen.UdpTransportTarget(([31m'34.215.95.184'[0m, [31m161[0m)),[70;9H(entry, rfc1902.Counter64(value)),[71;9H)
[34m# Check for errors and print out results[0m
    [33mif[0m errorIndication:[74;13H[36mprint[0m(errorIndication)
    [33melse[0m:[76;9H[33mif[0m errorStatus:[77;13H[36mprint[0m([31m'%s at %s'[0m % (errorStatus.prettyPrint(),[78;19HerrorIndex [33mand[0m varBinds[[36mint[0m(errorIndex) - [31m1[0m] [33mor[0m [31m'?'[0m))[79;9H[33melse[0m:[80;13H[33mfor[0m name, val [33min[0m varBinds:[81;17H[36mprint[0m([31m'%s = %s'[0m % (name.prettyPrint(), val.prettyPrint()))[85;1H[34m# snmpset -v2c -c federated 34.215.95.184 1.3.6.1.4.1.8072.2.7.1.1.4.1.2.1 s "FL033C"
# esIndex         escID channelId detectionFlag timeStampSensorResults maxRssiDbm minRssiDbm maxSnrDb minSnrDb numDetections numAttempts numDetectionsTimeWindow numAttemptsTimeWindow probDetection probDetectionTimeWindow[0m
stats = [31m"1.3.6.1.4.1.8072.2.7.1.1.3.1."[0m


[34m#atexit.register(cleanup)[0m


[31m""" Function: Thread_2 handle csv file ahndler requests """[0m
[33mdef[0m [36mcsv_client_hdlr[0m(connection,e,t):
    [33mwhile[0m [36mTrue[0m:[96;9H[33mwhile[0m [33mnot[0m e.isSet():[97;13H[36mprint[0m([31m'wait for event timeout'[0m)[98;13Hevent_is_set = e.wait()[99;13H[33mif[0m event_is_set:[100;17H[36mprint[0m([31m"Sync sent to CSV app"[0m)[101;17Hdata=connection.send([31m"Sync"[0m)[102;13H[33melse[0m:[103;17H[36mprint[0m([31m'do nothing'[0m)[104;9Htime.sleep([31m2[0m)


[31m""" Function: Thread_1 handle rest server requests """[0m

[33mdef[0m [36mput_data_into_queue[0m(username,data):[110;9H[33mif[0m username == [31m'[0m[30m[43mfed_esc[0m[31m_01'[0m:[111;17HescQ.esc_sn01_Q.put(data)[112;9H[33mif[0m username == [31m'[0m[30m[43mfed_esc[0m[31m_015'[0m:[113;17HescQ.esc_sn015_Q.put(data)[114;9H[33mif[0m username == [31m'[0m[30m[43mfed_esc[0m[31m_023'[0m:[115;17HescQ.esc_sn023_Q.put(data)[116;215H113,3-17      Top[113;17H[34h[?25h[?25l


/fed_esc[116;9H[K[116;1H[214C114,18-25     Top[114;25H[34h[?25h[?25l[116;217H3,11[113;25H[34h[?25h[?25l[116;217H2,18[112;25H[34h[?25h[?25l[116;217H1,11[111;25H[34h[?25h[?25l[116;217H2,18[112;25H[34h[?25h[?25l[116;217H3,11[113;25H[34h[?25h[?25l[116;217H4,18[114;25H[34h[?25h[?25l[116;217H5,11[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;9H[33mif[0m username == [31m'[0m[30m[43mfed_esc[0m[31m_026'[0m:[116;1H[K[116;215H116,18-25      0%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;17HescQ.esc_sn026_Q.put(data)[116;215H[K[116;215H117,11-25      1%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;9H[33mif[0m username == [31m'[0m[30m[43mfed_esc[0m[31m_029'[0m:[116;215H[K[116;215H118,18-25      1%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;17HescQ.esc_sn029_Q.put(data)[116;215H[K[116;215H119,11-25      2%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;9H[33mif[0m username == [31m'[0m[30m[43mfed_esc[0m[31m_08'[0m:[116;215H[K[116;215H120,18-25      2%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;17HescQ.esc_sn08_Q.put(data)[116;215H[K[116;215H121,11-25      3%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;9H[33mif[0m username == [31m'[0m[30m[43mfed_esc[0m[31m_014'[0m:[116;215H[K[116;215H122,18-25      3%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;17HescQ.esc_sn014_Q.put(data)[116;215H[K[116;215H123,11-25      4%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[116;215H[K[116;215H124,0-1[8C5%[115;1H[34h[?25h[?25l[1;115r[115;1H
[1;116r[116;215H[K[116;215H125,0-1[8C5%[115;1H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;1H[33mdef[0m [36mhandle_response[0m[46m([0mdata[46m)[0m:[116;215H[K[116;215H126,25[9C6%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[114;20H(data)
    [33mglobal[0m create_flag[116;215H[K[116;215H127,22[9C6%[115;22H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;5Hindex_counter = [31m0[0m[116;215H[K[116;215H128,21[9C7%[115;21H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;5Hhb_counter=[31m0[0m[116;215H[K[116;215H129,16[9C7%[115;16H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;1H[34m# receive the data in small chunks[0m[116;215H[K[116;215H130,25[9C8%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;5H[34m#while True:[0m[116;215H[K[116;215H131,16[9C8%[115;16H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;5H[36mprint[0m([31m"(rest_server) Waiting for data..."[0m)[116;215H[K[116;215H132,25[9C9%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;5H[34m#data = connection.recv(2048)[0m[116;215H[K[116;215H133,25[8C10%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;5H[33mif[0m data:[116;215H[K[116;215H134,12[8C10%[115;12H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;13Hjson_parse = json.loads(data)[116;215H[K[116;215H135,18-25     11%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;13HjsonHdlr = [36mopen[0m([31m"health_data.json"[0m, [31m'w'[0m)[116;215H[K[116;215H136,18-25     11%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;13Hpickle.dump(json_parse, jsonHdlr)[116;215H[K[116;215H137,18-25     12%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;13HjsonHdlr.close()[116;215H[K[116;215H138,18-25     12%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;13H[36mprint[0m([31m'Event is set'[0m)[116;215H[K[116;215H139,18-25     13%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;13H[34m#e.set[0m[34m[46m()[0m[116;215H[K[116;215H140,13-20     13%[115;20H[34h[?25h[?25l[1;115r[115;1H
[1;116r[114;19H[34m()[0m[116;215H[K[116;215H141,0-1[7C14%[115;1H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;13H[36mprint[0m(json_parse)[116;215H[K[116;215H142,18-25     15%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;13HbandId = json_parse[[31m'bandIndex'[0m][116;215H[K[116;215H143,18-25     15%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[116;215H[K[116;215H144,0-1[7C16%[115;1H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;13Hentry = bandId[116;215H[K[116;215H145,18-25     16%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;13HescId = json_parse[[31m'sensorId'[0m][116;215H[K[116;215H146,18-25     17%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;13H[34m#retrieve sensor Id [0m[30m[43mfed_esc[0m[34m_029 to esc_sn029[0m[116;215H[K[116;215H147,25[8C17%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;13HnewEscId = escId[[31m4[0m:[31m8[0m] + [31m"sn"[0m + escId[[31m8[0m:[31m11[0m] +[31m"_Q"[0m[116;215H[K[116;215H148,25[8C18%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;13H[36mprint[0m(newEscId)[116;215H[K[116;215H149,18-25     18%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;13HescQ.newEscId.put(json_parse)[116;215H[K[116;215H150,25[8C19%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[116;215H[K[116;215H151,0-1[7C20%[115;1H[34h[?25h[?25l[1;115r[115;1H
[1;116r[116;215H[K[116;215H152,0-1[7C20%[115;1H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;13H[36mprint[0m([31m"----------------------- rest_server_hdlr ---------------------[0m[35m\n[0m[31m"[0m)[116;215H[K[116;215H153,18-25     21%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;13H[33mif[0m ((bandId == [31m0[0m [33mor[0m bandId == [31m1[0m) [33mand[0m index_counter < [31m6[0m):[116;215H[K[116;215H154,18-25     21%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;17H[36mprint[0m([31m"---> Window Stared <---"[0m)[116;215H[K[116;215H155,11-25     22%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;17H[33mif[0m (create_flag == [31m1[0m):[116;215H[K[116;215H156,11-25     22%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;21H[33mfor[0m num [33min[0m [36mxrange[0m([31m1[0m,[31m7[0m):[116;215H[K[116;215H157,11-25     23%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;25HsiteId = escId + [31m"_"[0m + [36mstr[0m(num)[116;215H[K[116;215H158,4-25      24%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;25HsiteID_list.append(siteId)[116;215H[K[116;215H159,4-25      24%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;25HhealthDB.createItem(siteId)[116;215H[K[116;215H160,4-25      25%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;21Hcreate_flag = [31m0[0m[116;215H[K[116;215H161,11-25     25%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;17H[33melse[0m:[116;215H[K[116;215H162,7-21      26%[115;21H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;25H[36mprint[0m([31m""[0m)[116;215H[K[116;215H163,4-25      26%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[116;215H[K[116;215H164,0-1[7C27%[115;1H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;13H[33mif[0m(index_counter == [31m6[0m):[116;215H[K[116;215H165,18-25     27%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;17H[36mprint[0m([31m"reset counter to zero"[0m)[116;215H[K[116;215H166,11-25     28%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;17Hindex_counter = [31m0[0m[116;215H[K[116;215H167,11-25     29%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[116;215H[K[116;215H168,0-1[7C29%[115;1H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;13HbandInfo = json_parse[[31m'bandInfo'[0m][[31m'timeStampHealthCheck'[0m][116;215H[K[116;215H169,18-25     30%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;13Hsensor = json_parse[[31m'bandInfo'[0m][[31m'sensor'[0m][116;215H[K[116;215H170,18-25     30%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;13HadiSettings = json_parse[[31m'bandInfo'[0m][[31m'adiSettings'[0m][116;215H[K[116;215H171,18-25     31%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;13Hhps = json_parse[[31m'hps'[0m][116;215H[K[116;215H172,18-25     31%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;13Hi2c = json_parse[[31m'i2c'[0m][116;215H[K[116;215H173,18-25     32%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[116;215H[K[116;215H174,0-1[7C32%[115;1H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;9H[34m# print("DEBUG -> timeStamp %s" %bandInfo)[0m[116;215H[K[116;215H175,18-25     33%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;9H[34m# print("DEBUG -> sensor %s" %sensor)[0m[116;215H[K[116;215H176,18-25     34%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;9H[34m# print("DEBUG -> adiSettings %s" %adiSettings)[0m[116;215H[K[116;215H177,18-25     34%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;9H[34m# print("DEBUG -> hps%s" %hps)[0m[116;215H[K[116;215H178,18-25     35%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;9H[34m# print("DEBUG -> i2c%s" %i2c)[0m[116;215H[K[116;215H179,18-25     35%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[116;215H[K[116;215H180,0-1[7C36%[115;1H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;13HsetDB_str((stats + [36mstr[0m([31m2[0m) + [31m"."[0m + [36mstr[0m(entry)), escId);[116;215H[K[116;215H181,18-25     36%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;13HsetDB_int((stats + [36mstr[0m([31m3[0m) + [31m"."[0m + [36mstr[0m(entry)), bandId);[116;215H[K[116;215H182,18-25     37%[115;25H[34h[?25h[?25l[1;115r[115;1H
[1;116r[115;13HsetDB_int((stats + [36mstr[0m([31m4[0m) + [31m"."[0m + [36mstr[0m(entry)), bandInfo);[116;215H[K[116;215H183,18-25     37%[115;25H[34h[?25h[?25l[116;217H2[114;25H[34h[?25h[?25l[116;217H1[113;25H[34h[?25h[?25l[116;217H0,0-1  [112;1H[34h[?25h[?25l[116;216H79,18-25[111;25H[34h[?25h[?25l[116;217H8[110;25H[34h[?25h[?25l[116;217H7[109;25H[34h[?25h[?25l[116;217H6[108;25H[34h[?25h[?25l[116;217H5[107;25H[34h[?25h[?25l[116;217H4,0-1  [106;1H[34h[?25h[?25l[116;217H3,18-25[105;25H[34h[?25h[?25l[116;217H2[104;25H[34h[?25h[?25l[116;217H1[103;25H[34h[?25h[?25l[116;217H0[102;25H[34h[?25h[?25l[116;216H69[101;25H[34h[?25h[?25l[116;217H8,0-1  [100;1H[34h[?25h[?25l[116;217H7,11-25[99;25H[34h[?25h[?25l[116;217H6[98;25H[34h[?25h[?25l[116;217H5,18[97;25H[34h[?25h[?25l[116;217H4,0-1  [96;1H[34h[?25h[?25l[116;217H3,4-25[95;25H[34h[?25h[?25l[116;217H2,7-21[94;21H[34h[?25h[?25l[116;217H1,11-25[93;25H[34h[?25h[?25l[116;217H0,4-25 [92;25H[34h[?25h[?25l[116;216H59[91;25H[34h[?25h[?25l[116;217H8[90;25H[34h[?25h[?25l[116;217H7,11-25[89;25H[34h[?25h[?25l[116;217H6[88;25H[34h[?25h[?25l[116;217H5[87;25H[34h[?25h[?25l[116;217H4,18[86;25H[34h[?25h[?25l[116;217H3[85;25H[34h[?25h[?25l[116;217H2,0-1  [84;1H[34h[?25h[?25l[116;217H1[83;1H[34h[?25h[?25l[116;217H0,25 [82;25H[34h[?25h[?25l[116;216H49,18-25[81;25H[34h[?25h[?25l[116;217H8,25   [80;25H[34h[?25h[?25l[116;217H7[79;25H[34h[?25h[?25l[116;217H8[80;25H[34h[?25h[?25l[80;115r[115;1H
[1;116r[115;13HsetDB_int((stats + [36mstr[0m([31m5[0m) + [31m"."[0m + [36mstr[0m(entry)), sensor[[31m'agcGain'[0m]);[116;215H[K[116;215H148,6-13      38%[80;13H[34h[?25h[?25l[80;115r[115;1H
[1;116r[115;13HsetDB_int((stats + [36mstr[0m([31m6[0m) + [31m"."[0m + [36mstr[0m(entry)),[116;215H[K[116;215H148,13[8C38%[80;13H[34h[?25h[?25l[80;115r[115;1H
[1;116r[115;23Hsensor[[31m'gpioOverLoad'[0m]);[116;215H[K[116;215H148,0-1[7C38%[80;1H[34h[?25h[?25l[116;217H7,1  [79;1H[34h[?25h[?25l[116;1H[1m-- INSERT --[0m[116;215H[K[116;215H148,1[9C38%[80;115r[80;1H[L[1;116r[116;215H[K[116;215H148,1[9C38%[80;1H[34h[?25h[?25l[116;219H2-9[80;9H[34h[?25h[?25l[116;219H3-17[80;17H[34h[?25h[?25l[116;219H2-9 [80;9H[34h[?25h[?25l[116;219H1  [80;1H[34h[?25h[?25l[116;219H2[80;2H[34h[?25h[?25l[116;219H3[80;3H[34h[?25h[?25l[116;219H4[80;4H[34h[?25h[?25l[116;219H5[80;5H[34h[?25h[?25l[116;219H6[80;6H[34h[?25h[?25l[116;219H7-9[80;9H[34h[?25h[?25l[116;219H8-10[80;10H[34h[?25h[?25l[116;219H9-11[80;11H[34h[?25h[?25l[116;219H10-12[80;12H[34h[?25h[?25l[116;220H1-13[80;13H[34h[?25h[?25lp[116;220H2-14[80;14H[34h[?25h[?25li[116;220H3-15[80;15H[34h[?25h[?25lt[116;220H4-16[80;16H[34h[?25h[?25l[80;15H[K[116;220H3-15[80;15H[34h[?25h[?25l[80;14H[K[116;220H2-14[80;14H[34h[?25h[?25lu[116;220H3-15[80;15H[34h[?25h[?25lt[116;220H4-16[80;16H[34h[?25h[?25l_[116;220H5-17[80;17H[34h[?25h[?25ld[116;220H6-18[80;18H[34h[?25h[?25la[116;220H7-19[80;19H[34h[?25h[?25lt[116;220H8-20[80;20H[34h[?25h[?25la[116;220H9-21[80;21H[34h[?25h[?25l_[116;219H20-22[80;22H[34h[?25h[?25li[116;220H1-23[80;23H[34h[?25h[?25ln[116;220H2-24[80;24H[34h[?25h[?25lt[116;220H3-25[80;25H[34h[?25h[?25lo[116;220H4-26[80;26H[34h[?25h[?25l_[116;220H5-27[80;27H[34h[?25h[?25lq[116;220H6-28[80;28H[34h[?25h[?25lu[116;220H7-29[80;29H[34h[?25h[?25le[116;220H8-30[80;30H[34h[?25h[?25lu[116;220H9-31[80;31H[34h[?25h[?25le[116;219H30-32[80;32H[34h[?25h[?25l([116;215H[K[116;215H148,31-33     38%[80;33H[34h[?25h[?25le[116;220H2-34[80;34H[34h[?25h[?25ls[116;220H3-35[80;35H[34h[?25h[?25lc[116;220H4-36[80;36H[34h[?25h[?25ld[116;220H5-37[80;37H[34h[?25h[?25l[80;36H[K[116;220H4-36[80;36H[34h[?25h[?25lI[116;220H5-37[80;37H[34h[?25h[?25ld[116;220H6-38[80;38H[34h[?25h[?25l,[116;220H7-39[80;39H[34h[?25h[?25lj[116;220H8-40[80;40H[34h[?25h[?25ls[116;220H9-41[80;41H[34h[?25h[?25lo[116;219H40-42[80;42H[34h[?25h[?25ln[116;220H1-43[80;43H[34h[?25h[?25l_[116;220H2-44[80;44H[34h[?25h[?25lp[116;220H3-45[80;45H[34h[?25h[?25la[116;220H4-46[80;46H[34h[?25h[?25lr[116;220H5-47[80;47H[34h[?25h[?25ls[116;220H6-48[80;48H[34h[?25h[?25le[116;220H7-49[80;49H[34h[?25h[?25l)[80;32H[46m([16C)[0m[116;215H[K[116;215H148,48-50     38%[80;50H[34h[?25h[116;1H[K[?25l[116;215H148,47-49     38%[80;49H[34h[?25h[?25l[116;215H[K[116;1H:[34h[?25hw[?25l[34h[?25h[?25l"snmp_stat.py" 292L, 10459C written[179C148,47-49     38%[116;215H[K[116;215H148,47-49     38%[80;49H[34h[?25h[?25l[80;32H([16C)[116;217H7,49   [79;49H[34h[?25h[?25l[116;217H6,36-43[78;43H[34h[?25h[?25l[116;217H5,19-26[77;26H[34h[?25h[?25l[116;217H4,0-1  [76;1H[34h[?25h[?25l[75;32H[46m[[11C][0m[116;217H3,37-44[75;44H[34h[?25h[?25l[74;18H[46m([10C)[0m[75;32H[[11C][116;217H2,22-29[74;29H[34h[?25h[?25l[74;18H([10C)[116;217H1,0-1  [73;1H[34h[?25h[?25l[72;19H[34m[46m()[0m[116;217H0,13-20[72;20H[34h[?25h[?25l[71;18H[46m([14C)[0m[72;19H[34m()[0m[116;216H39,26-33[71;33H[34h[?25h[?25l[70;27H[46m()[0m[71;18H([14C)[116;217H8,21-28[70;28H[34h[?25h[?25l[69;24H[46m([20C)[0m[70;27H()[116;217H7,38-45[69;45H[34h[?25h[?25l[69;24H([20C)[116;217H6,42-49[68;49H[34h[?25h[?25l[116;220H1-48[68;48H[34h[?25h[?25l[116;220H0-47[68;47H[34h[?25h[?25l[116;219H39-46[68;46H[34h[?25h[?25l[116;220H8-45[68;45H[34h[?25h[?25l[116;220H7-44[68;44H[34h[?25h[?25l[116;220H6-43[68;43H[34h[?25h[?25l[116;220H5-42[68;42H[34h[?25h[?25l[116;220H4-41[68;41H[34h[?25h[?25l[116;220H3-40[68;40H[34h[?25h[?25l[116;220H2-39[68;39H[34h[?25h[?25l[116;220H1-38[68;38H[34h[?25h[?25l[116;220H0-37[68;37H[34h[?25h[?25l[116;219H29-36[68;36H[34h[?25h[?25l[116;220H8-35[68;35H[34h[?25h[?25l[116;220H7-34[68;34H[34h[?25h[?25l[116;220H6-33[68;33H[34h[?25h[?25l[116;220H5-32[68;32H[34h[?25h[?25l[116;220H4-31[68;31H[34h[?25h[?25l[116;220H3-30[68;30H[34h[?25h[?25l[116;220H2-29[68;29H[34h[?25h[?25l[46m([23C)[0m[116;220H1-28[68;28H[34h[?25h[?25l([23C)[116;220H0-27[68;27H[34h[?25h[?25l[116;219H19-26[68;26H[34h[?25h[?25l[116;220H8-25[68;25H[34h[?25h[?25l[116;220H7-24[68;24H[34h[?25h[?25l[116;220H6-23[68;23H[34h[?25h[?25l[116;220H5-22[68;22H[34h[?25h[?25l[116;220H4-21[68;21H[34h[?25h[?25l[116;220H3-20[68;20H[34h[?25h[?25l[116;220H2-19[68;19H[34h[?25h[?25l[116;220H1-18[68;18H[34h[?25h[?25l[116;220H0-17[68;17H[34h[?25h[?25l[116;219H9-16 [68;16H[34h[?25h[?25l[116;219H8-15[68;15H[34h[?25h[?25l[116;219H7-14[68;14H[34h[?25h[?25l[116;219H6-13[68;13H[34h[?25h[?25l[116;1H[1m-- INSERT --[0m[116;13H[K[116;215H136,6-13      38%[68;13H[34h[?25h[?25l[34m#jsonHdlr = open("health_data.json", 'w')[0m[116;219H7-14[68;14H[34h[?25h[?25l[116;217H7[69;14H[34h[?25h[?25l[116;219H6-13[69;13H[34h[?25h[?25l[34m#pickle.dump(json_parse, jsonHdlr)[0m[116;219H7-14[69;14H[34h[?25h[?25l[116;217H8[70;14H[34h[?25h[?25l[116;219H6-13[70;13H[34h[?25h[?25l[34m#jsonHdlr.close()[0m[116;219H7-14[70;14H[34h[?25h:[34mj[0m[116;1H[K[?25l[116;215H138,6-13      38%[70;13H[34h[?25h[?25l[116;215H[K[116;1H:w[34h[?25h[?25l"snmp_stat.py" 292L, 10462C written[179C138,6-13      38%[116;215H[K[116;215H138,6-13      38%[70;13H[34h[?25h[?25l[116;217H9[71;13H[34h[?25h[?25l[116;1H[K[116;1H:[34h[?25hw[?25l[34h[?25h[?25l"snmp_stat.py" 292L, 10462C written[179C139,6-13      38%[116;215H[K[116;215H139,6-13      38%[71;13H[34h[?25h[?25l[116;216H40[72;13H[34h[?25h[?25l[116;217H1,0-1 [73;1H[34h[?25h[?25l[116;217H2,6-13[74;13H[34h[?25h[?25l[116;217H3[75;13H[34h[?25h[?25l[116;217H4,0-1 [76;1H[34h[?25h[?25l[116;217H5,6-13[77;13H[34h[?25h[?25l[116;217H6[78;13H[34h[?25h[?25l[116;217H7,13  [79;13H[34h[?25h[?25l[116;217H8,11-13[80;13H[34h[?25h[?25l[116;217H9,0-1  [81;1H[34h[?25h[?25l[116;216H50[82;1H[34h[?25h[?25l[116;1H1 change; before #7  10 seconds ago[116;215H[K[70;13HjsonHdlr.close()[70;29H[K[116;215H138,6-13      38%[70;13H[34h[?25h[?25l[116;19H6  11[116;215H[K[69;13Hpickle.dump(json_parse, jsonHdlr)[69;46H[K[116;215H137,6-13      38%[69;13H[34h[?25h[?25l[116;19H5  13[116;215H[K[68;13HjsonHdlr = [36mopen[0m([31m"health_data.json"[0m, [31m'w'[0m)[68;53H[K[116;215H136,6-13      38%[68;13H[34h[?25h[?25l[116;1H[K[116;1H:[34h[?25hw[?25l[34h[?25h[?25l"snmp_stat.py" 292L, 10459C written[179C136,6-13      38%[116;215H[K[116;215H136,6-13      38%[68;13H[34h[?25h[?25l[116;217H5[67;13H[34h[?25h[?25l[116;217H4,12  [66;12H[34h[?25h[?25l[116;217H5,6-13[67;13H[34h[?25h[?25l[116;217H6[68;13H[34h[?25h[?25l[116;217H7[69;13H[34h[?25h[?25l[116;217H8[70;13H[34h[?25h[?25l[116;217H9[71;13H[34h[?25h[?25l[116;216H40[72;13H[34h[?25h[?25l[116;217H1,0-1 [73;1H[34h[?25h[?25l[116;217H2,6-13[74;13H[34h[?25h[?25l[116;217H3[75;13H[34h[?25h[?25l[116;217H4,0-1 [76;1H[34h[?25h[?25l[116;217H5,6-13[77;13H[34h[?25h[?25l[116;217H6[78;13H[34h[?25h[?25l[116;217H7,13  [79;13H[34h[?25h[?25l[116;217H8,11-13[80;13H[34h[?25h[?25l[116;217H9,0-1  [81;1H[34h[?25h[?25l[116;216H50[82;1H[34h[?25h[?25l[116;216H49[81;1H[34h[?25h[?25l[116;217H8,11-13[80;13H[34h[?25h[?25l[116;217H7,13   [79;13H[34h[?25h[?25l[116;217H6,6-13[78;13H[34h[?25h[?25l[116;217H5[77;13H[34h[?25h[?25l[116;217H4,0-1 [76;1H[34h[?25h[?25l[116;217H5,6-13[77;13H[34h[?25h[?25l[116;217H6[78;13H[34h[?25h[?25l[116;217H7,13  [79;13H[34h[?25h[?25l[116;217H6,6-13[78;13H[34h[?25h[?25l[116;219H7-14[78;14H[34h[?25h[?25l[116;219H8-15[78;15H[34h[?25h[?25l[116;219H9-16[78;16H[34h[?25h[?25l[116;219H10-17[78;17H[34h[?25h[?25l[116;220H1-18[78;18H[34h[?25h[?25l[116;220H2-19[78;19H[34h[?25h[?25l[116;220H3-20[78;20H[34h[?25h[?25l[116;217H7,20   [79;20H[34h[?25h[?25l[116;217H8,18-20[80;20H[34h[?25h[?25l[116;217H9,0-1  [81;1H[34h[?25h[?25l[116;217H8,18-20[80;20H[34h[?25h[?25l[116;1H[K[116;1H:[34h[?25hw[?25l[34h[?25hq[?25l[34h[?25h[?25l"snmp_stat.py" 292L, 10459C written
[?1l>[34h[?25h[?1049l(23:17 root@ip-10-1-1-199 monitoring-system) > 
(23:17 root@ip-10-1-1-199 monitoring-system) > 
(23:17 root@ip-10-1-1-199 monitoring-system) > ./esc[K[K[K[K[K[C[25Preverse-i-search)`':[Cp': vim snmp_stat.pys': ps -eaf | grep -i esc_main[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1@ [C[C[C[1@-[C[C[C[1@e[C[C[C[1@a[C[C[C[1@f[C[C[C[C[18@23:17 root@ip-10-1-1-199 monitoring-system) >[C
root     16998 16866  0 23:12 pts/8    00:00:00 python ./[01;31m[Kesc_main[m[K.py
root     17049 16866  0 23:17 pts/8    00:00:00 grep --color=auto -i [01;31m[Kesc_main[m[K
(23:17 root@ip-10-1-1-199 monitoring-system) > kill -9 16998
(23:17 root@ip-10-1-1-199 monitoring-system) > [1]+  Killed                  ./esc_main.py

(23:17 root@ip-10-1-1-199 monitoring-system) > 
(23:17 root@ip-10-1-1-199 monitoring-system) > 
(23:17 root@ip-10-1-1-199 monitoring-system) > 
(23:17 root@ip-10-1-1-199 monitoring-system) > 
(23:17 root@ip-10-1-1-199 monitoring-system) > 
(23:17 root@ip-10-1-1-199 monitoring-system) > ./esc_main.py 
1
INFO: Using config file: ./openvpn-monitor.conf
Preparing DELETE >>>
			 Connected to MySQL database
Snmp stat handler
starting up on localhost port 10000
Exception in thread snmp_stat:
Traceback (most recent call last):
  File "/usr/lib64/python2.7/threading.py", line 811, in __bootstrap_inner
    self.run()
  File "/usr/lib64/python2.7/threading.py", line 764, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/home/sarath/monitoring-system/snmp_stat.py", line 265, in snmp_stat_hdlr
    sock = create_socket()
  File "/home/sarath/monitoring-system/snmp_stat.py", line 257, in create_socket
    sock.bind(server_addr)
  File "/usr/lib64/python2.7/socket.py", line 224, in meth
    return getattr(self._sock,name)(*args)
error: [Errno 98] Address already in use

Created rest server handler
connecting to localhost port 10000
 !!!!!!!!!!!!!!!!!!!!!!!!!! 1 !!!!!!!!!!!!!!!!!!!!!!!!!!! 
{u'nclients': 7, u'bytesout': 114219546, u'bytesin': 32138031}
connection error: keep re-trying...
esc_sn015
<------ No notification ----->

esc_sn014
<------ No notification ----->

esc_sn023
<------ No notification ----->

esc_sn08
<------ No notification ----->

esc_sn01
<------ No notification ----->

esc_sn029
<------ No notification ----->

esc_sn026
<------ No notification ----->

{u'esc_sn08': 4, u'esc_sn01': 5, u'esc_sn023': 3, u'esc_sn026': 7, u'esc_sn029': 6, u'esc_sn015': 1, u'esc_sn014': 2}
			 new connections in App.. please sync with Db
Preparing DELETE >>>
			 Connected to MySQL database
HB thread active are...
[u'esc_sn08', u'esc_sn01', u'esc_sn023', u'esc_sn026', u'esc_sn029', u'esc_sn015', u'esc_sn014']
PING 100.61.0.14 (100.61.0.14) 56(84) bytes of data.
64 bytes from 100.61.0.14: icmp_seq=1 ttl=64 time=303 ms

--- 100.61.0.14 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 303.425/303.425/303.425/0.000 ms
Comm is up 100.61.0.14
PING 100.61.0.34 (100.61.0.34) 56(84) bytes of data.
connection error: keep re-trying...
connection error: keep re-trying...
connection error: keep re-trying...
connection error: keep re-trying...
connection error: keep re-trying...

--- 100.61.0.34 ping statistics ---
1 packets transmitted, 0 received, 100% packet loss, time 0ms

No response from 100.61.0.34
PING 100.61.0.22 (100.61.0.22) 56(84) bytes of data.
64 bytes from 100.61.0.22: icmp_seq=1 ttl=64 time=304 ms

--- 100.61.0.22 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 304.110/304.110/304.110/0.000 ms
Comm is up 100.61.0.22
PING 100.61.0.30 (100.61.0.30) 56(84) bytes of data.
connection error: keep re-trying...
connection error: keep re-trying...
 !!!!!!!!!!!!!!!!!!!!!!!!!! 1 !!!!!!!!!!!!!!!!!!!!!!!!!!! 
{u'nclients': 7, u'bytesout': 114221362, u'bytesin': 32142401}
{u'esc_sn08': 4, u'esc_sn01': 5, u'esc_sn023': 3, u'esc_sn026': 7, u'esc_sn029': 6, u'esc_sn015': 1, u'esc_sn014': 2}
			 DB is in sync with App
HB thread active are...
[u'esc_sn08', u'esc_sn01', u'esc_sn023', u'esc_sn026', u'esc_sn029', u'esc_sn015', u'esc_sn014']
connection error: keep re-trying...
connection error: keep re-trying...
connection error: keep re-trying...
08:timeout
01:timeout
23:timeout
26:timeout
29:timeout
15:timeout
14:timeout

--- 100.61.0.30 ping statistics ---
1 packets transmitted, 0 received, 100% packet loss, time 0ms

No response from 100.61.0.30
PING 100.61.0.10 (100.61.0.10) 56(84) bytes of data.
connection error: keep re-trying...
connection error: keep re-trying...
connection error: keep re-trying...
connection error: keep re-trying...
connection error: keep re-trying...
^Z
[1]+  Stopped                 ./esc_main.py
(23:18 root@ip-10-1-1-199 monitoring-system) > 
(23:18 root@ip-10-1-1-199 monitoring-system) > ps -ea^C
(23:18 root@ip-10-1-1-199 monitoring-system) > [C[25Preverse-i-search)`':[C[15@p': ./esc_main.py ': ps -eaf | grep -i esc_main[1@-[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[22@23:18 root@ip-10-1-1-199 monitoring-system) >[C[C[C[C[C[C[C[C[C[C[C[C[C[C
root     17050 16866  1 23:17 pts/8    00:00:00 python ./[01;31m[Kesc_main[m[K.py
root     17097 16866  0 23:18 pts/8    00:00:00 grep --color=auto -i [01;31m[Kesc_main[m[K
(23:18 root@ip-10-1-1-199 monitoring-system) > 
(23:18 root@ip-10-1-1-199 monitoring-system) > 
(23:18 root@ip-10-1-1-199 monitoring-system) > kill -9 17050
(23:18 root@ip-10-1-1-199 monitoring-system) > [1]+  Killed                  ./esc_main.py

(23:18 root@ip-10-1-1-199 monitoring-system) > 
(23:18 root@ip-10-1-1-199 monitoring-system) > 
(23:18 root@ip-10-1-1-199 monitoring-system) > 
(23:18 root@ip-10-1-1-199 monitoring-system) > 
(23:18 root@ip-10-1-1-199 monitoring-system) > 
(23:18 root@ip-10-1-1-199 monitoring-system) > 
(23:18 root@ip-10-1-1-199 monitoring-system) > clear
[H[J(23:18 root@ip-10-1-1-199 monitoring-system) > ls
[0m[01;32mcleanup_tables.sh[0m  [01;32mconvert_json_to_csv.py[0m  dynamodblib.pyc                          esc_main.pyc   [01;32mfetch_data_openvpn_mgmt.py[0m   health_data.json  openvpn-monitor.conf  portmanagerlib.pyc  [01;32mrest_server.py[0m   snmp_stat.pyc  typescript
config_loader.py   dict_compare.py         esc_health_data_2017_11_08_20_27_39.csv  esc_queue.py   fetch_data_openvpn_mgmt.pyc  iptablelib.py     port_info.txt         portmanager.pyc     rest_server.pyc  [01;32mtrap_v2c.py[0m
config_loader.pyc  dynamodblib.py          [01;32mesc_main.py[0m                              esc_queue.pyc  [01;32mgui_interface_app.py[0m         iptablelib.pyc    portmanagerlib.py     README.md           [01;32msnmp_stat.py[0m     trap_v2c.pyc
(23:18 root@ip-10-1-1-199 monitoring-system) > 
(23:18 root@ip-10-1-1-199 monitoring-system) > 
(23:18 root@ip-10-1-1-199 monitoring-system) > 
(23:18 root@ip-10-1-1-199 monitoring-system) > 
(23:18 root@ip-10-1-1-199 monitoring-system) > 
(23:18 root@ip-10-1-1-199 monitoring-system) > ./esc_main.py 
1
INFO: Using config file: ./openvpn-monitor.conf
Preparing DELETE >>>
			 Connected to MySQL database
Snmp stat handler
starting up on localhost port 10000
Exception in thread snmp_stat:
Traceback (most recent call last):
  File "/usr/lib64/python2.7/threading.py", line 811, in __bootstrap_inner
    self.run()
  File "/usr/lib64/python2.7/threading.py", line 764, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/home/sarath/monitoring-system/snmp_stat.py", line 265, in snmp_stat_hdlr
    sock = create_socket()
  File "/home/sarath/monitoring-system/snmp_stat.py", line 257, in create_socket
    sock.bind(server_addr)
  File "/usr/lib64/python2.7/socket.py", line 224, in meth
    return getattr(self._sock,name)(*args)
error: [Errno 98] Address already in use

Created rest server handler
connecting to localhost port 10000
 !!!!!!!!!!!!!!!!!!!!!!!!!! 1 !!!!!!!!!!!!!!!!!!!!!!!!!!! 
{u'nclients': 7, u'bytesout': 114224434, u'bytesin': 32150935}
connection error: keep re-trying...
esc_sn015
<------ No notification ----->

esc_sn014
<------ No notification ----->

esc_sn023
<------ No notification ----->

esc_sn08
<------ No notification ----->

esc_sn01
<------ No notification ----->

esc_sn029
<------ No notification ----->

esc_sn026
<------ No notification ----->

{u'esc_sn08': 4, u'esc_sn01': 5, u'esc_sn023': 3, u'esc_sn026': 7, u'esc_sn029': 6, u'esc_sn015': 1, u'esc_sn014': 2}
			 new connections in App.. please sync with Db
Preparing DELETE >>>
			 Connected to MySQL database
HB thread active are...
[u'esc_sn08', u'esc_sn01', u'esc_sn023', u'esc_sn026', u'esc_sn029', u'esc_sn015', u'esc_sn014']
PING 100.61.0.14 (100.61.0.14) 56(84) bytes of data.
64 bytes from 100.61.0.14: icmp_seq=1 ttl=64 time=434 ms

--- 100.61.0.14 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 434.518/434.518/434.518/0.000 ms
Comm is up 100.61.0.14
PING 100.61.0.34 (100.61.0.34) 56(84) bytes of data.
connection error: keep re-trying...
connection error: keep re-trying...
connection error: keep re-trying...
^CTraceback (most recent call last):
  File "./esc_main.py", line 90, in <module>
    main()
  File "./esc_main.py", line 70, in main
    time.sleep(interval)
KeyboardInterrupt

--- 100.61.0.34 ping statistics ---
1 packets transmitted, 0 received, 100% packet loss, time 0ms

No response from 100.61.0.34
PING 100.61.0.22 (100.61.0.22) 56(84) bytes of data.
64 bytes from 100.61.0.22: icmp_seq=1 ttl=64 time=313 ms

--- 100.61.0.22 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 313.501/313.501/313.501/0.000 ms
Comm is up 100.61.0.22
PING 100.61.0.30 (100.61.0.30) 56(84) bytes of data.
connection error: keep re-trying...
^Z
[1]+  Stopped                 ./esc_main.py
(23:18 root@ip-10-1-1-199 monitoring-system) > 
(23:18 root@ip-10-1-1-199 monitoring-system) > [C[25Preverse-i-search)`':[C[15@p': ./esc_main.pys': ps -eaf | grep -i esc_main[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1@ [C[C[C[1@-[C[C[C[1@e[C[C[C[1@a[C[C[C[1@f[C[C[C[C[18@23:18 root@ip-10-1-1-199 monitoring-system) >[C
root     17100 16866  2 23:18 pts/8    00:00:00 python ./[01;31m[Kesc_main[m[K.py
root     17146 16866  0 23:18 pts/8    00:00:00 grep --color=auto -i [01;31m[Kesc_main[m[K
(23:18 root@ip-10-1-1-199 monitoring-system) > kill -9 17100
(23:18 root@ip-10-1-1-199 monitoring-system) > [1]+  Killed                  ./esc_main.py

(23:18 root@ip-10-1-1-199 monitoring-system) > 
(23:18 root@ip-10-1-1-199 monitoring-system) > 
(23:18 root@ip-10-1-1-199 monitoring-system) > 
(23:18 root@ip-10-1-1-199 monitoring-system) > clear
[H[J(23:18 root@ip-10-1-1-199 monitoring-system) > ls
[0m[01;32mcleanup_tables.sh[0m  [01;32mconvert_json_to_csv.py[0m  dynamodblib.pyc                          esc_main.pyc   [01;32mfetch_data_openvpn_mgmt.py[0m   health_data.json  openvpn-monitor.conf  portmanagerlib.pyc  [01;32mrest_server.py[0m   snmp_stat.pyc  typescript
config_loader.py   dict_compare.py         esc_health_data_2017_11_08_20_27_39.csv  esc_queue.py   fetch_data_openvpn_mgmt.pyc  iptablelib.py     port_info.txt         portmanager.pyc     rest_server.pyc  [01;32mtrap_v2c.py[0m
config_loader.pyc  dynamodblib.py          [01;32mesc_main.py[0m                              esc_queue.pyc  [01;32mgui_interface_app.py[0m         iptablelib.pyc    portmanagerlib.py     README.md           [01;32msnmp_stat.py[0m     trap_v2c.pyc
(23:18 root@ip-10-1-1-199 monitoring-system) > 
(23:18 root@ip-10-1-1-199 monitoring-system) > 
(23:18 root@ip-10-1-1-199 monitoring-system) > 
(23:18 root@ip-10-1-1-199 monitoring-system) > 
(23:18 root@ip-10-1-1-199 monitoring-system) > 
(23:18 root@ip-10-1-1-199 monitoring-system) > lsclearkill -9 17100ps -eaf | grep -i esc_main[12P./esc_main.py ls[Kclearkill -9 17050ps -eaf | grep -i esc_main[12P./esc_main.py [1Pkill -9 16998ps -eaf | grep -i esc_main[10Pvim snmp_stat.pyesc_queue.py[2P./esc_main.py ls[Kclearkill -9 16944ps -eaf | grep -i esc_mainkill -9 16884 ; kill -9 169544[4Pps -eaf | grep -i esc_main[12P./esc_main.py ls[Kclear[K[K[K[K[Kvim ~/.vimrc
[?1049h[?1h=[1;116r[34l[34h[?25h[23m[24m[0m[H[J[?25l[116;1H"~/.vimrc" [New File][2;1H[1m[34m~                                                                                                                                                                                                                                       [3;1H~                                                                                                                                                                                                                                       [4;1H~                                                                                                                                                                                                                                       [5;1H~                                                                                                                                                                                                                                       [6;1H~                                                                                                                                                                                                                                       [7;1H~                                                                                                                                                                                                                                       [8;1H~                                                                                                                                                                                                                                       [9;1H~                                                                                                                                                                                                                                       [10;1H~                                                                                                                                                                                                                                       [11;1H~                                                                                                                                                                                                                                       [12;1H~                                                                                                                                                                                                                                       [13;1H~                                                                                                                                                                                                                                       [14;1H~                                                                                                                                                                                                                                       [15;1H~                                                                                                                                                                                                                                       [16;1H~                                                                                                                                                                                                                                       [17;1H~                                                                                                                                                                                                                                       [18;1H~                                                                                                                                                                                                                                       [19;1H~                                                                                                                                                                                                                                       [20;1H~                                                                                                                                                                                                                                       [21;1H~                                                                                                                                                                                                                                       [22;1H~                                                                                                                                                                                                                                       [23;1H~                                                                                                                                                                                                                                       [24;1H~                                                                                                                                                                                                                                       [25;1H~                                                                                                                                                                                                                                       [26;1H~                                                                                                                                                                                                                                       [27;1H~                                                                                                                                                                                                                                       [28;1H~                                                                                                                                                                                                                                       [29;1H~                                                                                                                                                                                                                                       [30;1H~                                                                                                                                                                                                                                       [31;1H~                                                                                                                                                                                                                                       [32;1H~                                                                                                                                                                                                                                       [33;1H~                                                                                                                                                                                                                                       [34;1H~                                                                                                                                                                                                                                       [35;1H~                                                                                                                                                                                                                                       [36;1H~                                                                                                                                                                                                                                       [37;1H~                                                                                                                                                                                                                                       [38;1H~                                                                                                                                                                                                                                       [39;1H~                                                                                                                                                                                                                                       [40;1H~                                                                                                                                                                                                                                       [41;1H~                                                                                                                                                                                                                                       [42;1H~                                                                                                                                                                                                                                       [43;1H~                                                                                                                                                                                                                                       [44;1H~                                                                                                                                                                                                                                       [45;1H~                                                                                                                                                                                                                                       [46;1H~                                                                                                                                                                                                                                       [47;1H~                                                                                                                                                                                                                                       [48;1H~                                                                                                                                                                                                                                       [49;1H~                                                                                                                                                                                                                                       [50;1H~                                                                                                                                                                                                                                       [51;1H~                                                                                                                                                                                                                                       [52;1H~                                                                                                                                                                                                                                       [53;1H~                                                                                                                                                                                                                                       [54;1H~                                                                                                                                                                                                                                       [55;1H~                                                                                                                                                                                                                                       [56;1H~                                                                                                                                                                                                                                       [57;1H~                                                                                                                                                                                                                                       [58;1H~                                                                                                                                                                                                                                       [59;1H~                                                                                                                                                                                                                                       [60;1H~                                                                                                                                                                                                                                       [61;1H~                                                                                                                                                                                                                                       [62;1H~                                                                                                                                                                                                                                       [63;1H~                                                                                                                                                                                                                                       [64;1H~                                                                                                                                                                                                                                       [65;1H~                                                                                                                                                                                                                                       [66;1H~                                                                                                                                                                                                                                       [67;1H~                                                                                                                                                                                                                                       [68;1H~                                                                                                                                                                                                                                       [69;1H~                                                                                                                                                                                                                                       [70;1H~                                                                                                                                                                                                                                       [71;1H~                                                                                                                                                                                                                                       [72;1H~                                                                                                                                                                                                                                       [73;1H~                                                                                                                                                                                                                                       [74;1H~                                                                                                                                                                                                                                       [75;1H~                                                                                                                                                                                                                                       [76;1H~                                                                                                                                                                                                                                       [77;1H~                                                                                                                                                                                                                                       [78;1H~                                                                                                                                                                                                                                       [79;1H~                                                                                                                                                                                                                                       [80;1H~                                                                                                                                                                                                                                       [81;1H~                                                                                                                                                                                                                                       [82;1H~                                                                                                                                                                                                                                       [83;1H~                                                                                                                                                                                                                                       [84;1H~                                                                                                                                                                                                                                       [85;1H~                                                                                                                                                                                                                                       [86;1H~                                                                                                                                                                                                                                       [87;1H~                                                                                                                                                                                                                                       [88;1H~                                                                                                                                                                                                                                       [89;1H~                                                                                                                                                                                                                                       [90;1H~                                                                                                                                                                                                                                       [91;1H~                                                                                                                                                                                                                                       [92;1H~                                                                                                                                                                                                                                       [93;1H~                                                                                                                                                                                                                                       [94;1H~                                                                                                                                                                                                                                       [95;1H~                                                                                                                                                                                                                                       [96;1H~                                                                                                                                                                                                                                       [97;1H~                                                                                                                                                                                                                                       [98;1H~                                                                                                                                                                                                                                       [99;1H~                                                                                                                                                                                                                                       [100;1H~                                                                                                                                                                                                                                       [101;1H~                                                                                                                                                                                                                                       [102;1H~                                                                                                                                                                                                                                       [103;1H~                                                                                                                                                                                                                                       [104;1H~                                                                                                                                                                                                                                       [105;1H~                                                                                                                                                                                                                                       [106;1H~                                                                                                                                                                                                                                       [107;1H~                                                                                                                                                                                                                                       [108;1H~                                                                                                                                                                                                                                       [109;1H~                                                                                                                                                                                                                                       [110;1H~                                                                                                                                                                                                                                       [111;1H~                                                                                                                                                                                                                                       [112;1H~                                                                                                                                                                                                                                       [113;1H~                                                                                                                                                                                                                                       [114;1H~                                                                                                                                                                                                                                       [115;1H~                                                                                                                                                                                                                                       [0m[116;215H0,0-1[9CAll[1;1H[34h[?25h[?25l[116;1H[K[116;1H:[34h[?25hq[?25l[34h[?25h![?25l[34h[?25h[?25l[116;1H[K[116;1H[?1l>[34h[?25h[?1049l(23:19 root@ip-10-1-1-199 monitoring-system) > 
(23:19 root@ip-10-1-1-199 monitoring-system) > 
(23:19 root@ip-10-1-1-199 monitoring-system) > vim ~/.vimrc
[?1049h[?1h=[1;116r[34l[34h[?25h[23m[24m[0m[H[J[?25l[116;1H"~/.vimrc" [New File][2;1H[1m[34m~                                                                                                                                                                                                                                       [3;1H~                                                                                                                                                                                                                                       [4;1H~                                                                                                                                                                                                                                       [5;1H~                                                                                                                                                                                                                                       [6;1H~                                                                                                                                                                                                                                       [7;1H~                                                                                                                                                                                                                                       [8;1H~                                                                                                                                                                                                                                       [9;1H~                                                                                                                                                                                                                                       [10;1H~                                                                                                                                                                                                                                       [11;1H~                                                                                                                                                                                                                                       [12;1H~                                                                                                                                                                                                                                       [13;1H~                                                                                                                                                                                                                                       [14;1H~                                                                                                                                                                                                                                       [15;1H~                                                                                                                                                                                                                                       [16;1H~                                                                                                                                                                                                                                       [17;1H~                                                                                                                                                                                                                                       [18;1H~                                                                                                                                                                                                                                       [19;1H~                                                                                                                                                                                                                                       [20;1H~                                                                                                                                                                                                                                       [21;1H~                                                                                                                                                                                                                                       [22;1H~                                                                                                                                                                                                                                       [23;1H~                                                                                                                                                                                                                                       [24;1H~                                                                                                                                                                                                                                       [25;1H~                                                                                                                                                                                                                                       [26;1H~                                                                                                                                                                                                                                       [27;1H~                                                                                                                                                                                                                                       [28;1H~                                                                                                                                                                                                                                       [29;1H~                                                                                                                                                                                                                                       [30;1H~                                                                                                                                                                                                                                       [31;1H~                                                                                                                                                                                                                                       [32;1H~                                                                                                                                                                                                                                       [33;1H~                                                                                                                                                                                                                                       [34;1H~                                                                                                                                                                                                                                       [35;1H~                                                                                                                                                                                                                                       [36;1H~                                                                                                                                                                                                                                       [37;1H~                                                                                                                                                                                                                                       [38;1H~                                                                                                                                                                                                                                       [39;1H~                                                                                                                                                                                                                                       [40;1H~                                                                                                                                                                                                                                       [41;1H~                                                                                                                                                                                                                                       [42;1H~                                                                                                                                                                                                                                       [43;1H~                                                                                                                                                                                                                                       [44;1H~                                                                                                                                                                                                                                       [45;1H~                                                                                                                                                                                                                                       [46;1H~                                                                                                                                                                                                                                       [47;1H~                                                                                                                                                                                                                                       [48;1H~                                                                                                                                                                                                                                       [49;1H~                                                                                                                                                                                                                                       [50;1H~                                                                                                                                                                                                                                       [51;1H~                                                                                                                                                                                                                                       [52;1H~                                                                                                                                                                                                                                       [53;1H~                                                                                                                                                                                                                                       [54;1H~                                                                                                                                                                                                                                       [55;1H~                                                                                                                                                                                                                                       [56;1H~                                                                                                                                                                                                                                       [57;1H~                                                                                                                                                                                                                                       [58;1H~                                                                                                                                                                                                                                       [59;1H~                                                                                                                                                                                                                                       [60;1H~                                                                                                                                                                                                                                       [61;1H~                                                                                                                                                                                                                                       [62;1H~                                                                                                                                                                                                                                       [63;1H~                                                                                                                                                                                                                                       [64;1H~                                                                                                                                                                                                                                       [65;1H~                                                                                                                                                                                                                                       [66;1H~                                                                                                                                                                                                                                       [67;1H~                                                                                                                                                                                                                                       [68;1H~                                                                                                                                                                                                                                       [69;1H~                                                                                                                                                                                                                                       [70;1H~                                                                                                                                                                                                                                       [71;1H~                                                                                                                                                                                                                                       [72;1H~                                                                                                                                                                                                                                       [73;1H~                                                                                                                                                                                                                                       [74;1H~                                                                                                                                                                                                                                       [75;1H~                                                                                                                                                                                                                                       [76;1H~                                                                                                                                                                                                                                       [77;1H~                                                                                                                                                                                                                                       [78;1H~                                                                                                                                                                                                                                       [79;1H~                                                                                                                                                                                                                                       [80;1H~                                                                                                                                                                                                                                       [81;1H~                                                                                                                                                                                                                                       [82;1H~                                                                                                                                                                                                                                       [83;1H~                                                                                                                                                                                                                                       [84;1H~                                                                                                                                                                                                                                       [85;1H~                                                                                                                                                                                                                                       [86;1H~                                                                                                                                                                                                                                       [87;1H~                                                                                                                                                                                                                                       [88;1H~                                                                                                                                                                                                                                       [89;1H~                                                                                                                                                                                                                                       [90;1H~                                                                                                                                                                                                                                       [91;1H~                                                                                                                                                                                                                                       [92;1H~                                                                                                                                                                                                                                       [93;1H~                                                                                                                                                                                                                                       [94;1H~                                                                                                                                                                                                                                       [95;1H~                                                                                                                                                                                                                                       [96;1H~                                                                                                                                                                                                                                       [97;1H~                                                                                                                                                                                                                                       [98;1H~                                                                                                                                                                                                                                       [99;1H~                                                                                                                                                                                                                                       [100;1H~                                                                                                                                                                                                                                       [101;1H~                                                                                                                                                                                                                                       [102;1H~                                                                                                                                                                                                                                       [103;1H~                                                                                                                                                                                                                                       [104;1H~                                                                                                                                                                                                                                       [105;1H~                                                                                                                                                                                                                                       [106;1H~                                                                                                                                                                                                                                       [107;1H~                                                                                                                                                                                                                                       [108;1H~                                                                                                                                                                                                                                       [109;1H~                                                                                                                                                                                                                                       [110;1H~                                                                                                                                                                                                                                       [111;1H~                                                                                                                                                                                                                                       [112;1H~                                                                                                                                                                                                                                       [113;1H~                                                                                                                                                                                                                                       [114;1H~                                                                                                                                                                                                                                       [115;1H~                                                                                                                                                                                                                                       [0m[116;215H0,0-1[9CAll[1;1H[34h[?25h[?25l[116;1H[K[116;1H:[34h[?25hq[?25l[34h[?25h[?25l[116;1H[K[116;1H[?1l>[34h[?25h[?1049l(23:19 root@ip-10-1-1-199 monitoring-system) > 
(23:19 root@ip-10-1-1-199 monitoring-system) > 
(23:19 root@ip-10-1-1-199 monitoring-system) > 
(23:19 root@ip-10-1-1-199 monitoring-system) > 
(23:19 root@ip-10-1-1-199 monitoring-system) > 
(23:19 root@ip-10-1-1-199 monitoring-system) > clear
[H[J(23:19 root@ip-10-1-1-199 monitoring-system) > ls
[0m[01;32mcleanup_tables.sh[0m  [01;32mconvert_json_to_csv.py[0m  dynamodblib.pyc                          esc_main.pyc   [01;32mfetch_data_openvpn_mgmt.py[0m   health_data.json  openvpn-monitor.conf  portmanagerlib.pyc  [01;32mrest_server.py[0m   snmp_stat.pyc  typescript
config_loader.py   dict_compare.py         esc_health_data_2017_11_08_20_27_39.csv  esc_queue.py   fetch_data_openvpn_mgmt.pyc  iptablelib.py     port_info.txt         portmanager.pyc     rest_server.pyc  [01;32mtrap_v2c.py[0m
config_loader.pyc  dynamodblib.py          [01;32mesc_main.py[0m                              esc_queue.pyc  [01;32mgui_interface_app.py[0m         iptablelib.pyc    portmanagerlib.py     README.md           [01;32msnmp_stat.py[0m     trap_v2c.pyc
(23:19 root@ip-10-1-1-199 monitoring-system) > 
(23:19 root@ip-10-1-1-199 monitoring-system) > .esc[K[K[K[K./esc_main.py 
1
INFO: Using config file: ./openvpn-monitor.conf
Preparing DELETE >>>
			 Connected to MySQL database
Snmp stat handler
starting up on localhost port 10000
Created rest server handler
connecting to localhost port 10000
 !!!!!!!!!!!!!!!!!!!!!!!!!! 1 !!!!!!!!!!!!!!!!!!!!!!!!!!! 
{u'nclients': 7, u'bytesout': 114230674, u'bytesin': 32167496}
Waiting for a connection..
connection from ('127.0.0.1', 57844)
<socket._socketobject object at 0x2cffa60>
Waiting for a connection..
esc_sn015
<------ No notification ----->

esc_sn014
<------ No notification ----->

esc_sn023
<------ No notification ----->

esc_sn08
 * Running on http://100.61.0.1:8080/ (Press CTRL+C to quit)
<------ No notification ----->

esc_sn01
<------ No notification ----->

esc_sn029
<------ No notification ----->

esc_sn026
<------ No notification ----->

{u'esc_sn08': 4, u'esc_sn01': 5, u'esc_sn023': 3, u'esc_sn026': 7, u'esc_sn029': 6, u'esc_sn015': 1, u'esc_sn014': 2}
			 new connections in App.. please sync with Db
Preparing DELETE >>>
			 Connected to MySQL database
HB thread active are...
[u'esc_sn08', u'esc_sn01', u'esc_sn023', u'esc_sn026', u'esc_sn029', u'esc_sn015', u'esc_sn014']
PING 100.61.0.14 (100.61.0.14) 56(84) bytes of data.
64 bytes from 100.61.0.14: icmp_seq=1 ttl=64 time=772 ms

--- 100.61.0.14 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 772.850/772.850/772.850/0.000 ms
Comm is up 100.61.0.14
PING 100.61.0.34 (100.61.0.34) 56(84) bytes of data.

--- 100.61.0.34 ping statistics ---
1 packets transmitted, 0 received, 100% packet loss, time 0ms

No response from 100.61.0.34
PING 100.61.0.22 (100.61.0.22) 56(84) bytes of data.
100.61.0.22 - - [14/Nov/2017 23:19:44] "POST /upload/ HTTP/1.1" 200 -
64 bytes from 100.61.0.22: icmp_seq=1 ttl=64 time=164 ms

--- 100.61.0.22 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 164.926/164.926/164.926/0.000 ms
Comm is up 100.61.0.22
PING 100.61.0.30 (100.61.0.30) 56(84) bytes of data.
 !!!!!!!!!!!!!!!!!!!!!!!!!! 1 !!!!!!!!!!!!!!!!!!!!!!!!!!! 
{u'nclients': 7, u'bytesout': 114233151, u'bytesin': 32172062}
{u'esc_sn08': 4, u'esc_sn01': 5, u'esc_sn023': 3, u'esc_sn026': 7, u'esc_sn029': 6, u'esc_sn015': 1, u'esc_sn014': 2}
			 DB is in sync with App
HB thread active are...
[u'esc_sn08', u'esc_sn01', u'esc_sn023', u'esc_sn026', u'esc_sn029', u'esc_sn015', u'esc_sn014']
{"sensorId":"fed_esc_029","bandIndex":1,"bandInfo":{"timeStampHealthCheck":15311.572225,"sensor":{"agcGain":57,"gpioOverLoad":0,"gpioSPIvalue":0,"rmsAverage":17.691807,"agcMaxVal":125,"noiseRssiDbm":-86.264557,"dcI":-8,"dcQ":-16,"iqImbalanceGaindB":0,"iqImbalancePhaseDeg":0,"numDmaOverflows":0},"adiSettings":{"adiRxLoHz":3621504000,"adiTxLoHz":3571503998,"adiGainValue":57,"adiTxAttenutation":88000,"adiRxClockHz":49151999,"adiTxClockHz":49151999}},"hps":{"oneMinLoad":0,"memoryFreeKb":716896,"memoryTotalKb":763048,"upTime":15685,"cpuClockSpeed":0},"i2c":{"humidity":7.183838,"temperature":110.149597,"compass_x_axis":176,"compass_y_axis":-439,"compass_z_axis":22,"compassChange":0}}
--------------> 

(rest_server) Waiting for data...
Event is set
{'hps': {'memoryFreeKb': 716896, 'cpuClockSpeed': 0, 'upTime': 15685, 'oneMinLoad': 0, 'memoryTotalKb': 763048}, 'sensorId': 'fed_esc_029', 'i2c': {'compassChange': 0, 'temperature': 110.149597, 'humidity': 7.183838, 'compass_x_axis': 176, 'compass_y_axis': -439, 'compass_z_axis': 22}, 'bandIndex': 1, 'bandInfo': {'adiSettings': {'adiTxAttenutation': 88000, 'adiTxClockHz': 49151999, 'adiRxClockHz': 49151999, 'adiTxLoHz': 3571503998, 'adiGainValue': 57, 'adiRxLoHz': 3621504000}, 'sensor': {'noiseRssiDbm': -86.264557, 'rmsAverage': 17.691807, 'gpioOverLoad': 0, 'gpioSPIvalue': 0, 'dcI': -8, 'numDmaOverflows': 0, 'iqImbalanceGaindB': 0, 'iqImbalancePhaseDeg': 0, 'agcGain': 57, 'agcMaxVal': 125, 'dcQ': -16}, 'timeStampHealthCheck': 15311.572225}}
----------------------- rest_server_hdlr ---------------------

---> Window Stared <---
The conditional request failed
The conditional request failed
The conditional request failed
The conditional request failed
The conditional request failed
The conditional request failed
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.2.1 = fed_esc_029
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.3.1 = 1
'wrongType' at SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.4.1 = 15311
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.5.1 = 57
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.6.1 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.7.1 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.8.1 = 17.691807
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.9.1 = 125
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.10.1 = -86.264557
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.11.1 = -8
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.12.1 = -16
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.13.1 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.14.1 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.15.1 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.16.1 = 3621504000
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.17.1 = 3571503998
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.18.1 = 57
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.19.1 = 88000
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.20.1 = 49151999
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.21.1 = 49151999
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.22.1 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.23.1 = 716896
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.24.1 = 763048
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.25.1 = 15685
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.26.1 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.27.1 = 7.183838
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.28.1 = 110.149597
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.29.1 = 176
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.30.1 = -439
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.31.1 = 22
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.32.1 = 0
Event is set to False
Notification is scheduled to be sent
['fed_esc_029_1', 'fed_esc_029_2', 'fed_esc_029_3', 'fed_esc_029_4', 'fed_esc_029_5', 'fed_esc_029_6']
setItem succeeded:
100.61.0.26 - - [14/Nov/2017 23:19:48] "POST /upload/ HTTP/1.1" 200 -
08:timeout
01:timeout
23:timeout
26:timeout
15:timeout
14:timeout

--- 100.61.0.30 ping statistics ---
1 packets transmitted, 0 received, 100% packet loss, time 0ms

No response from 100.61.0.30
PING 100.61.0.10 (100.61.0.10) 56(84) bytes of data.
100.61.0.22 - - [14/Nov/2017 23:20:00] "POST /upload/ HTTP/1.1" 200 -
 !!!!!!!!!!!!!!!!!!!!!!!!!! 1 !!!!!!!!!!!!!!!!!!!!!!!!!!! 
{u'nclients': 7, u'bytesout': 114235496, u'bytesin': 32177916}
{u'esc_sn08': 4, u'esc_sn01': 5, u'esc_sn023': 3, u'esc_sn026': 7, u'esc_sn029': 6, u'esc_sn015': 1, u'esc_sn014': 2}
			 DB is in sync with App
HB thread active are...
[u'esc_sn08', u'esc_sn01', u'esc_sn023', u'esc_sn026', u'esc_sn029', u'esc_sn015', u'esc_sn014']

--- 100.61.0.10 ping statistics ---
1 packets transmitted, 0 received, 100% packet loss, time 0ms

No response from 100.61.0.10
PING 100.61.0.26 (100.61.0.26) 56(84) bytes of data.
64 bytes from 100.61.0.26: icmp_seq=1 ttl=64 time=699 ms

--- 100.61.0.26 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 699.120/699.120/699.120/0.000 ms
Comm is up 100.61.0.26
PING 100.61.0.18 (100.61.0.18) 56(84) bytes of data.
{"sensorId":"fed_esc_029","bandIndex":0,"bandInfo":{"timeStampHealthCheck":15331.325777,"sensor":{"agcGain":57,"gpioOverLoad":0,"gpioSPIvalue":0,"rmsAverage":18.055470,"agcMaxVal":123,"noiseRssiDbm":-86.087822,"dcI":-9,"dcQ":-16,"iqImbalanceGaindB":0,"iqImbalancePhaseDeg":0,"numDmaOverflows":0},"adiSettings":{"adiRxLoHz":3571503998,"adiTxLoHz":3571503998,"adiGainValue":57,"adiTxAttenutation":88000,"adiRxClockHz":49151999,"adiTxClockHz":49151999}},"hps":{"oneMinLoad":0,"memoryFreeKb":716896,"memoryTotalKb":763048,"upTime":15704,"cpuClockSpeed":0},"i2c":{"humidity":7.183838,"temperature":110.149597,"compass_x_axis":165,"compass_y_axis":-432,"compass_z_axis":30,"compassChange":0}}
--------------> 

(rest_server) Waiting for data...
Event is set
{'hps': {'memoryFreeKb': 716896, 'cpuClockSpeed': 0, 'upTime': 15704, 'oneMinLoad': 0, 'memoryTotalKb': 763048}, 'sensorId': 'fed_esc_029', 'i2c': {'compassChange': 0, 'temperature': 110.149597, 'humidity': 7.183838, 'compass_x_axis': 165, 'compass_y_axis': -432, 'compass_z_axis': 30}, 'bandIndex': 0, 'bandInfo': {'adiSettings': {'adiTxAttenutation': 88000, 'adiTxClockHz': 49151999, 'adiRxClockHz': 49151999, 'adiTxLoHz': 3571503998, 'adiGainValue': 57, 'adiRxLoHz': 3571503998}, 'sensor': {'noiseRssiDbm': -86.087822, 'rmsAverage': 18.05547, 'gpioOverLoad': 0, 'gpioSPIvalue': 0, 'dcI': -9, 'numDmaOverflows': 0, 'iqImbalanceGaindB': 0, 'iqImbalancePhaseDeg': 0, 'agcGain': 57, 'agcMaxVal': 123, 'dcQ': -16}, 'timeStampHealthCheck': 15331.325777}}
----------------------- rest_server_hdlr ---------------------

---> Window Stared <---

SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.2.0 = fed_esc_029
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.3.0 = 0
'wrongType' at SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.4.0 = 15331
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.5.0 = 57
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.6.0 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.7.0 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.8.0 = 18.05547
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.9.0 = 123
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.10.0 = -86.087822
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.11.0 = -9
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.12.0 = -16
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.13.0 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.14.0 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.15.0 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.16.0 = 3571503998
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.17.0 = 3571503998
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.18.0 = 57
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.19.0 = 88000
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.20.0 = 49151999
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.21.0 = 49151999
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.22.0 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.23.0 = 716896
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.24.0 = 763048
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.25.0 = 15704
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.26.0 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.27.0 = 7.183838
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.28.0 = 110.149597
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.29.0 = 165
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.30.0 = -432
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.31.0 = 30
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.32.0 = 0
Event is set to False
Notification is scheduled to be sent
['fed_esc_029_1', 'fed_esc_029_2', 'fed_esc_029_3', 'fed_esc_029_4', 'fed_esc_029_5', 'fed_esc_029_6']
setItem succeeded:
100.61.0.26 - - [14/Nov/2017 23:20:06] "POST /upload/ HTTP/1.1" 200 -
08:timeout
01:timeout
23:timeout
26:timeout
15:timeout
14:timeout

--- 100.61.0.18 ping statistics ---
1 packets transmitted, 0 received, 100% packet loss, time 0ms

No response from 100.61.0.18
100.61.0.22 - - [14/Nov/2017 23:20:16] "POST /upload/ HTTP/1.1" 200 -
PING 100.61.0.14 (100.61.0.14) 56(84) bytes of data.
64 bytes from 100.61.0.14: icmp_seq=1 ttl=64 time=445 ms

--- 100.61.0.14 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 445.832/445.832/445.832/0.000 ms
Comm is up 100.61.0.14
PING 100.61.0.34 (100.61.0.34) 56(84) bytes of data.
 !!!!!!!!!!!!!!!!!!!!!!!!!! 1 !!!!!!!!!!!!!!!!!!!!!!!!!!! 
{u'nclients': 7, u'bytesout': 114238621, u'bytesin': 32184407}
{u'esc_sn08': 4, u'esc_sn01': 5, u'esc_sn023': 3, u'esc_sn026': 7, u'esc_sn029': 6, u'esc_sn015': 1, u'esc_sn014': 2}
			 DB is in sync with App
HB thread active are...
[u'esc_sn08', u'esc_sn01', u'esc_sn023', u'esc_sn026', u'esc_sn029', u'esc_sn015', u'esc_sn014']
{"sensorId":"fed_esc_029","bandIndex":1,"bandInfo":{"timeStampHealthCheck":15348.471612,"sensor":{"agcGain":57,"gpioOverLoad":0,"gpioSPIvalue":0,"rmsAverage":17.663521,"agcMaxVal":124,"noiseRssiDbm":-86.278458,"dcI":-12,"dcQ":-16,"iqImbalanceGaindB":0,"iqImbalancePhaseDeg":0,"numDmaOverflows":0},"adiSettings":{"adiRxLoHz":3621504000,"adiTxLoHz":3571503998,"adiGainValue":57,"adiTxAttenutation":88000,"adiRxClockHz":49151999,"adiTxClockHz":49151999}},"hps":{"oneMinLoad":0,"memoryFreeKb":716896,"memoryTotalKb":763048,"upTime":15721,"cpuClockSpeed":0},"i2c":{"humidity":7.183838,"temperature":110.258362,"compass_x_axis":168,"compass_y_axis":-433,"compass_z_axis":27,"compassChange":0}}
--------------> 

(rest_server) Waiting for data...
Event is set
{'hps': {'memoryFreeKb': 716896, 'cpuClockSpeed': 0, 'upTime': 15721, 'oneMinLoad': 0, 'memoryTotalKb': 763048}, 'sensorId': 'fed_esc_029', 'i2c': {'compassChange': 0, 'temperature': 110.258362, 'humidity': 7.183838, 'compass_x_axis': 168, 'compass_y_axis': -433, 'compass_z_axis': 27}, 'bandIndex': 1, 'bandInfo': {'adiSettings': {'adiTxAttenutation': 88000, 'adiTxClockHz': 49151999, 'adiRxClockHz': 49151999, 'adiTxLoHz': 3571503998, 'adiGainValue': 57, 'adiRxLoHz': 3621504000}, 'sensor': {'noiseRssiDbm': -86.278458, 'rmsAverage': 17.663521, 'gpioOverLoad': 0, 'gpioSPIvalue': 0, 'dcI': -12, 'numDmaOverflows': 0, 'iqImbalanceGaindB': 0, 'iqImbalancePhaseDeg': 0, 'agcGain': 57, 'agcMaxVal': 124, 'dcQ': -16}, 'timeStampHealthCheck': 15348.471612}}
----------------------- rest_server_hdlr ---------------------

---> Window Stared <---

SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.2.1 = fed_esc_029
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.3.1 = 1
'wrongType' at SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.4.1 = 15348
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.5.1 = 57
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.6.1 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.7.1 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.8.1 = 17.663521
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.9.1 = 124
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.10.1 = -86.278458
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.11.1 = -12
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.12.1 = -16
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.13.1 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.14.1 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.15.1 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.16.1 = 3621504000
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.17.1 = 3571503998
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.18.1 = 57
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.19.1 = 88000
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.20.1 = 49151999
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.21.1 = 49151999
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.22.1 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.23.1 = 716896
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.24.1 = 763048
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.25.1 = 15721
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.26.1 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.27.1 = 7.183838
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.28.1 = 110.258362
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.29.1 = 168
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.30.1 = -433
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.31.1 = 27
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.32.1 = 0
Event is set to False
Notification is scheduled to be sent
['fed_esc_029_1', 'fed_esc_029_2', 'fed_esc_029_3', 'fed_esc_029_4', 'fed_esc_029_5', 'fed_esc_029_6']
setItem succeeded:
100.61.0.26 - - [14/Nov/2017 23:20:22] "POST /upload/ HTTP/1.1" 200 -

--- 100.61.0.34 ping statistics ---
1 packets transmitted, 0 received, 100% packet loss, time 0ms

No response from 100.61.0.34
PING 100.61.0.22 (100.61.0.22) 56(84) bytes of data.
64 bytes from 100.61.0.22: icmp_seq=1 ttl=64 time=274 ms

--- 100.61.0.22 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 274.228/274.228/274.228/0.000 ms
Comm is up 100.61.0.22
PING 100.61.0.30 (100.61.0.30) 56(84) bytes of data.
100.61.0.22 - - [14/Nov/2017 23:20:32] "POST /upload/ HTTP/1.1" 200 -
08:timeout
					No heart beat detcted for esc_sn08, raise a trap
Exception in thread esc_sn08:
Traceback (most recent call last):
  File "/usr/lib64/python2.7/threading.py", line 811, in __bootstrap_inner
    self.run()
  File "/usr/lib64/python2.7/threading.py", line 764, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/home/sarath/monitoring-system/esc_queue.py", line 178, in esc_sn08_Q_thread
    thread_list.pop(username)
TypeError: an integer is required

01:timeout
					No heart beat detcted for esc_sn01, raise a trap
Exception in thread esc_sn01:
Traceback (most recent call last):
  File "/usr/lib64/python2.7/threading.py", line 811, in __bootstrap_inner
    self.run()
  File "/usr/lib64/python2.7/threading.py", line 764, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/home/sarath/monitoring-system/esc_queue.py", line 82, in esc_sn01_Q_thread
    thread_list.pop(username)
TypeError: an integer is required

23:timeout
					No heart beat detcted for esc_sn023, raise a trap
Exception in thread esc_sn023:
Traceback (most recent call last):
  File "/usr/lib64/python2.7/threading.py", line 811, in __bootstrap_inner
    self.run()
  File "/usr/lib64/python2.7/threading.py", line 764, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/home/sarath/monitoring-system/esc_queue.py", line 120, in esc_sn023_Q_thread
    thread_list.pop(username)
TypeError: an integer is required

26:timeout
					No heart beat detcted for esc_sn026, raise a trap
Exception in thread esc_sn026:
Traceback (most recent call last):
  File "/usr/lib64/python2.7/threading.py", line 811, in __bootstrap_inner
    self.run()
  File "/usr/lib64/python2.7/threading.py", line 764, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/home/sarath/monitoring-system/esc_queue.py", line 139, in esc_sn026_Q_thread
    thread_list.pop(username)
TypeError: an integer is required

15:timeout
					No heart beat detcted for esc_sn015, raise a trap
Exception in thread esc_sn015:
Traceback (most recent call last):
  File "/usr/lib64/python2.7/threading.py", line 811, in __bootstrap_inner
    self.run()
  File "/usr/lib64/python2.7/threading.py", line 764, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/home/sarath/monitoring-system/esc_queue.py", line 101, in esc_sn015_Q_thread
    thread_list.pop(username)
TypeError: an integer is required

14:timeout
					No heart beat detcted for esc_sn014, raise a trap
Exception in thread esc_sn014:
Traceback (most recent call last):
  File "/usr/lib64/python2.7/threading.py", line 811, in __bootstrap_inner
    self.run()
  File "/usr/lib64/python2.7/threading.py", line 764, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/home/sarath/monitoring-system/esc_queue.py", line 62, in esc_sn014_Q_thread
    thread_list.pop(username)
TypeError: an integer is required

 !!!!!!!!!!!!!!!!!!!!!!!!!! 1 !!!!!!!!!!!!!!!!!!!!!!!!!!! 
{u'nclients': 7, u'bytesout': 114241418, u'bytesin': 32192347}
{u'esc_sn08': 4, u'esc_sn01': 5, u'esc_sn023': 3, u'esc_sn026': 7, u'esc_sn029': 6, u'esc_sn015': 1, u'esc_sn014': 2}
			 DB is in sync with App
HB thread active are...
[u'esc_sn08', u'esc_sn01', u'esc_sn023', u'esc_sn026', u'esc_sn029', u'esc_sn015', u'esc_sn014']

--- 100.61.0.30 ping statistics ---
1 packets transmitted, 0 received, 100% packet loss, time 0ms

No response from 100.61.0.30
PING 100.61.0.10 (100.61.0.10) 56(84) bytes of data.
29:timeout
{"sensorId":"fed_esc_029","bandIndex":0,"bandInfo":{"timeStampHealthCheck":15364.882156,"sensor":{"agcGain":57,"gpioOverLoad":0,"gpioSPIvalue":0,"rmsAverage":18.055470,"agcMaxVal":254,"noiseRssiDbm":-86.087822,"dcI":-6,"dcQ":-16,"iqImbalanceGaindB":0,"iqImbalancePhaseDeg":0,"numDmaOverflows":0},"adiSettings":{"adiRxLoHz":3571503998,"adiTxLoHz":3571503998,"adiGainValue":57,"adiTxAttenutation":88000,"adiRxClockHz":49151999,"adiTxClockHz":49151999}},"hps":{"oneMinLoad":0,"memoryFreeKb":716896,"memoryTotalKb":763048,"upTime":15742,"cpuClockSpeed":0},"i2c":{"humidity":7.183838,"temperature":110.403381,"compass_x_axis":162,"compass_y_axis":-432,"compass_z_axis":34,"compassChange":0}}
--------------> 

(rest_server) Waiting for data...
Event is set
{'hps': {'memoryFreeKb': 716896, 'cpuClockSpeed': 0, 'upTime': 15742, 'oneMinLoad': 0, 'memoryTotalKb': 763048}, 'sensorId': 'fed_esc_029', 'i2c': {'compassChange': 0, 'temperature': 110.403381, 'humidity': 7.183838, 'compass_x_axis': 162, 'compass_y_axis': -432, 'compass_z_axis': 34}, 'bandIndex': 0, 'bandInfo': {'adiSettings': {'adiTxAttenutation': 88000, 'adiTxClockHz': 49151999, 'adiRxClockHz': 49151999, 'adiTxLoHz': 3571503998, 'adiGainValue': 57, 'adiRxLoHz': 3571503998}, 'sensor': {'noiseRssiDbm': -86.087822, 'rmsAverage': 18.05547, 'gpioOverLoad': 0, 'gpioSPIvalue': 0, 'dcI': -6, 'numDmaOverflows': 0, 'iqImbalanceGaindB': 0, 'iqImbalancePhaseDeg': 0, 'agcGain': 57, 'agcMaxVal': 254, 'dcQ': -16}, 'timeStampHealthCheck': 15364.882156}}
----------------------- rest_server_hdlr ---------------------

---> Window Stared <---

SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.2.0 = fed_esc_029
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.3.0 = 0
'wrongType' at SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.4.0 = 15364
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.5.0 = 57
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.6.0 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.7.0 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.8.0 = 18.05547
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.9.0 = 254
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.10.0 = -86.087822
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.11.0 = -6
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.12.0 = -16
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.13.0 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.14.0 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.15.0 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.16.0 = 3571503998
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.17.0 = 3571503998
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.18.0 = 57
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.19.0 = 88000
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.20.0 = 49151999
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.21.0 = 49151999
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.22.0 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.23.0 = 716896
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.24.0 = 763048
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.25.0 = 15742
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.26.0 = 0
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.27.0 = 7.183838
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.28.0 = 110.403381
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.29.0 = 162
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.30.0 = -432
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.31.0 = 34
SNMPv2-SMI::enterprises.8072.2.7.1.1.3.1.32.0 = 0
Event is set to False
Notification is scheduled to be sent
['fed_esc_029_1', 'fed_esc_029_2', 'fed_esc_029_3', 'fed_esc_029_4', 'fed_esc_029_5', 'fed_esc_029_6']
setItem succeeded:
100.61.0.26 - - [14/Nov/2017 23:20:45] "POST /upload/ HTTP/1.1" 200 -

--- 100.61.0.10 ping statistics ---
1 packets transmitted, 0 received, 100% packet loss, time 0ms

No response from 100.61.0.10
PING 100.61.0.26 (100.61.0.26) 56(84) bytes of data.
64 bytes from 100.61.0.26: icmp_seq=1 ttl=64 time=86.8 ms

--- 100.61.0.26 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 86.807/86.807/86.807/0.000 ms
Comm is up 100.61.0.26
PING 100.61.0.18 (100.61.0.18) 56(84) bytes of data.
100.61.0.22 - - [14/Nov/2017 23:20:48] "POST /upload/ HTTP/1.1" 200 -
 !!!!!!!!!!!!!!!!!!!!!!!!!! 1 !!!!!!!!!!!!!!!!!!!!!!!!!!! 
{u'nclients': 7, u'bytesout': 114244375, u'bytesin': 32197584}
{u'esc_sn08': 4, u'esc_sn01': 5, u'esc_sn023': 3, u'esc_sn026': 7, u'esc_sn029': 6, u'esc_sn015': 1, u'esc_sn014': 2}
			 DB is in sync with App
HB thread active are...
[u'esc_sn08', u'esc_sn01', u'esc_sn023', u'esc_sn026', u'esc_sn029', u'esc_sn015', u'esc_sn014']

--- 100.61.0.18 ping statistics ---
1 packets transmitted, 0 received, 100% packet loss, time 0ms

No response from 100.61.0.18
PING 100.61.0.14 (100.61.0.14) 56(84) bytes of data.
64 bytes from 100.61.0.14: icmp_seq=1 ttl=64 time=255 ms

--- 100.61.0.14 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 255.875/255.875/255.875/0.000 ms
Comm is up 100.61.0.14
PING 100.61.0.34 (100.61.0.34) 56(84) bytes of data.
^Z
[1]+  Stopped                 ./esc_main.py
(23:20 root@ip-10-1-1-199 monitoring-system) > 
(23:21 root@ip-10-1-1-199 monitoring-system) > 
(23:21 root@ip-10-1-1-199 monitoring-system) > 
(23:21 root@ip-10-1-1-199 monitoring-system) > ps -eaf 
UID        PID  PPID  C STIME TTY          TIME CMD
root         1     0  0 Nov12 ?        00:00:03 /usr/lib/systemd/systemd --switched-root --system --deserialize 20
root         2     0  0 Nov12 ?        00:00:00 [kthreadd]
root         3     2  0 Nov12 ?        00:00:00 [ksoftirqd/0]
root         5     2  0 Nov12 ?        00:00:00 [kworker/0:0H]
root         7     2  0 Nov12 ?        00:00:00 [migration/0]
root         8     2  0 Nov12 ?        00:00:00 [rcu_bh]
root         9     2  0 Nov12 ?        00:00:02 [rcu_sched]
root        10     2  0 Nov12 ?        00:00:00 [watchdog/0]
root        12     2  0 Nov12 ?        00:00:00 [kdevtmpfs]
root        13     2  0 Nov12 ?        00:00:00 [netns]
root        14     2  0 Nov12 ?        00:00:00 [xenwatch]
root        15     2  0 Nov12 ?        00:00:00 [xenbus]
root        17     2  0 Nov12 ?        00:00:00 [khungtaskd]
root        18     2  0 Nov12 ?        00:00:00 [writeback]
root        19     2  0 Nov12 ?        00:00:00 [kintegrityd]
root        20     2  0 Nov12 ?        00:00:00 [bioset]
root        21     2  0 Nov12 ?        00:00:00 [kblockd]
root        22     2  0 Nov12 ?        00:00:00 [md]
root        27     2  0 Nov12 ?        00:00:00 [kswapd0]
root        28     2  0 Nov12 ?        00:00:00 [ksmd]
root        29     2  0 Nov12 ?        00:00:00 [khugepaged]
root        30     2  0 Nov12 ?        00:00:00 [fsnotify_mark]
root        31     2  0 Nov12 ?        00:00:00 [crypto]
root        39     2  0 Nov12 ?        00:00:00 [kthrotld]
root        41     2  0 Nov12 ?        00:00:00 [kmpath_rdacd]
root        42     2  0 Nov12 ?        00:00:00 [kpsmoused]
root        44     2  0 Nov12 ?        00:00:00 [ipv6_addrconf]
root        63     2  0 Nov12 ?        00:00:00 [deferwq]
root       128     2  0 Nov12 ?        00:00:00 [kauditd]
root       181     2  0 Nov12 ?        00:00:00 [rpciod]
root       240     2  0 Nov12 ?        00:00:00 [kworker/u30:2]
root       243     2  0 Nov12 ?        00:00:00 [ata_sff]
root       244     2  0 Nov12 ?        00:00:00 [scsi_eh_0]
root       247     2  0 Nov12 ?        00:00:00 [scsi_tmf_0]
root       249     2  0 Nov12 ?        00:00:00 [scsi_eh_1]
root       251     2  0 Nov12 ?        00:00:00 [scsi_tmf_1]
root       269     2  0 Nov12 ?        00:00:00 [xfsalloc]
root       270     2  0 Nov12 ?        00:00:00 [xfs_mru_cache]
root       271     2  0 Nov12 ?        00:00:00 [xfs-buf/xvda1]
root       272     2  0 Nov12 ?        00:00:00 [xfs-data/xvda1]
root       273     2  0 Nov12 ?        00:00:00 [xfs-conv/xvda1]
root       274     2  0 Nov12 ?        00:00:00 [xfs-cil/xvda1]
root       275     2  0 Nov12 ?        00:00:00 [xfs-reclaim/xvd]
root       276     2  0 Nov12 ?        00:00:00 [xfs-log/xvda1]
root       277     2  0 Nov12 ?        00:00:00 [xfs-eofblocks/x]
root       278     2  0 Nov12 ?        00:00:25 [xfsaild/xvda1]
root       354     1  0 Nov12 ?        00:05:12 /usr/lib/systemd/systemd-journald
root       390     1  0 Nov12 ?        00:00:00 /usr/lib/systemd/systemd-udevd
root       435     1  0 Nov12 ?        00:00:00 /sbin/auditd -n
root       458     2  0 Nov12 ?        00:00:00 [ttm_swap]
polkitd    488     1  0 Nov12 ?        00:00:00 /usr/lib/polkit-1/polkitd --no-debug
dbus       493     1  0 Nov12 ?        00:00:00 /bin/dbus-daemon --system --address=systemd: --nofork --nopidfile --systemd-activation
root       507     1  0 Nov12 ?        00:00:00 /usr/lib/systemd/systemd-logind
chrony     515     1  0 Nov12 ?        00:00:00 /usr/sbin/chronyd
root       531     1  0 Nov12 ?        00:00:00 /usr/sbin/gssproxy -D
root       542     1  0 Nov12 tty1     00:00:00 /sbin/agetty --noclear tty1 linux
root       544     1  0 Nov12 ttyS0    00:00:00 /sbin/agetty --keep-baud 115200 38400 9600 ttyS0 vt220
root       553     1  0 Nov12 ?        00:00:00 /usr/sbin/crond -n
root       684     2  0 Nov12 ?        00:00:00 [kworker/0:1H]
root       729     1  0 Nov12 ?        00:00:00 /sbin/dhclient -H ip-10-1-1-199 -q -lf /var/lib/dhclient/dhclient--eth0.lease -pf /var/run/dhclient-eth0.pid eth0
root       770     1  0 Nov12 ?        00:02:43 /usr/sbin/rsyslogd -n
root       772     1  0 Nov12 ?        00:00:00 /usr/sbin/sshd -D
root       773     1  0 Nov12 ?        00:00:27 /usr/sbin/openvpn --cd /etc/openvpn/ --config server.conf
root       788     1  0 Nov12 ?        00:00:12 /usr/bin/python -Es /usr/sbin/tuned -l -P
root      1135     1  0 Nov12 ?        00:00:00 /usr/libexec/postfix/master -w
postfix   1143  1135  0 Nov12 ?        00:00:00 qmgr -l -t unix -u
mysql     2003     1  0 Nov12 ?        00:00:00 /bin/sh /usr/bin/mysqld_safe --basedir=/usr
mysql     2225  2003  0 Nov12 ?        00:01:05 /usr/sbin/mysqld --basedir=/usr --datadir=/var/lib/mysql --plugin-dir=/usr/lib64/mysql/plugin --log-error=/var/log/mysqld.log --pid-file=/var/run/mysqld/mysqld.pid --socket=/var/lib/my
root      2355     1  0 Nov12 ?        00:08:00 /usr/bin/java -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -Djava.awt.headless=true -XX:CMSInitiatingOccupancyFraction=75 -XX:+UseCMSInitiatingOccupancyOnly -XX:+HeapDumpOnOutOfMemoryError
root      5245     1  0 Nov13 ?        00:00:03 SCREEN -S monitor_escs
root      5246  5245  0 Nov13 pts/1    00:00:00 bash
root      5247  5245  0 Nov13 pts/2    00:00:00 bash
root      5248  5245  0 Nov13 pts/3    00:00:00 bash
root      7361     1  0 Nov13 ?        00:00:00 SCREEN -S mysql.access
root      7362  7361  0 Nov13 pts/4    00:00:00 bash
root      7363  7361  0 Nov13 pts/6    00:00:00 bash
root      7364  7361  0 Nov13 pts/7    00:00:00 bash
root      8138     2  0 Nov13 ?        00:00:00 [kworker/u30:0]
root     10780   772  0 16:44 ?        00:00:00 sshd: centos [priv]
centos   10783 10780  0 16:44 ?        00:00:00 sshd: centos@pts/0
centos   10784 10783  0 16:44 pts/0    00:00:00 -bash
root     10806 10784  0 16:45 pts/0    00:00:00 sudo bash
root     10807 10806  0 16:45 pts/0    00:00:00 bash
root     12560 10807  0 18:28 pts/0    00:00:00 screen -x 7361.mysql.access
root     12565  7362  0 18:28 pts/4    00:00:00 mysql -u escmonit -p
root     12577   772  0 18:29 ?        00:00:00 sshd: centos [priv]
centos   12580 12577  0 18:29 ?        00:00:01 sshd: centos@pts/5
centos   12581 12580  0 18:29 pts/5    00:00:00 -bash
root     12604 12581  0 18:29 pts/5    00:00:00 sudo su
root     12605 12604  0 18:29 pts/5    00:00:00 su
root     12606 12605  0 18:29 pts/5    00:00:00 bash
root     12738 12606  0 18:30 pts/5    00:00:00 screen -x 5245.monitor_escs
root     15887     2  0 22:01 ?        00:00:00 [kworker/0:0]
postfix  16370  1135  0 22:29 ?        00:00:00 pickup -l -t unix -u
root     16785     2  0 23:01 ?        00:00:00 [kworker/0:1]
root     16863  5247  0 23:09 pts/2    00:00:00 script
root     16865 16863  0 23:09 pts/2    00:00:00 script
root     16866 16865  0 23:09 pts/8    00:00:00 bash -i
root     17153 16866  2 23:19 pts/8    00:00:02 python ./esc_main.py
root     17219 17153  0 23:20 pts/8    00:00:00 ping -c 1 100.61.0.34
root     17220 16866  0 23:21 pts/8    00:00:00 ps -eaf
(23:21 root@ip-10-1-1-199 monitoring-system) > kill -9 17153
(23:21 root@ip-10-1-1-199 monitoring-system) > [1]+  Killed                  ./esc_main.py

(23:21 root@ip-10-1-1-199 monitoring-system) > 
(23:21 root@ip-10-1-1-199 monitoring-system) > 
(23:21 root@ip-10-1-1-199 monitoring-system) > 
(23:21 root@ip-10-1-1-199 monitoring-system) > 
(23:21 root@ip-10-1-1-199 monitoring-system) > vim esc_queue.py
[?1049h[?1h=[1;116r[34l[34h[?25h[23m[24m[0m[H[J[?25l[116;1H"esc_queue.py" 182L, 5070C[1;1H[34m#!/usr/bin/env python[0m

[35mfrom[0m Queue [35mimport[0m Queue
[35mimport[0m threading

esc_sn01_Q= Queue()
esc_sn015_Q = Queue()
esc_sn023_Q = Queue()
esc_sn026_Q = Queue()
esc_sn029_Q = Queue()
esc_sn08_Q = Queue()
esc_sn014_Q = Queue()

thread_list=[]


[33mdef[0m [36mesc_thread_handler[0m(username):[18;9H[33mif[0m username == [31m'esc_sn014'[0m:[19;17Hesc_worker = threading.Thread(name=username, target=esc_sn014_Q_thread, args=(username,))[20;17Hesc_worker.setDaemon = [36mTrue[0m[21;17Hesc_worker.start()[22;9H[33mif[0m username == [31m'esc_sn029'[0m:[23;17Hesc_worker = threading.Thread(name=username, target=esc_sn029_Q_thread, args=(username,))[24;17Hesc_worker.setDaemon = [36mTrue[0m[25;17Hesc_worker.start()[26;9H[33mif[0m username == [31m'esc_sn026'[0m:[27;17Hesc_worker = threading.Thread(name=username, target=esc_sn026_Q_thread, args=(username,))[28;17Hesc_worker.setDaemon = [36mTrue[0m[29;17Hesc_worker.start()[30;9H[33mif[0m username == [31m'esc_sn023'[0m:[31;17Hesc_worker = threading.Thread(name=username, target=esc_sn023_Q_thread, args=(username,))[32;17Hesc_worker.setDaemon = [36mTrue[0m[33;17Hesc_worker.start()[34;9H[33mif[0m username == [31m'esc_sn015'[0m:[35;17Hesc_worker = threading.Thread(name=username, target=esc_sn015_Q_thread, args=(username,))[36;17Hesc_worker.setDaemon = [36mTrue[0m[37;17Hesc_worker.start()[38;9H[33mif[0m username == [31m'esc_sn01'[0m:[39;17Hesc_worker = threading.Thread(name=username, target=esc_sn01_Q_thread, args=(username,))[40;17Hesc_worker.setDaemon = [36mTrue[0m[41;17Hesc_worker.start()[42;9H[33mif[0m username == [31m'esc_sn08'[0m:[43;17Hesc_worker = threading.Thread(name=username, target=esc_sn08_Q_thread, args=(username,))[44;17Hesc_worker.setDaemon = [36mTrue[0m[45;17Hesc_worker.start()

[34m#o==================================o====================================o================================[0m
[33mdef[0m [36mesc_sn014_Q_thread[0m(username):[49;9Hthread_list.append(username)[50;9Hcounter=[31m0[0m[51;9H[33mwhile[0m [36mTrue[0m:[52;17H[33mtry[0m:[53;25Hhb = esc_sn014_Q.get([36mTrue[0m, [31m20[0m)[54;25H[33mif[0m hb:[55;29Hesc_sn014_Q.task_done()[56;17H[33mexcept[0m:[57;25H[36mprint[0m([31m"14:timeout"[0m)[58;25Hcounter = counter + [31m1[0m[59;25H[33mif[0m counter==[31m3[0m:[60;33Hcounter=[31m0[0m[61;33H[36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn014, raise a trap"[0m)[62;33Hthread_list.pop(username)[63;33H[33mbreak[64;25Helif[0m counter < [31m3[0m:[65;33H[33mcontinue[0m

[34m#o==================================o====================================o================================[0m
[33mdef[0m [36mesc_sn01_Q_thread[0m(username):[69;9Hthread_list.append(username)[70;9Hcounter=[31m0[0m[71;9H[33mwhile[0m [36mTrue[0m:[72;17H[33mtry[0m:[73;25Hhb = esc_sn01_Q.get([36mTrue[0m, [31m20[0m)[74;25H[33mif[0m hb:[75;29Hesc_sn01_Q.task_done()[76;17H[33mexcept[0m:[77;25H[36mprint[0m([31m"01:timeout"[0m)[78;25Hcounter = counter + [31m1[0m[79;25H[33mif[0m counter==[31m3[0m:[80;33Hcounter=[31m0[0m[81;33H[36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn01, raise a trap"[0m)[82;33Hthread_list.pop(username)[83;33H[33mbreak[84;25Helif[0m counter < [31m3[0m:[85;33H[33mcontinue[0m
[34m#o==================================o====================================o================================[0m
[33mdef[0m [36mesc_sn015_Q_thread[0m(username):[88;9Hthread_list.append(username)[89;9Hcounter=[31m0[0m[90;9H[33mwhile[0m [36mTrue[0m:[91;17H[33mtry[0m:[92;25Hhb = esc_sn015_Q.get([36mTrue[0m, [31m20[0m)[93;25H[33mif[0m hb:[94;29Hesc_sn015_Q.task_done()[95;17H[33mexcept[0m:[96;25H[36mprint[0m([31m"15:timeout"[0m)[97;25Hcounter = counter + [31m1[0m[98;25H[33mif[0m counter==[31m3[0m:[99;33Hcounter=[31m0[0m[100;33H[36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn015, raise a trap"[0m)[101;33Hthread_list.pop(username)[102;33H[33mbreak[103;25Helif[0m counter < [31m3[0m:[104;33H[33mcontinue[0m
[34m#o==================================o====================================o================================[0m
[33mdef[0m [36mesc_sn023_Q_thread[0m(username):[107;9Hthread_list.append(username)[108;9Hcounter=[31m0[0m[109;9H[33mwhile[0m [36mTrue[0m:[110;17H[33mtry[0m:[111;25Hhb = esc_sn023_Q.get([36mTrue[0m, [31m20[0m)[112;25H[33mif[0m hb:[113;29Hesc_sn023_Q.task_done()[114;17H[33mexcept[0m:[115;25H[36mprint[0m([31m"23:timeout"[0m)[116;215H20,3-17[7CTop[20;17H[34h[?25h[?25l[116;1H[K[116;1H:[34h[?25hv[?25l[34h[?25hs[?25l[34h[?25hp[?25l[34h[?25h[?25l [34h[?25he[?25l[34h[?25hs[?25l[34h[?25h...[?25lc_health_data_2017_11_08_20_27_39.csv[34h[?25h...[?25l[116;10Hmain.py[116;17H[K[116;17H[34h[?25h[?25l"esc_main.py" [116;15H[K[116;15H90L, 2450C[1;117H[7m|[2;117H|[0m
[35mimport[0m time            [93C[7m|[0m[4;8Hsys      [100C[7m|[0m
[35mimport[0m argparse[101C[7m|[0m
[35mimport[0m fetch_data_openvpn_mgmt [33mas[0m Mgmt[78C[7m|[0m
[35mimport[0m config_loader [33mas[0m cfgInst[85C[7m|[0m
[35mimport[0m Queue         [95C[7m|[0m
[35mimport[0m threading     [95C[7m|[0m
[35mimport[0m snmp_stat [33mas[0m snmpStat[88C[7m|[0m
[35mimport[0m rest_server [33mas[0m restSrv[87C[7m|[0m
                     [95C[7m|[0m
[35mimport[0m mysql.connector[94C[7m|[0m
[35mfrom[0m mysql.connector [35mimport[0m MySQLConnection, Error[66C[7m|[0m
interval=[31m15[0m[105C[7m|[16;117H|[0m
                                 [83C[7m|[0m
[33mdef[0m [36mprocess_data[0m():                [81C[7m|[0m
    [33mwhile[0m [36mTrue[0m:                                                                                          [11C[7m|[0m[20;13HMgmt.query_with_fetchnone([36mTrue[0m)[73C[7m|[0m[21;13Htime.sleep([31m1[0m)         [82C[7m|[0m[22;9H                           [81C[7m|[0m[23;17H                                                                                         [11C[7m|[0m
[33mdef[0m [36mconnect[0m():                             [73C[7m|[0m
    [33mtry[0m:[8C                  [82C[7m|[0m[26;9Hconn = mysql.connector.connect(host=[31m'localhost'[0m, database=[31m'escdb'[0m, user=[31m'escmonit'[0m, password=[31m'passcode'[0m)    [7m|[0m[27;9H[33mif[0m conn.is_connected():                                                                          [11C[7m|[0m[28;13H[36mprint[0m([31m'[0m[35m\t\t\t[0m[31m Connected to MySQL database'[0m)[61C[7m|[0m[29;13H[33mreturn[0m conn           [82C[7m|[0m[30;9H                           [81C[7m|[0m
    [33mexcept[0m Error [33mas[0m e:                                                                                   [11C[7m|[0m[32;9H[36mprint[0m(e)                           [73C[7m|[0m[33;17H                  [82C[7m|[0m[34;9H                           [81C[7m|[0m
[33mdef[0m [36mcleanup_db[0m():                                                                                        [11C[7m|[0m
    [36mprint[0m([31m"Preparing DELETE >>>"[0m)          [73C[7m|[0m
    conn = connect()              [82C[7m|[0m
    cursor = conn.cursor()        [82C[7m|[0m
    sql = [31m"DELETE FROM esc_tbl;"[0m                                                                        [12C[7m|[0m
    no_of_rows = cursor.execute(sql)       [73C[7m|[0m
    conn.commit()                 [82C[7m|[0m
    conn.close()                  [82C[7m|[0m
    cursor.close()                                                                                      [12C[7m|[0m[44;17H                           [73C[7m|[0m[45;17H                  [82C[7m|[0m
[33mdef[0m [36mmain[0m(**kwargs):[97C[7m|[0m
    argLen = [36mlen[0m(sys.argv)                                                                                [10C[7m|[0m
    [36mprint[0m(argLen)                [83C[7m|[0m
    cfg = cfgInst.ConfigLoader(args.config)[73C[7m|[0m
    cleanup_db() [99C[7m|[0m
    counter = [31m0[0m    [97C[7m|[0m
    tName = [31m"ping_worker"[0m[91C[7m|[0m
    threadID = [31m1[0m[8C                              [62C[7m|[0m
    [34m#start ping manager thread[0m[86C[7m|[0m
[34m#create threads[0m[13C                       [65C[7m|[0m
    t1 = threading.Thread(name=[31m'ping'[0m, target=process_data)[57C[7m|[0m
    t1.daemon = [36mTrue[0m                       [73C[7m|[0m
    t1.start()[10C                     [71C[7m|[0m
[34m#second thread[0m[10C              [78C[7m|[0m
    t2 = threading.Thread(name=[31m'snmp_stat'[0m, target=snmpStat.snmp_stat_hdlr)[41C[7m|[0m
    t2.daemon = [36mTrue[0m[12C                                                                    [16C[7m|[0m
    t2.start()[18C                         [59C[7m|[0m
[34m#rest server thread[0m[13C     [79C[7m|[0m
    t3 = threading.Thread(name=[31m'rest_server'[0m, target=restSrv.rest_server_hdlr)[38C[7m|[0m
    t3.daemon = [36mTrue[0m[12C        [76C[7m|[0m
    t3.start()[102C[7m|[0m
    [33mwhile[0m [36mTrue[0m:                                                                                           [10C[7m|[0m
        [36mprint[0m([31m" !!!!!!!!!!!!!!!!!!!!!!!!!! %d !!!!!!!!!!!!!!!!!!!!!!!!!!! "[0m %(counter+[31m1[0m))[27C[7m|[0m[69;9Hmonitor = Mgmt.OpenvpnMgmtInterface(cfg, **kwargs)[58C[7m|[0m[70;9Htime.sleep(interval)[88C[7m|[0m[71;9H           [97C[7m|[0m
[34m# ----------------------------------------------------------------[0m[50C[7m|[0m[73;25H                             [63C[7m|[0m
[33mdef[0m [36mget_args[0m():[9C      [86C[7m|[0m
    parser = argparse.ArgumentParser(             [66C[7m|[0m[76;9Hdescription=[31m'Display a html page with openvpn status and connections'[0m)[38C[7m|[0m
    parser.add_argument([31m'-d'[0m, [31m'--debug'[0m, action=[31m'store_true'[0m,[55C[7m|[0m[78;25Hrequired=[36mFalse[0m, default=[36mFalse[0m,[62C[7m|[0m[79;25H[36mhelp[0m=[31m'Run in debug mode'[0m)[67C[7m|[0m
    parser.add_argument([31m'-c'[0m, [31m'--config'[0m, [36mtype[0m=[36mstr[0m,[65C[7m|[0m[81;25Hrequired=[36mFalse[0m, default=[31m'./openvpn-monitor.conf'[0m,                          [17C[7m|[0m[82;25H[36mhelp[0m=[31m'Path to config file openvpn-monitor.conf'[0m)[44C[7m|[0m
    [33mreturn[0m parser.parse_args()       [79C[7m|[0m[84;25H                 [75C[7m|[0m
[34m# ----------------------------------------------------------------[0m[50C[7m|[0m
                                                                                                          [10C[7m|[0m
                                 [83C[7m|[0m
[33mif[0m __name__ == [31m'__main__'[0m:          [80C[7m|[0m
    args = get_args()[95C[7m|[0m
    main()         [97C[7m|[91;117H|[92;117H|[93;117H|[94;117H|[95;117H|[96;117H|[97;117H|[98;117H|[99;117H|[100;117H|[101;117H|[102;117H|[103;117H|[104;117H|[105;117H|[106;117H|[107;117H|[108;117H|[109;117H|[110;117H|[111;117H|[112;117H|[113;117H|[114;117H|[0m[91;1H[1m[34m~                                                                                                                   
~                                                                                                                   
~                                                                                                                   
~                                                                                                                   
~                                                                                                                   
~                                                                                                                   
~                                                                                                                   
~                                                                                                                   
~                                                                                                                   
~                                                                                                                   
~                                                                                                                   
~                                                                                                                   
~                                                                                                                   
~                                                                                                                   
~                                                                                                                   
~                                                                                                                   
~                                                                                                                   
~                                                                                                                   
~                                                                                                                   
~                                                                                                                   
~                                                                                                                   
~                                                                                                                   
~                                                                                                                   
~                                                                                                                   [0m
[1m[7mesc_main.py                                                                                       58,5           All [0m[1;118H[34m#!/usr/bin/env python[0m[3;118H[35mfrom[0m Queue [35mimport[0m Queue[4;118H[35mimport[0m threading[6;118Hesc_sn01_Q= Queue()[7;118Hesc_sn015_Q = Queue()[8;118Hesc_sn023_Q = Queue()[9;118Hesc_sn026_Q = Queue()[10;118Hesc_sn029_Q = Queue()[11;118Hesc_sn08_Q = Queue()[12;118Hesc_sn014_Q = Queue()[14;118Hthread_list=[][17;118H[33mdef[0m [36mesc_thread_handler[0m(username):[18;126H[33mif[0m username == [31m'esc_sn014'[0m:[19;134Hesc_worker = threading.Thread(name=username, target=esc_sn014_Q_thread, args=(username,))[20;134Hesc_worker.setDaemon = [36mTrue[0m[21;134Hesc_worker.start()[22;126H[33mif[0m username == [31m'esc_sn029'[0m:[23;134Hesc_worker = threading.Thread(name=username, target=esc_sn029_Q_thread, args=(username,))[24;134Hesc_worker.setDaemon = [36mTrue[0m[25;134Hesc_worker.start()[26;126H[33mif[0m username == [31m'esc_sn026'[0m:[27;134Hesc_worker = threading.Thread(name=username, target=esc_sn026_Q_thread, args=(username,))[28;134Hesc_worker.setDaemon = [36mTrue[0m[29;134Hesc_worker.start()[30;126H[33mif[0m username == [31m'esc_sn023'[0m:[31;134Hesc_worker = threading.Thread(name=username, target=esc_sn023_Q_thread, args=(username,))[32;134Hesc_worker.setDaemon = [36mTrue[0m[33;134Hesc_worker.start()[34;126H[33mif[0m username == [31m'esc_sn015'[0m:[35;134Hesc_worker = threading.Thread(name=username, target=esc_sn015_Q_thread, args=(username,))[36;134Hesc_worker.setDaemon = [36mTrue[0m[37;134Hesc_worker.start()[38;126H[33mif[0m username == [31m'esc_sn01'[0m:[39;134Hesc_worker = threading.Thread(name=username, target=esc_sn01_Q_thread, args=(username,))[40;134Hesc_worker.setDaemon = [36mTrue[0m[41;134Hesc_worker.start()[42;126H[33mif[0m username == [31m'esc_sn08'[0m:[43;134Hesc_worker = threading.Thread(name=username, target=esc_sn08_Q_thread, args=(username,))[44;134Hesc_worker.setDaemon = [36mTrue[0m[45;134Hesc_worker.start()[47;118H[34m#o==================================o====================================o================================[0m[48;118H[33mdef[0m [36mesc_sn014_Q_thread[0m(username):[49;126Hthread_list.append(username)[50;126Hcounter=[31m0[0m[51;126H[33mwhile[0m [36mTrue[0m:[52;134H[33mtry[0m:[53;142Hhb = esc_sn014_Q.get([36mTrue[0m, [31m20[0m)[54;142H[33mif[0m hb:[55;146Hesc_sn014_Q.task_done()[56;134H[33mexcept[0m:[57;142H[36mprint[0m([31m"14:timeout"[0m)[58;142Hcounter = counter + [31m1[0m[59;142H[33mif[0m counter==[31m3[0m:[60;150Hcounter=[31m0[0m[61;150H[36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn014, raise a trap"[0m)[62;150Hthread_list.pop(username)[63;150H[33mbreak[64;142Helif[0m counter < [31m3[0m:[65;150H[33mcontinue[0m[67;118H[34m#o==================================o====================================o================================[0m[68;118H[33mdef[0m [36mesc_sn01_Q_thread[0m(username):[69;126Hthread_list.append(username)[70;126Hcounter=[31m0[0m[71;126H[33mwhile[0m [36mTrue[0m:[72;134H[33mtry[0m:[73;142Hhb = esc_sn01_Q.get([36mTrue[0m, [31m20[0m)[74;142H[33mif[0m hb:[75;146Hesc_sn01_Q.task_done()[76;134H[33mexcept[0m:[77;142H[36mprint[0m([31m"01:timeout"[0m)[78;142Hcounter = counter + [31m1[0m[79;142H[33mif[0m counter==[31m3[0m:[80;150Hcounter=[31m0[0m[81;150H[36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn01, raise a trap"[0m)[82;150Hthread_list.pop(username)[83;150H[33mbreak[84;142Helif[0m counter < [31m3[0m:[85;150H[33mcontinue[0m[86;118H[34m#o==================================o====================================o================================[0m[87;118H[33mdef[0m [36mesc_sn015_Q_thread[0m(username):[88;126Hthread_list.append(username)[89;126Hcounter=[31m0[0m[90;126H[33mwhile[0m [36mTrue[0m:[91;134H[33mtry[0m:[92;142Hhb = esc_sn015_Q.get([36mTrue[0m, [31m20[0m)[93;142H[33mif[0m hb:[94;146Hesc_sn015_Q.task_done()[95;134H[33mexcept[0m:[96;142H[36mprint[0m([31m"15:timeout"[0m)[97;142Hcounter = counter + [31m1[0m[98;142H[33mif[0m counter==[31m3[0m:[99;150Hcounter=[31m0[0m[100;150H[36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn015, raise a trap"[0m)[101;150Hthread_list.pop(username)[102;150H[33mbreak[103;142Helif[0m counter < [31m3[0m:[104;150H[33mcontinue[0m[105;118H[34m#o==================================o====================================o================================[0m[106;118H[33mdef[0m [36mesc_sn023_Q_thread[0m(username):[107;126Hthread_list.append(username)[108;126Hcounter=[31m0[0m[109;126H[33mwhile[0m [36mTrue[0m:[110;134H[33mtry[0m:[111;142Hhb = esc_sn023_Q.get([36mTrue[0m, [31m20[0m)[112;142H[33mif[0m hb:[113;146Hesc_sn023_Q.task_done()[114;134H[33mexcept[0m:[115;118H[7mesc_queue.py                                                                                     20,3-17        Top[58;5H[34h[?25h[?25l[0m[115;100H[1m[7m9[59;5H[34h[?25h[?25l[115;99H60[60;5H[34h[?25h[?25l[115;100H1[61;5H[34h[?25h[?25l[115;100H0[60;5H[34h[?25h[?25l[115;99H59[59;5H[34h[?25h[?25l[115;100H8[58;5H[34h[?25h[?25l[115;100H7[57;5H[34h[?25h[?25l[115;100H6[56;5H[34h[?25h[?25l[115;100H5[55;5H[34h[?25h[?25l[115;100H4[54;5H[34h[?25h[?25l[115;100H3[53;5H[34h[?25h[?25l[115;100H2[52;5H[34h[?25h[?25l[115;100H1[51;5H[34h[?25h[?25l[115;100H0[50;5H[34h[?25h[?25l[115;99H49[49;5H[34h[?25h[?25l[115;100H8[48;5H[34h[?25h[?25l[115;100H7[47;5H[34h[?25h[?25l[115;100H6[46;5H[34h[?25h[?25l[115;100H5,0-1[45;1H[34h[?25h[?25l[115;100H4[44;1H[34h[?25h[?25l[115;100H3,5  [43;5H[34h[?25h[?25l[115;100H2[42;5H[34h[?25h[?25l[115;100H1[41;5H[34h[?25h[?25l[115;100H0[40;5H[34h[?25h[?25l[115;99H39[39;5H[34h[?25h[?25l[115;100H8[38;5H[34h[?25h[?25l[115;100H7[37;5H[34h[?25h[?25l[115;100H6[36;5H[34h[?25h[?25l[115;100H5[35;5H[34h[?25h[?25l[115;100H4,0-1[34;1H[34h[?25h[?25l[115;100H3[33;1H[34h[?25h[?25l[115;100H2,5  [32;5H[34h[?25h[?25l[115;100H1[31;5H[34h[?25h[?25l[115;100H0,0-1[30;1H[34h[?25h[?25l[115;99H29,5  [29;5H[34h[?25h[?25l[115;100H8[28;5H[34h[?25h[?25l[115;100H7[27;5H[34h[?25h[?25l[115;100H6[26;5H[34h[?25h[?25l[115;100H5[25;5H[34h[?25h[?25l[115;100H4[24;5H[34h[?25h[?25l[115;100H3,0-1[23;1H[34h[?25h[?25l[115;100H4,5  [24;5H[34h[?25h[?25l[115;102H4[24;4H[34h[?25h[?25l[115;102H3[24;3H[34h[?25h[?25l[115;102H2[24;2H[34h[?25h[?25l[115;102H1[24;1H[34h[?25h[?25l[0m[116;1H[1m-- VISUAL --[0m[116;13H[K[24;1H[34h[?25h[?25l[7m[33mdef[0m[7m [0m[7m[36mconnect[0m[7m(): [0m[115;100H[1m[7m5[25;1H[34h[?25h[?25l[0m[7m    [0m[7m[33mtry[0m[7m: [0m[115;100H[1m[7m6[26;1H[34h[?25h[?25l[0m[7m        conn = mysql.connector.connect(host=[0m[7m[31m'localhost'[0m[7m, database=[0m[7m[31m'escdb'[0m[7m, user=[0m[7m[31m'escmonit'[0m[7m, password=[0m[7m[31m'passcode'[0m[7m) [0m[115;100H[1m[7m7[27;1H[34h[?25h[?25l[0m[7m        [0m[7m[33mif[0m[7m conn.is_connected(): [0m[115;100H[1m[7m8[28;1H[34h[?25h[?25l[0m[7m            [0m[7m[36mprint[0m[7m([0m[7m[31m'[0m[7m[35m\t\t\t[0m[7m[31m Connected to MySQL database'[0m[7m) [0m[115;100H[1m[7m9[29;1H[34h[?25h[?25l[0m[7m            [0m[7m[33mreturn[0m[7m conn [0m[115;99H[1m[7m30,0-1[30;1H[34h[?25h[?25l[0m[7m [0m[115;100H[1m[7m1,1  [31;1H[34h[?25h[?25l[0m[7m    [0m[7m[33mexcept[0m[7m Error [0m[7m[33mas[0m[7m e: [0m[115;100H[1m[7m2[32;1H[34h[?25h[?25l[0m[7m        [0m[7m[36mprint[0m[7m(e) [0m[115;100H[1m[7m3,0-1[33;1H[34h[?25h[?25l[0m[24;1H[33mdef[0m [36mconnect[0m(): 
    [33mtry[0m: 
        conn = mysql.connector.connect(host=[31m'localhost'[0m, database=[31m'escdb'[0m, user=[31m'escmonit'[0m, password=[31m'passcode'[0m) 
        [33mif[0m conn.is_connected(): 
            [36mprint[0m([31m'[0m[35m\t\t\t[0m[31m Connected to MySQL database'[0m) 
            [33mreturn[0m conn 
 
    [33mexcept[0m Error [33mas[0m e: 
        [36mprint[0m(e) [116;1H[K[116;1H11 lines yanked[115;99H[1m[7m24,1  [24;1H[34h[?25h[0m[115;1H[7mesc_main.py                                                                                       [?25l24,1           All [0m[1m[7mesc_queue.py                                                                                     20,3-17        Top[20;134H[34h[?25h[?25l[115;215H19[19;134H[34h[?25h[?25l[115;216H8,10-17[18;134H[34h[?25h[?25l[115;216H7,17   [17;134H[34h[?25h[?25l[115;216H6,0-1[16;118H[34h[?25h[?25l[115;216H5[15;118H[34h[?25h[?25l[0m[116;2H0 more lines[116;14H[K[16;1H[117C                                                                                                                   [17;118H                                                                                                                   [18;118H                                                                                                                   [19;118H                                                                                                                   [20;118H                                                                                                                   [21;118H                                                                                                                   [22;118H                                                                                                                   [23;118H                                                                                                                   [24;118H                                                                                                                   [25;118H                                                                                                                   [26;118H                                                                                                                   [27;118H[33mdef[0m [36mesc_thread_handler[0m(username):                                                                                  [28;118H        [33mif[0m username == [31m'esc_sn014'[0m:                                                                                [29;118H                esc_worker = threading.Thread(name=username, target=esc_sn014_Q_thread, args=(username,))          [30;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [31;118H                esc_worker.start()                                                                                 [32;118H        [33mif[0m username == [31m'esc_sn029'[0m:                                                                                [33;118H                esc_worker = threading.Thread(name=username, target=esc_sn029_Q_thread, args=(username,))          [34;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [35;118H                esc_worker.start()                                                                                 [36;118H        [33mif[0m username == [31m'esc_sn026'[0m:                                                                                [37;118H                esc_worker = threading.Thread(name=username, target=esc_sn026_Q_thread, args=(username,))          [38;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [39;118H                esc_worker.start()                                                                                 [40;118H        [33mif[0m username == [31m'esc_sn023'[0m:                                                                                [41;118H                esc_worker = threading.Thread(name=username, target=esc_sn023_Q_thread, args=(username,))          [42;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [43;118H                esc_worker.start()                                                                                 [44;118H        [33mif[0m username == [31m'esc_sn015'[0m:                                                                                [45;118H                esc_worker = threading.Thread(name=username, target=esc_sn015_Q_thread, args=(username,))          [46;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [47;118H                esc_worker.start()                                                                                 [48;118H        [33mif[0m username == [31m'esc_sn01'[0m:                                                                                 [49;118H                esc_worker = threading.Thread(name=username, target=esc_sn01_Q_thread, args=(username,))           [50;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [51;118H                esc_worker.start()                                                                                 [52;118H        [33mif[0m username == [31m'esc_sn08'[0m:                                                                                 [53;118H                esc_worker = threading.Thread(name=username, target=esc_sn08_Q_thread, args=(username,))           [54;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [55;118H                esc_worker.start()                                                                                 [56;118H                                                                                                                   [57;118H[34m#o==================================o====================================o================================[0m         [58;118H[33mdef[0m [36mesc_sn014_Q_thread[0m(username):                                                                                  [59;118H        thread_list.append(username)                                                                               [60;118H        counter=[31m0[0m                                                                                                  [61;118H        [33mwhile[0m [36mTrue[0m:                                                                                                [62;118H                [33mtry[0m:                                                                                               [63;118H                        hb = esc_sn014_Q.get([36mTrue[0m, [31m20[0m)                                                             [64;118H                        [33mif[0m hb:                                                                                     [65;118H                            esc_sn014_Q.task_done()                                                                [66;118H                [33mexcept[0m:                                                                                            [67;118H                        [36mprint[0m([31m"14:timeout"[0m)                                                                        [68;118H                        counter = counter + [31m1[0m                                                                      [69;118H                        [33mif[0m counter==[31m3[0m:                                                                             [70;118H                                counter=[31m0[0m                                                                          [71;118H                                [36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn014, raise a trap"[0m)               [72;118H                                thread_list.pop(username)                                                          [73;118H                                [33mbreak[0m                                                                              [74;118H                        [33melif[0m counter < [31m3[0m:                                                                          [75;118H                                [33mcontinue[0m                                                                           [76;118H                                                                                                                   [77;118H[34m#o==================================o====================================o================================[0m         [78;118H[33mdef[0m [36mesc_sn01_Q_thread[0m(username):                                                                                   [79;118H        thread_list.append(username)                                                                               [80;118H        counter=[31m0[0m                                                                                                  [81;118H        [33mwhile[0m [36mTrue[0m:                                                                                                [82;118H                [33mtry[0m:                                                                                               [83;118H                        hb = esc_sn01_Q.get([36mTrue[0m, [31m20[0m)                                                              [84;118H                        [33mif[0m hb:                                                                                     [85;118H                            esc_sn01_Q.task_done()                                                                 [86;118H                [33mexcept[0m:                                                                                            [87;118H                        [36mprint[0m([31m"01:timeout"[0m)                                                                        [88;118H                        counter = counter + [31m1[0m                                                                      [89;118H                        [33mif[0m counter==[31m3[0m:                                                                             [90;118H                                counter=[31m0[0m                                                                          [91;118H                                [36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn01, raise a trap"[0m)                [92;118H                                thread_list.pop(username)                                                          [93;118H                                [33mbreak[0m                                                                              [94;118H                        [33melif[0m counter < [31m3[0m:                                                                          [95;118H                                [33mcontinue[0m                                                                           [96;118H[34m#o==================================o====================================o================================[0m         [97;118H[33mdef[0m [36mesc_sn015_Q_thread[0m(username):                                                                                  [98;118H        thread_list.append(username)                                                                               [99;118H        counter=[31m0[0m                                                                                                  [100;118H        [33mwhile[0m [36mTrue[0m:                                                                                                [101;118H                [33mtry[0m:                                                                                               [102;118H                        hb = esc_sn015_Q.get([36mTrue[0m, [31m20[0m)                                                             [103;118H                        [33mif[0m hb:                                                                                     [104;118H                            esc_sn015_Q.task_done()                                                                [105;118H                [33mexcept[0m:                                                                                            [106;118H                        [36mprint[0m([31m"15:timeout"[0m)                                                                        [107;118H                        counter = counter + [31m1[0m                                                                      [108;118H                        [33mif[0m counter==[31m3[0m:                                                                             [109;118H                                counter=[31m0[0m                                                                          [110;118H                                [36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn015, raise a trap"[0m)               [111;118H                                thread_list.pop(username)                                                          [112;118H                                [33mbreak[0m                                                                              [113;118H                        [33melif[0m counter < [31m3[0m:                                                                          [114;118H                                [33mcontinue[0m                                                                           [15;118H[33mdef[0m [36mconnect[0m():[16;122H[33mtry[0m:[17;126Hconn = mysql.connector.connect(host=[31m'localhost'[0m, database=[31m'escdb'[0m, user=[31m'escmonit'[0m, password=[31m'passcode'[0m)[18;126H[33mif[0m conn.is_connected():[19;130H[36mprint[0m([31m'[0m[35m\t\t\t[0m[31m Connected to MySQL database'[0m)[20;130H[33mreturn[0m conn[22;122H[33mexcept[0m Error [33mas[0m e:[23;126H[36mprint[0m(e)[115;131H[1m[7m[+][84C1  [0m[116;1H[K[116;1H10 more lines[15;118H[34h[?25h[?25l[115;216H[1m[7m4[14;118H[34h[?25h[?25l[0m[116;1H[1m-- INSERT --[0m[116;13H[K[15;1H[117C                                                                                                                   [16;118H[33mdef[0m [36mconnect[0m():                                                                                                     [17;118H    [33mtry[0m:                                                                                                           [18;118H        conn = mysql.connector.connect(host=[31m'localhost'[0m, database=[31m'escdb'[0m, user=[31m'escmonit'[0m, password=[31m'passcode'[0m)   [19;118H        [33mif[0m conn.is_connected():                                                                                    [20;118H            [36mprint[0m([31m'[0m[35m\t\t\t[0m[31m Connected to MySQL database'[0m)                                                            [21;118H            [33mreturn[0m conn                                                                                            [22;118H                                                                                                                   [23;118H    [33mexcept[0m Error [33mas[0m e:                                                                                             [24;118H        [36mprint[0m(e)                                                                                                   [25;118H                                                                                                                   [26;118H                                                                                                                   [27;118H                                                                                                                   [28;118H[33mdef[0m [36mesc_thread_handler[0m(username):                                                                                  [29;118H        [33mif[0m username == [31m'esc_sn014'[0m:                                                                                [30;118H                esc_worker = threading.Thread(name=username, target=esc_sn014_Q_thread, args=(username,))          [31;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [32;118H                esc_worker.start()                                                                                 [33;118H        [33mif[0m username == [31m'esc_sn029'[0m:                                                                                [34;118H                esc_worker = threading.Thread(name=username, target=esc_sn029_Q_thread, args=(username,))          [35;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [36;118H                esc_worker.start()                                                                                 [37;118H        [33mif[0m username == [31m'esc_sn026'[0m:                                                                                [38;118H                esc_worker = threading.Thread(name=username, target=esc_sn026_Q_thread, args=(username,))          [39;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [40;118H                esc_worker.start()                                                                                 [41;118H        [33mif[0m username == [31m'esc_sn023'[0m:                                                                                [42;118H                esc_worker = threading.Thread(name=username, target=esc_sn023_Q_thread, args=(username,))          [43;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [44;118H                esc_worker.start()                                                                                 [45;118H        [33mif[0m username == [31m'esc_sn015'[0m:                                                                                [46;118H                esc_worker = threading.Thread(name=username, target=esc_sn015_Q_thread, args=(username,))          [47;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [48;118H                esc_worker.start()                                                                                 [49;118H        [33mif[0m username == [31m'esc_sn01'[0m:                                                                                 [50;118H                esc_worker = threading.Thread(name=username, target=esc_sn01_Q_thread, args=(username,))           [51;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [52;118H                esc_worker.start()                                                                                 [53;118H        [33mif[0m username == [31m'esc_sn08'[0m:                                                                                 [54;118H                esc_worker = threading.Thread(name=username, target=esc_sn08_Q_thread, args=(username,))           [55;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [56;118H                esc_worker.start()                                                                                 [57;118H                                                                                                                   [58;118H[34m#o==================================o====================================o================================[0m         [59;118H[33mdef[0m [36mesc_sn014_Q_thread[0m(username):                                                                                  [60;118H        thread_list.append(username)                                                                               [61;118H        counter=[31m0[0m                                                                                                  [62;118H        [33mwhile[0m [36mTrue[0m:                                                                                                [63;118H                [33mtry[0m:                                                                                               [64;118H                        hb = esc_sn014_Q.get([36mTrue[0m, [31m20[0m)                                                             [65;118H                        [33mif[0m hb:                                                                                     [66;118H                            esc_sn014_Q.task_done()                                                                [67;118H                [33mexcept[0m:                                                                                            [68;118H                        [36mprint[0m([31m"14:timeout"[0m)                                                                        [69;118H                        counter = counter + [31m1[0m                                                                      [70;118H                        [33mif[0m counter==[31m3[0m:                                                                             [71;118H                                counter=[31m0[0m                                                                          [72;118H                                [36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn014, raise a trap"[0m)               [73;118H                                thread_list.pop(username)                                                          [74;118H                                [33mbreak[0m                                                                              [75;118H                        [33melif[0m counter < [31m3[0m:                                                                          [76;118H                                [33mcontinue[0m                                                                           [77;118H                                                                                                                   [78;118H[34m#o==================================o====================================o================================[0m         [79;118H[33mdef[0m [36mesc_sn01_Q_thread[0m(username):                                                                                   [80;118H        thread_list.append(username)                                                                               [81;118H        counter=[31m0[0m                                                                                                  [82;118H        [33mwhile[0m [36mTrue[0m:                                                                                                [83;118H                [33mtry[0m:                                                                                               [84;118H                        hb = esc_sn01_Q.get([36mTrue[0m, [31m20[0m)                                                              [85;118H                        [33mif[0m hb:                                                                                     [86;118H                            esc_sn01_Q.task_done()                                                                 [87;118H                [33mexcept[0m:                                                                                            [88;118H                        [36mprint[0m([31m"01:timeout"[0m)                                                                        [89;118H                        counter = counter + [31m1[0m                                                                      [90;118H                        [33mif[0m counter==[31m3[0m:                                                                             [91;118H                                counter=[31m0[0m                                                                          [92;118H                                [36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn01, raise a trap"[0m)                [93;118H                                thread_list.pop(username)                                                          [94;118H                                [33mbreak[0m                                                                              [95;118H                        [33melif[0m counter < [31m3[0m:                                                                          [96;118H                                [33mcontinue[0m                                                                           [97;118H[34m#o==================================o====================================o================================[0m         [98;118H[33mdef[0m [36mesc_sn015_Q_thread[0m(username):                                                                                  [99;118H        thread_list.append(username)                                                                               [100;118H        counter=[31m0[0m                                                                                                  [101;118H        [33mwhile[0m [36mTrue[0m:                                                                                                [102;118H                [33mtry[0m:                                                                                               [103;118H                        hb = esc_sn015_Q.get([36mTrue[0m, [31m20[0m)                                                             [104;118H                        [33mif[0m hb:                                                                                     [105;118H                            esc_sn015_Q.task_done()                                                                [106;118H                [33mexcept[0m:                                                                                            [107;118H                        [36mprint[0m([31m"15:timeout"[0m)                                                                        [108;118H                        counter = counter + [31m1[0m                                                                      [109;118H                        [33mif[0m counter==[31m3[0m:                                                                             [110;118H                                counter=[31m0[0m                                                                          [111;118H                                [36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn015, raise a trap"[0m)               [112;118H                                thread_list.pop(username)                                                          [113;118H                                [33mbreak[0m                                                                              [114;118H                        [33melif[0m counter < [31m3[0m:                                                                          [115;216H[1m[7m5[15;118H[34h[?25h[0m[116;1H[K[?25l[115;218H[1m[7m0-1[15;118H[34h[?25h[?25l[116;1H[0m:[34h[?25hw[?25l[34h[?25h[?25l"esc_queue.py" 193L, 5362C written[115;131H[1m[7m   [15;118H[34h[?25h[?25l[115;216H6,1  [16;118H[34h[?25h[?25l[115;216H7[17;118H[34h[?25h[?25l[115;216H8[18;118H[34h[?25h[?25l[115;216H9[19;118H[34h[?25h[?25l[115;215H20[20;118H[34h[?25h[?25l[115;216H1[21;118H[34h[?25h[?25l[115;216H2,0-1[22;118H[34h[?25h[?25l[115;216H3,1  [23;118H[34h[?25h[?25l[115;216H4[24;118H[34h[?25h[115;1Hesc_main.py                                                                                       [?25l24,1           All [0m[7mesc_queue.py                                                                                     24,1           Top[24;1H[34h[?25h[?25l[0m[115;100H[1m[7m3,0-1[23;1H[34h[?25h[?25l[115;100H2[22;1H[34h[?25h[?25l[115;100H1,1  [21;1H[34h[?25h[?25l[115;100H0[20;1H[34h[?25h[?25l[115;99H19[19;1H[34h[?25h[?25l[115;100H8[18;1H[34h[?25h[?25l[115;100H7,0-1[17;1H[34h[?25h[?25l[115;100H6[16;1H[34h[?25h[?25l[115;100H5,1  [15;1H[34h[?25h[?25l[115;100H4[14;1H[34h[?25h[?25l[115;100H3[13;1H[34h[?25h[0m[115;1H[7mesc_main.py                                                                                       [?25l13,1           All [0m[1m[7mesc_queue.py                                                                                     24,1           Top[24;118H[34h[?25h[?25l[115;216H3[23;118H[34h[?25h[?25l[115;216H2,0-1[22;118H[34h[?25h[?25l[115;216H1,1  [21;118H[34h[?25h[?25l[115;216H0[20;118H[34h[?25h[?25l[115;215H19[19;118H[34h[?25h[?25l[115;216H8[18;118H[34h[?25h[?25l[115;216H7[17;118H[34h[?25h[?25l[115;216H6[16;118H[34h[?25h[?25l[115;216H5,0-1[15;118H[34h[?25h[?25l[115;216H4,1  [14;118H[34h[?25h[?25l[115;216H3,0-1[13;118H[34h[?25h[?25l[115;216H2,1  [12;118H[34h[?25h[?25l[115;216H1[11;118H[34h[?25h[?25l[115;216H0[10;118H[34h[?25h[?25l[115;215H9,1 [9;118H[34h[?25h[?25l[115;215H8[8;118H[34h[?25h[?25l[115;215H7[7;118H[34h[?25h[?25l[115;215H6[6;118H[34h[?25h[?25l[115;215H5,0-1[5;118H[34h[?25h[?25l[115;215H4,1  [4;118H[34h[?25h[?25l[0m
[117C                                                                                                                   [6;118H                                                                                                                   [7;118H                                                                                                                   [8;118Hesc_sn01_Q= Queue()                                                                                                [9;118Hesc_sn015_Q = Queue()                                                                                              [10;118Hesc_sn023_Q = Queue()                                                                                              [11;118Hesc_sn026_Q = Queue()                                                                                              [12;118Hesc_sn029_Q = Queue()                                                                                              [13;118Hesc_sn08_Q = Queue()                                                                                               [14;118Hesc_sn014_Q = Queue()                                                                                              [15;118H                                                                                                                   [16;118Hthread_list=[]                                                                                                     [17;118H                                                                                                                   [18;118H[33mdef[0m [36mconnect[0m():                                                                                                     [19;118H    [33mtry[0m:                                                                                                           [20;118H        conn = mysql.connector.connect(host=[31m'localhost'[0m, database=[31m'escdb'[0m, user=[31m'escmonit'[0m, password=[31m'passcode'[0m)   [21;118H        [33mif[0m conn.is_connected():                                                                                    [22;118H            [36mprint[0m([31m'[0m[35m\t\t\t[0m[31m Connected to MySQL database'[0m)                                                            [23;118H            [33mreturn[0m conn                                                                                            [24;118H                                                                                                                   [25;118H    [33mexcept[0m Error [33mas[0m e:                                                                                             [26;118H        [36mprint[0m(e)                                                                                                   [27;118H                                                                                                                   [28;118H                                                                                                                   [29;118H                                                                                                                   [30;118H[33mdef[0m [36mesc_thread_handler[0m(username):                                                                                  [31;118H        [33mif[0m username == [31m'esc_sn014'[0m:                                                                                [32;118H                esc_worker = threading.Thread(name=username, target=esc_sn014_Q_thread, args=(username,))          [33;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [34;118H                esc_worker.start()                                                                                 [35;118H        [33mif[0m username == [31m'esc_sn029'[0m:                                                                                [36;118H                esc_worker = threading.Thread(name=username, target=esc_sn029_Q_thread, args=(username,))          [37;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [38;118H                esc_worker.start()                                                                                 [39;118H        [33mif[0m username == [31m'esc_sn026'[0m:                                                                                [40;118H                esc_worker = threading.Thread(name=username, target=esc_sn026_Q_thread, args=(username,))          [41;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [42;118H                esc_worker.start()                                                                                 [43;118H        [33mif[0m username == [31m'esc_sn023'[0m:                                                                                [44;118H                esc_worker = threading.Thread(name=username, target=esc_sn023_Q_thread, args=(username,))          [45;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [46;118H                esc_worker.start()                                                                                 [47;118H        [33mif[0m username == [31m'esc_sn015'[0m:                                                                                [48;118H                esc_worker = threading.Thread(name=username, target=esc_sn015_Q_thread, args=(username,))          [49;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [50;118H                esc_worker.start()                                                                                 [51;118H        [33mif[0m username == [31m'esc_sn01'[0m:                                                                                 [52;118H                esc_worker = threading.Thread(name=username, target=esc_sn01_Q_thread, args=(username,))           [53;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [54;118H                esc_worker.start()                                                                                 [55;118H        [33mif[0m username == [31m'esc_sn08'[0m:                                                                                 [56;118H                esc_worker = threading.Thread(name=username, target=esc_sn08_Q_thread, args=(username,))           [57;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [58;118H                esc_worker.start()                                                                                 [59;118H                                                                                                                   [60;118H[34m#o==================================o====================================o================================[0m         [61;118H[33mdef[0m [36mesc_sn014_Q_thread[0m(username):                                                                                  [62;118H        thread_list.append(username)                                                                               [63;118H        counter=[31m0[0m                                                                                                  [64;118H        [33mwhile[0m [36mTrue[0m:                                                                                                [65;118H                [33mtry[0m:                                                                                               [66;118H                        hb = esc_sn014_Q.get([36mTrue[0m, [31m20[0m)                                                             [67;118H                        [33mif[0m hb:                                                                                     [68;118H                            esc_sn014_Q.task_done()                                                                [69;118H                [33mexcept[0m:                                                                                            [70;118H                        [36mprint[0m([31m"14:timeout"[0m)                                                                        [71;118H                        counter = counter + [31m1[0m                                                                      [72;118H                        [33mif[0m counter==[31m3[0m:                                                                             [73;118H                                counter=[31m0[0m                                                                          [74;118H                                [36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn014, raise a trap"[0m)               [75;118H                                thread_list.pop(username)                                                          [76;118H                                [33mbreak[0m                                                                              [77;118H                        [33melif[0m counter < [31m3[0m:                                                                          [78;118H                                [33mcontinue[0m                                                                           [79;118H                                                                                                                   [80;118H[34m#o==================================o====================================o================================[0m         [81;118H[33mdef[0m [36mesc_sn01_Q_thread[0m(username):                                                                                   [82;118H        thread_list.append(username)                                                                               [83;118H        counter=[31m0[0m                                                                                                  [84;118H        [33mwhile[0m [36mTrue[0m:                                                                                                [85;118H                [33mtry[0m:                                                                                               [86;118H                        hb = esc_sn01_Q.get([36mTrue[0m, [31m20[0m)                                                              [87;118H                        [33mif[0m hb:                                                                                     [88;118H                            esc_sn01_Q.task_done()                                                                 [89;118H                [33mexcept[0m:                                                                                            [90;118H                        [36mprint[0m([31m"01:timeout"[0m)                                                                        [91;118H                        counter = counter + [31m1[0m                                                                      [92;118H                        [33mif[0m counter==[31m3[0m:                                                                             [93;118H                                counter=[31m0[0m                                                                          [94;118H                                [36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn01, raise a trap"[0m)                [95;118H                                thread_list.pop(username)                                                          [96;118H                                [33mbreak[0m                                                                              [97;118H                        [33melif[0m counter < [31m3[0m:                                                                          [98;118H                                [33mcontinue[0m                                                                           [99;118H[34m#o==================================o====================================o================================[0m         [100;118H[33mdef[0m [36mesc_sn015_Q_thread[0m(username):                                                                                  [101;118H        thread_list.append(username)                                                                               [102;118H        counter=[31m0[0m                                                                                                  [103;118H        [33mwhile[0m [36mTrue[0m:                                                                                                [104;118H                [33mtry[0m:                                                                                               [105;118H                        hb = esc_sn015_Q.get([36mTrue[0m, [31m20[0m)                                                             [106;118H                        [33mif[0m hb:                                                                                     [107;118H                            esc_sn015_Q.task_done()                                                                [108;118H                [33mexcept[0m:                                                                                            [109;118H                        [36mprint[0m([31m"15:timeout"[0m)                                                                        [110;118H                        counter = counter + [31m1[0m                                                                      [111;118H                        [33mif[0m counter==[31m3[0m:                                                                             [112;118H                                counter=[31m0[0m                                                                          [113;118H                                [36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn015, raise a trap"[0m)               [114;118H                                thread_list.pop(username)                                                          [5;118H[35mimport[0m mysql.connector[6;118H[35mfrom[0m mysql.connector [35mimport[0m MySQLConnection, Error[115;131H[1m[7m[+][81C5[0m[116;1H[K[5;118H[34h[?25h[?25l[116;1H:[34h[?25hw[?25l[34h[?25h[?25l"esc_queue.py" 195L, 5436C written[115;131H[1m[7m   [5;118H[34h[?25h[115;1Hesc_main.py                                                                                       [?25l13,1           All [0m[7mesc_queue.py                                                                                     5,1            Top[13;1H[34h[?25h[?25l[0m[116;1H[K[116;1H:[34h[?25he[?25l[34h[?25h[?25l [34h[?25hf[?25l[34h[?25he[?25l[34h[?25h...[?25ltch_data_openvpn_mgmt.py[34h[?25h[?25l"fetch_data_openvpn_mgmt.py" 603L, 21331C[2;1H[35mfrom[0m __future__ [35mimport[0m absolute_import
[35mfrom[0m __future__ [35mimport[0m division
[35mfrom[0m __future__ [35mimport[0m print_function
[35mfrom[0m __future__ [35mimport[0m unicode_literals
                                      
[33mtry[0m:                           
    [35mimport[0m ConfigParser [33mas[0m configparser
[33mexcept[0m [32mImportError[0m:
    [35mimport[0m configparser     
                             
[33mtry[0m:
    [35mfrom[0m ipaddr [35mimport[0m IPAddress [33mas[0m ip_address
    [35mfrom[0m ipaddr [35mimport[0m IPv6Address                
[33mexcept[0m [32mImportError[0m:
    [35mfrom[0m ipaddress [35mimport[0m ip_address, IPv6Address

[35mimport[0m subprocess  
[35mimport[0m socket  
[35mimport[0m re                                  
[35mimport[0m argparse          
[35mimport[0m GeoIP
[35mimport[0m sys
[35mimport[0m time, os
[35mimport[0m atexit
[35mimport[0m iptablelib                                                                                               
[35mimport[0m portmanagerlib          
[35mfrom[0m datetime [35mimport[0m datetime                          
[35mfrom[0m humanize [35mimport[0m naturalsize
[35mfrom[0m collections [35mimport[0m OrderedDict, deque
[35mfrom[0m pprint [35mimport[0m pformat
[35mfrom[0m semantic_version [35mimport[0m Version [33mas[0m semver
[35mimport[0m mysql.connector
[35mimport[0m esc_main [33mas[0m escMain
[35mimport[0m esc_queue [33mas[0m escQ
[35mfrom[0m mysql.connector [35mimport[0m MySQLConnection, Error
                    
[35mimport[0m boto3              
[33mglobal[0m workQueue                
                                    
[33mdef[0m [36mcleanup[0m():   
        [33mglobal[0m iptablelib
        iptables.deleteIpTable()

iptables = iptablelib.IpTablesLib([31m'100.61.0.1'[0m,[31m'10.1.1.199'[0m)
iptables.installIpTableNorth([31m'10.1.1.77'[0m,[31m8000[0m,[31m25000[0m)
portmanager = portmanagerlib.PortManager()
atexit.register(cleanup)
client  = boto3.client([31m'sns'[0m)              
                
interval=[31m15[0m    
                         
                
index_dict_buck1={}           
index_dict_buck2={}
                                                           
                    
[34m#__________________________________________________________________________________________________[0m
[33mdef[0m [36mget_deploy_status[0m(escID):
        conn = connect()                                                   
        cursor = conn.cursor()
        query = [31m"SELECT * from ESC_DEPLOY_INFO WHERE escName='%s'"[0m %(escID)
        cursor.execute(query)
        row = cursor.fetchone()                                               
[34m#[8, u'esc_sn015', u'FL005', 1, 72900015, 10000][0m
        deployStatus = ([36mlist[0m(row)[[31m3[0m])
[34m#decode the row and assign ssh port[0m[68;9Hconn.close()                                                                     [69;9Hcursor.close()                                    [70;9H[33mreturn[0m deployStatus [72;2H[34m__________________________________________________________________________________________________[0m
[33mdef[0m [36mverify_if_port_exists[0m(escID):
[34m#fetch the row from ESC_DEPLOY_INFO table;[0m
        conn = connect()             [76;9Hcursor = conn.cursor()                                                
        query = [31m"SELECT * from ESC_DEPLOY_INFO WHERE escName='%s'"[0m %(escID)[78;9Hcursor.execute(query)                         [79;9Hrow = cursor.fetchone()                  
[34m#decode the row and assign ssh port[0m                
[34m#[8, u'esc_sn015', u'FL005', 1, 72900015, 10000][0m                         [82;9HsshPort = ([36mlist[0m(row)[[31m5[0m])                                        
        [33mif[0m sshPort == [31m0[0m:      
[34m#assign SSH port number[0m
                sshPort = portmanager.getNextAvailablePort()      [86;9H[33melse[0m:[87;17HsshPort = portmanager.getNextAvailablePort()
        [34m#       query = "SELECT * from ESC_DEPLOY_INFO WHERE sshPort=%d" %(sshPort)[0m
        [34m#       cursor.execute(query)
#               row = cursor.fetchone()
#               while row is not None:[0m                                                                              
[34m#                       print(row)[0m                                                                                  
[34m#                       row = cursor.fetchone()[0m                                                                     
[34m#               count = cursor.rowcount[0m                                                                             
[34m#               print("---- ssh --- \n")[0m                                                                            
[34m#               print(count)[0m                                                                                        
                                                                                                                    
                                                                                                                    
[34m#update the table with new port number[0m                                                                              
        sql = [31m"UPDATE ESC_DEPLOY_INFO SET sshPort=%d WHERE escName='%s'"[0m %(sshPort, escID)                          
        cursor.execute(sql)                                                                                         
        conn.commit()                                                                                               
                                                                                                                    
        conn.close()                                                                                                
        cursor.close()                                                                                              
        [33mreturn[0m sshPort                                                                                              
[34m#__________________________________________________________________________________________________[0m                 
                                                                                                                    
[33mdef[0m [36mnotify_sms[0m(esc_id, siteID, escLabel):                                                                           
                                                                                                                    
        pySubject = [31m"Alert: ESC Deployed"[0m                                                                           
        pyMessage = [31m"ESC deployed successfully at site: "[0m + siteID + [31m"[0m[35m\n[0m[31m"[0m + [31m" ESC Label Number: "[0m +  escLabel + [31m"[0m[35m\n[0m[31m"[0m
        response = client.list_subscriptions_by_topic(                                                              
                        TopicArn=[31m'arn:aws:sns:us-west-2:796687173965:ESC_Deploy_Notification'[0m,                      
[1m[7mfetch_data_openvpn_mgmt.py[72C37,0-1[9CTop[37;1H[34h[?25h[?25l[115;100H8,1  [38;1H[34h[?25h[?25l[0m[116;1H[K[116;1H/[34h[?25hp[?25l[34h[?25hr[?25l[34h[?25he[?25l[34h[?25hp[?25l[34h[?25h[?25l[116;5H[K[116;5H[34h[?25h[?25l[116;4H[K[116;4H[34h[?25he[?25l[34h[?25hp[?25l[34h[?25ha[?25l[34h[?25hr[?25l[34h[?25he[?25l[34h[?25h[?25l[1;2H[34m__________________________________________________________________________________________________[0m
                                      
[33mdef[0m [36mnotify_email[0m(esc_id, siteID, escLabel):
                                     
        pySubject = [31m"Alert: ESC Deployed"[0m[6;9HpyMessage = [31m"ESC deployed successfully at site: "[0m + siteID + [31m"[0m[35m\n[0m[31m"[0m + [31m" ESC Label Number: "[0m +  escLabel + [31m"[0m[35m\n[0m[31m"[0m
        response = client.list_subscriptions_by_topic(
                        TopicArn=[31m'arn:aws:sns:us-west-2:796687173965:NotifyDeployment'[0m,
                        NextToken=[31m''[0m
                        )[11;9H[36mprint[0m(response)
        response = client.publish(
                        TopicArn=[31m'arn:aws:sns:us-west-2:796687173965:NotifyDeployment'[0m,
                        Message= pyMessage,
                        Subject= pySubject,
                        MessageStructure=[31m'Raw'[0m   [17;25H)
[34m#[0m                
[34m#__________________________________________________________________________________________________[0m
[33mif[0m sys.version_info[[31m0[0m] == [31m2[0m:
    [36mreload[0m(sys)
    sys.setdefaultencoding([31m'utf-8'[0m)
          
[34m#connect to MySQL database[0m
[33mdef[0m [36mconnect[0m():
    [33mtry[0m:         
        conn = mysql.connector.connect(host=[31m'localhost'[0m, database=[31m'escdb'[0m, user=[31m'escmonit'[0m, password=[31m'passcode'[0m)
        [33mif[0m conn.is_connected():
            [33mreturn[0m conn         
                                          
    [33mexcept[0m Error [33mas[0m e:    
        [36mprint[0m(e)                              
                      
[34m#__________________________________________________________________________________________________[0m
[33mdef[0m [36mupdate_database[0m(sessions, HbeatCount):
        conn = connect()                          [37;9Hcursor = conn.cursor()
        [33mfor[0m item [33min[0m sessions:
                session = sessions[item][40;17H[33mif[0m session [33mis[0m [36mNone[0m:
              [10C[33mcontinue[0m[42;9H        [34m#sql = "UPDATE esc_tbl SET TxBytes=%d, RxBytes=%d, LocalIp=%s, RemoteIp=%s, lastConnection=%s, CommS
tatus=%s, HeartBeatCount=%d, WHERE esc_name=%s" % \[44;17H#               (int(session['bytes_sent']), int(session['bytes_recv']), session['local_ip'], sessio
n['remote_ip'],session['connected_since'], "UP", 1, session['username'])[0m
                sql = [31m"UPDATE esc_tbl SET TxBytes=%d, RxBytes=%d, lastConnection='%s', HeartBeatCount=%d WHERE esc_n
ame='%s'"[0m %([36mint[0m(session[[31m'bytes_sent'[0m]), [36mint[0m(session[[31m'bytes_recv'[0m]),session[[31m'connected_since'[0m],HbeatCount, session[[31m'u
sername'[0m])              
                cursor.execute(sql)[50;17Hconn.commit()
        conn.close()[52;9Hcursor.close()

                   
                   
[34m#__________________________________________________________________________________________________[0m
[33mdef[0m [30m[43mprepare[0m[36m_insert_query[0m(sessions, flag):
        conn = connect()                                                                           
        cursor = conn.cursor()[60;9H[33mfor[0m item [33min[0m sessions:[61;9H        session = sessions[item][62;9H        [33mif[0m flag:                                                   [63;9H                escQ.esc_thread_handler(session[[31m'username'[0m])[64;9H        sql = [31m"INSERT INTO esc_tbl VALUES('%s', '%d', '%d', '%s', '%s', '%s', '%s', '%d')"[0m % [35m\[0m
                                                (session[[31m'username'[0m], [36mint[0m(session[[31m'bytes_sent'[0m]), [36mint[0m(session[[31m'bytes
_recv'[0m]), session[[31m'local_ip'[0m], session[[31m'remote_ip'[0m],session[[31m'connected_since'[0m], [31m"UP"[0m, [31m1[0m)
                no_of_rows = cursor.execute(sql)[68;9H        conn.commit()[69;10Honn.close()  [70;9Hcursor.close()     [73;5H[36mupdate_comm[0m(commStatus, HbeatCount, escId):
    conn = connect()                      
    cursor = conn.cursor()
    sql = [31m"UPDATE esc_tbl SET CommStatus='%s', HeartBeatCount=%d WHERE esc_name='%s'"[0m %(commStatus, HbeatCount, escI
d)                                                                         
    cursor.execute(sql)      
    conn.commit()              
    conn.close()                   
    cursor.close()                              [82;9H                        
[33mdef[0m [36mupdate_deploy_status[0m(status, escID):
    conn = connect()   
    cursor = conn.cursor()                                  
    sql = [31m"UPDATE ESC_DEPLOY_INFO SET deployStatus=%d WHERE esc_name='%s'"[0m %(status, escID)
    cursor.execute(sql)                                     
    conn.commit()                                                                  
    conn.close()                     
    cursor.close()                     
                                      
                                  [93;2H[34m__________________________________________________________________________________________________
#fetch number of rows[0m                  
[33mdef[0m [36mquery_with_fetchnone[0m(pingFlag):     
    count=[31m0[0m                 
    [33mtry[0m:[98;9Hconn = connect()
        cursor = conn.cursor()        [100;9Hcursor.execute([31m"SELECT * FROM esc_tbl"[0m)                                           [101;9H                   [102;9Hrow = cursor.fetchone()[104;9H[33mwhile[0m row [33mis[0m [33mnot[0m [36mNone[0m:
[34m#[u'esc_sn01', 36149, 39122, u'100.61.0.26', u'174.228.132.14', datetime.datetime(2017, 11, 8, 19, 35, 24), u'UP', u
'6'][0m                  
            address = ([36mlist[0m(row)[[31m3[0m])                                                               [108;13H[33mif[0m pingFlag:
                res = subprocess.call([[31m'ping'[0m, [31m'-c'[0m, [31m'1'[0m, address])[110;17H[33mif[0m res == [31m0[0m:[111;9H            [36mprint[0m([31m"Comm is up %s[0m[2C%(address))[112;9H        [33melse[0m:                                                                                               [113;9H            [36mprint[0m([31m"No response from %s"[0m %(address))[114;21Hstatus=[31m"DOWN"[0m                                                             [115;99H[1m[7m177,5[10C25%[57;5H[34h[?25h[?25l[115;103H4[57;4H[34h[?25h[?25l[115;103H3[57;3H[34h[?25h[?25l[115;103H2[57;2H[34h[?25h[?25l[115;103H1[57;1H[34h[?25h[?25l[0m[116;1H[1m-- VISUAL --[57;1H[34h[?25h[?25l[0m[7m[33mdef[0m[7m [0m[7m[36mprepare_insert_query[0m[7m(sessions, flag): 
       [0m[115;101H[1m[7m8,1-8[58;8H[34h[?25h[?25l[0m[7m conn = connect() 
       [0m[115;101H[1m[7m9[59;8H[34h[?25h[?25l[0m[7m cursor = conn.cursor() 
       [0m[115;100H[1m[7m80[60;8H[34h[?25h[?25l[0m[7m [0m[7m[33mfor[0m[7m item [0m[7m[33min[0m[7m sessions: 
       [0m[115;101H[1m[7m1[61;8H[34h[?25h[?25l[0m[7m         session = sessions[item] 
       [0m[115;101H[1m[7m2[62;8H[34h[?25h[?25l[0m[7m         [0m[7m[33mif[0m[7m flag: 
       [0m[115;101H[1m[7m3[63;8H[34h[?25h[?25l[0m[7m                 escQ.esc_thread_handler(session[[0m[7m[31m'username'[0m[7m]) 
       [0m[115;101H[1m[7m4[64;8H[34h[?25h[?25l[0m[7m         sql = [0m[7m[31m"INSERT INTO esc_tbl VALUES('%s', '%d', '%d', '%s', '%s', '%s', '%s', '%d')"[0m[7m % [0m[7m[35m\[0m[7m 
       [0m[115;101H[1m[7m5[65;8H[34h[?25h[?25l[0m[7m                                         (session[[0m[7m[31m'username'[0m[7m], [0m[7m[36mint[0m[7m(session[[0m[7m[31m'bytes_sent'[0m[7m]), [0m[7m[36mint[0m[7m(session[[0m[7m[31m'bytes
_recv'[0m[7m]), session[[0m[7m[31m'local_ip'[0m[7m], session[[0m[7m[31m'remote_ip'[0m[7m],session[[0m[7m[31m'connected_since'[0m[7m], [0m[7m[31m"UP"[0m[7m, [0m[7m[31m1[0m[7m) 
       [0m[115;101H[1m[7m6[67;8H[34h[?25h[?25l[0m[7m         no_of_rows = cursor.execute(sql) 
       [0m[115;101H[1m[7m7[68;8H[34h[?25h[?25l[0m[7m         conn.commit() 
       [0m[115;101H[1m[7m8[69;8H[34h[?25h[?25l[0m[7m conn.close() 
       [0m[115;101H[1m[7m9[70;8H[34h[?25h[?25l[0m[7m cursor.close() [0m[115;100H[1m[7m90,0-1[71;1H[34h[?25h[?25l[0m[57;1H[33mdef[0m [30m[43mprepare[0m[36m_insert_query[0m(sessions, flag): 
        conn = connect() 
        cursor = conn.cursor() 
        [33mfor[0m item [33min[0m sessions: 
                session = sessions[item] 
                [33mif[0m flag: 
                        escQ.esc_thread_handler(session[[31m'username'[0m]) 
                sql = [31m"INSERT INTO esc_tbl VALUES('%s', '%d', '%d', '%s', '%s', '%s', '%s', '%d')"[0m % [35m\[0m 
                                                (session[[31m'username'[0m], [36mint[0m(session[[31m'bytes_sent'[0m]), [36mint[0m(session[[31m'bytes
_recv'[0m]), session[[31m'local_ip'[0m], session[[31m'remote_ip'[0m],session[[31m'connected_since'[0m], [31m"UP"[0m, [31m1[0m) 
                no_of_rows = cursor.execute(sql) 
                conn.commit() 
        conn.close() 
        cursor.close() [116;1H[K[116;1H15 lines yanked[115;100H[1m[7m77,1  [57;1H[34h[?25h[0m[115;1H[7mfetch_data_openvpn_mgmt.py                                                                        [?25l177,1          25% [0m[1m[7mesc_queue.py                                                                                     5,1            Top[5;118H[34h[?25h[?25l[115;215H6[6;118H[34h[?25h[?25l[115;215H7,0-1[7;118H[34h[?25h[?25l[115;215H8,1  [8;118H[34h[?25h[?25l[115;215H9[9;118H[34h[?25h[?25l[115;215H10,1[10;118H[34h[?25h[?25l[115;216H1[11;118H[34h[?25h[?25l[115;216H2[12;118H[34h[?25h[?25l[115;216H3[13;118H[34h[?25h[?25l[115;216H4[14;118H[34h[?25h[?25l[115;216H5,0-1[15;118H[34h[?25h[?25l[115;216H6,1  [16;118H[34h[?25h[?25l[115;216H7,0-1[17;118H[34h[?25h[?25l[115;216H8,1  [18;118H[34h[?25h[?25l[115;216H9[19;118H[34h[?25h[?25l[115;215H20[20;118H[34h[?25h[?25l[115;216H1[21;118H[34h[?25h[?25l[115;216H2[22;118H[34h[?25h[?25l[115;216H3[23;118H[34h[?25h[?25l[115;216H4,0-1[24;118H[34h[?25h[?25l[115;216H5,1  [25;118H[34h[?25h[?25l[115;216H6[26;118H[34h[?25h[?25l[115;216H7,0-1[27;118H[34h[?25h[?25l[115;216H8[28;118H[34h[?25h[?25l[0m[116;2H4 more lines[116;14H[K[29;1H[117C                                                                                                                   [30;118H                                                                                                                   [31;118H                                                                                                                   [32;118H                                                                                                                   [33;118H                                                                                                                   [34;118H                                                                                                                   [35;118H                                                                                                                   [36;118H                                                                                                                   [37;118H                                                                                                                   [38;118H                                                                                                                   [39;118H                                                                                                                   [40;118H                                                                                                                   [41;118H                                                                                                                   [42;118H                                                                                                                   [43;118H                                                                                                                   [44;118H                                                                                                                   [45;118H[33mdef[0m [36mesc_thread_handler[0m(username):                                                                                  [46;118H        [33mif[0m username == [31m'esc_sn014'[0m:                                                                                [47;118H                esc_worker = threading.Thread(name=username, target=esc_sn014_Q_thread, args=(username,))          [48;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [49;118H                esc_worker.start()                                                                                 [50;118H        [33mif[0m username == [31m'esc_sn029'[0m:                                                                                [51;118H                esc_worker = threading.Thread(name=username, target=esc_sn029_Q_thread, args=(username,))          [52;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [53;118H                esc_worker.start()                                                                                 [54;118H        [33mif[0m username == [31m'esc_sn026'[0m:                                                                                [55;118H                esc_worker = threading.Thread(name=username, target=esc_sn026_Q_thread, args=(username,))          [56;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [57;118H                esc_worker.start()                                                                                 [58;118H        [33mif[0m username == [31m'esc_sn023'[0m:                                                                                [59;118H                esc_worker = threading.Thread(name=username, target=esc_sn023_Q_thread, args=(username,))          [60;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [61;118H                esc_worker.start()                                                                                 [62;118H        [33mif[0m username == [31m'esc_sn015'[0m:                                                                                [63;118H                esc_worker = threading.Thread(name=username, target=esc_sn015_Q_thread, args=(username,))          [64;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [65;118H                esc_worker.start()                                                                                 [66;118H        [33mif[0m username == [31m'esc_sn01'[0m:                                                                                 [67;118H                esc_worker = threading.Thread(name=username, target=esc_sn01_Q_thread, args=(username,))           [68;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [69;118H                esc_worker.start()                                                                                 [70;118H        [33mif[0m username == [31m'esc_sn08'[0m:                                                                                 [71;118H                esc_worker = threading.Thread(name=username, target=esc_sn08_Q_thread, args=(username,))           [72;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [73;118H                esc_worker.start()                                                                                 [74;118H                                                                                                                   [75;118H[34m#o==================================o====================================o================================[0m         [76;118H[33mdef[0m [36mesc_sn014_Q_thread[0m(username):                                                                                  [77;118H        thread_list.append(username)                                                                               [78;118H        counter=[31m0[0m                                                                                                  [79;118H        [33mwhile[0m [36mTrue[0m:                                                                                                [80;118H                [33mtry[0m:                                                                                               [81;118H                        hb = esc_sn014_Q.get([36mTrue[0m, [31m20[0m)                                                             [82;118H                        [33mif[0m hb:                                                                                     [83;118H                            esc_sn014_Q.task_done()                                                                [84;118H                [33mexcept[0m:                                                                                            [85;118H                        [36mprint[0m([31m"14:timeout"[0m)                                                                        [86;118H                        counter = counter + [31m1[0m                                                                      [87;118H                        [33mif[0m counter==[31m3[0m:                                                                             [88;118H                                counter=[31m0[0m                                                                          [89;118H                                [36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn014, raise a trap"[0m)               [90;118H                                thread_list.pop(username)                                                          [91;118H                                [33mbreak[0m                                                                              [92;118H                        [33melif[0m counter < [31m3[0m:                                                                          [93;118H                                [33mcontinue[0m                                                                           [94;118H                                                                                                                   [95;118H[34m#o==================================o====================================o================================[0m         [96;118H[33mdef[0m [36mesc_sn01_Q_thread[0m(username):                                                                                   [97;118H        thread_list.append(username)                                                                               [98;118H        counter=[31m0[0m                                                                                                  [99;118H        [33mwhile[0m [36mTrue[0m:                                                                                                [100;118H                [33mtry[0m:                                                                                               [101;118H                        hb = esc_sn01_Q.get([36mTrue[0m, [31m20[0m)                                                              [102;118H                        [33mif[0m hb:                                                                                     [103;118H                            esc_sn01_Q.task_done()                                                                 [104;118H                [33mexcept[0m:                                                                                            [105;118H                        [36mprint[0m([31m"01:timeout"[0m)                                                                        [106;118H                        counter = counter + [31m1[0m                                                                      [107;118H                        [33mif[0m counter==[31m3[0m:                                                                             [108;118H                                counter=[31m0[0m                                                                          [109;118H                                [36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn01, raise a trap"[0m)                [110;118H                                thread_list.pop(username)                                                          [111;118H                                [33mbreak[0m                                                                              [112;118H                        [33melif[0m counter < [31m3[0m:                                                                          [113;118H                                [33mcontinue[0m                                                                           [114;118H[34m#o==================================o====================================o================================[0m         [28;118H[33mdef[0m [30m[43mprepare[0m[36m_insert_query[0m(sessions, flag):[29;126Hconn = connect()[30;126Hcursor = conn.cursor()[31;126H[33mfor[0m item [33min[0m sessions:[32;134Hsession = sessions[item][33;134H[33mif[0m flag:[34;142HescQ.esc_thread_handler(session[[31m'username'[0m])[35;134Hsql = [31m"INSERT INTO esc_tbl VALUES('%s', '%d', '%d', '%s', '%s', '%s', '%s', '%d')"[0m % [35m\[0m[36;166H(session[[31m'username'[0m], [36mint[0m(session[[31m'bytes_sent'[0m]), [36mint[0m(session[[31m'byte[37;118Hs_recv'[0m]), session[[31m'local_ip'[0m], session[[31m'remote_ip'[0m],session[[31m'connected_since'[0m], [31m"UP"[0m, [31m1[0m)[38;134Hno_of_rows = cursor.execute(sql)[39;134Hconn.commit()[40;126Hconn.close()[41;126Hcursor.close()[115;131H[1m[7m[+][84C1  [0m[116;1H[K[116;1H14 more lines[28;118H[34h[?25h[?25l[116;1H[K[116;1H:[34h[?25hw[?25l[34h[?25h[?25l"esc_queue.py" 209L, 5963C written[115;131H[1m[7m   [28;118H[34h[?25h[?25l[115;216H9,1-8[29;125H[34h[?25h[?25l[115;215H30[30;125H[34h[?25h[?25l[115;216H1[31;125H[34h[?25h[?25l[115;216H2[32;125H[34h[?25h[?25l[115;216H3[33;125H[34h[?25h[?25l[115;216H4[34;125H[34h[?25h[?25l[115;216H5[35;125H[34h[?25h[?25l[115;216H6[36;125H[34h[?25h[?25l[115;216H7[38;125H[34h[?25h[?25l[115;216H8[39;125H[34h[?25h[?25l[115;216H9[40;125H[34h[?25h[?25l[115;215H40[41;125H[34h[?25h[?25l[115;216H1,0-1[42;118H[34h[?25h[?25l[115;216H2[43;118H[34h[?25h[?25l[115;216H3[44;118H[34h[?25h[?25l[115;216H4,1  [45;118H[34h[?25h[?25l[115;216H5,1-8[46;125H[34h[?25h[?25l[115;216H6[47;125H[34h[?25h[?25l[115;216H7[48;125H[34h[?25h[?25l[115;216H8[49;125H[34h[?25h[?25l[115;216H9[50;125H[34h[?25h[?25l[115;215H50[51;125H[34h[?25h[?25l[115;216H1[52;125H[34h[?25h[?25l[115;216H2[53;125H[34h[?25h[?25l[115;216H3[54;125H[34h[?25h[?25l[115;216H2[53;125H[34h[?25h[?25l[115;216H1[52;125H[34h[?25h[?25l[115;216H0[51;125H[34h[?25h[?25l[115;215H49[50;125H[34h[?25h[?25l[115;216H8[49;125H[34h[?25h[?25l[115;216H7[48;125H[34h[?25h[?25l[115;216H6[47;125H[34h[?25h[?25l[115;216H5[46;125H[34h[?25h[?25l[115;216H4,1  [45;118H[34h[?25h[?25l[115;216H3,0-1[44;118H[34h[?25h[?25l[115;216H2[43;118H[34h[?25h[?25l[115;216H1[42;118H[34h[?25h[?25l[115;216H0,1-8[41;125H[34h[?25h[?25l[115;215H39[40;125H[34h[?25h[?25l[115;216H8[39;125H[34h[?25h[?25l[115;216H7[38;125H[34h[?25h[?25l[115;216H6[36;125H[34h[?25h[?25l[115;216H5[35;125H[34h[?25h[?25l[115;216H4[34;125H[34h[?25h[?25l[115;216H3[33;125H[34h[?25h[?25l[115;216H2[32;125H[34h[?25h[?25l[115;216H1[31;125H[34h[?25h[?25l[115;216H0[30;125H[34h[?25h[?25l[115;216H1[31;125H[34h[?25h[?25l[115;218H2-9[31;126H[34h[?25h[?25l[0mitem [33min[0m sessions:[31;143H[K[115;131H[1m[7m[+][31;126H[34h[?25h[?25l[0m[31;126H[K[115;218H[1m[7m1-8[31;125H[34h[?25h[?25l[115;216H2[32;125H[34h[?25h[?25l[0m[32;118H                [33mif[0m flag:                                                                                           [33;118H                        escQ.esc_thread_handler(session[[31m'username'[0m])                                               [34;118H                sql = [31m"INSERT INTO esc_tbl VALUES('%s', '%d', '%d', '%s', '%s', '%s', '%s', '%d')"[0m % [35m\[0m             [35;118H                                                (session[[31m'username'[0m], [36mint[0m(session[[31m'bytes_sent'[0m]), [36mint[0m(session[[31m'byte[36;118Hs_recv'[0m]), session[[31m'local_ip'[0m], session[[31m'remote_ip'[0m],session[[31m'connected_since'[0m], [31m"UP"[0m, [31m1[0m)                          [37;118H                no_of_rows = cursor.execute(sql)                                                                   [38;118H                conn.commit()                                                                                      [39;118H        conn.close()                                                                                               [40;118H        cursor.close()                                                                                             [41;118H                                                                                                                   [42;118H                                                                                                                   [43;118H                                                                                                                   [44;118H[33mdef[0m [36mesc_thread_handler[0m(username):                                                                                  [45;118H        [33mif[0m username == [31m'esc_sn014'[0m:                                                                                [46;118H                esc_worker = threading.Thread(name=username, target=esc_sn014_Q_thread, args=(username,))          [47;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [48;118H                esc_worker.start()                                                                                 [49;118H        [33mif[0m username == [31m'esc_sn029'[0m:                                                                                [50;118H                esc_worker = threading.Thread(name=username, target=esc_sn029_Q_thread, args=(username,))          [51;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [52;118H                esc_worker.start()                                                                                 [53;118H        [33mif[0m username == [31m'esc_sn026'[0m:                                                                                [54;118H                esc_worker = threading.Thread(name=username, target=esc_sn026_Q_thread, args=(username,))          [55;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [56;118H                esc_worker.start()                                                                                 [57;118H        [33mif[0m username == [31m'esc_sn023'[0m:                                                                                [58;118H                esc_worker = threading.Thread(name=username, target=esc_sn023_Q_thread, args=(username,))          [59;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [60;118H                esc_worker.start()                                                                                 [61;118H        [33mif[0m username == [31m'esc_sn015'[0m:                                                                                [62;118H                esc_worker = threading.Thread(name=username, target=esc_sn015_Q_thread, args=(username,))          [63;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [64;118H                esc_worker.start()                                                                                 [65;118H        [33mif[0m username == [31m'esc_sn01'[0m:                                                                                 [66;118H                esc_worker = threading.Thread(name=username, target=esc_sn01_Q_thread, args=(username,))           [67;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [68;118H                esc_worker.start()                                                                                 [69;118H        [33mif[0m username == [31m'esc_sn08'[0m:                                                                                 [70;118H                esc_worker = threading.Thread(name=username, target=esc_sn08_Q_thread, args=(username,))           [71;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [72;118H                esc_worker.start()                                                                                 [73;118H                                                                                                                   [74;118H[34m#o==================================o====================================o================================[0m         [75;118H[33mdef[0m [36mesc_sn014_Q_thread[0m(username):                                                                                  [76;118H        thread_list.append(username)                                                                               [77;118H        counter=[31m0[0m                                                                                                  [78;118H        [33mwhile[0m [36mTrue[0m:                                                                                                [79;118H                [33mtry[0m:                                                                                               [80;118H                        hb = esc_sn014_Q.get([36mTrue[0m, [31m20[0m)                                                             [81;118H                        [33mif[0m hb:                                                                                     [82;118H                            esc_sn014_Q.task_done()                                                                [83;118H                [33mexcept[0m:                                                                                            [84;118H                        [36mprint[0m([31m"14:timeout"[0m)                                                                        [85;118H                        counter = counter + [31m1[0m                                                                      [86;118H                        [33mif[0m counter==[31m3[0m:                                                                             [87;118H                                counter=[31m0[0m                                                                          [88;118H                                [36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn014, raise a trap"[0m)               [89;118H                                thread_list.pop(username)                                                          [90;118H                                [33mbreak[0m                                                                              [91;118H                        [33melif[0m counter < [31m3[0m:                                                                          [92;118H                                [33mcontinue[0m                                                                           [93;118H                                                                                                                   [94;118H[34m#o==================================o====================================o================================[0m         [95;118H[33mdef[0m [36mesc_sn01_Q_thread[0m(username):                                                                                   [96;118H        thread_list.append(username)                                                                               [97;118H        counter=[31m0[0m                                                                                                  [98;118H        [33mwhile[0m [36mTrue[0m:                                                                                                [99;118H                [33mtry[0m:                                                                                               [100;118H                        hb = esc_sn01_Q.get([36mTrue[0m, [31m20[0m)                                                              [101;118H                        [33mif[0m hb:                                                                                     [102;118H                            esc_sn01_Q.task_done()                                                                 [103;118H                [33mexcept[0m:                                                                                            [104;118H                        [36mprint[0m([31m"01:timeout"[0m)                                                                        [105;118H                        counter = counter + [31m1[0m                                                                      [106;118H                        [33mif[0m counter==[31m3[0m:                                                                             [107;118H                                counter=[31m0[0m                                                                          [108;118H                                [36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn01, raise a trap"[0m)                [109;118H                                thread_list.pop(username)                                                          [110;118H                                [33mbreak[0m                                                                              [111;118H                        [33melif[0m counter < [31m3[0m:                                                                          [112;118H                                [33mcontinue[0m                                                                           [113;118H[34m#o==================================o====================================o================================[0m         [114;118H                                                                                                                   [114;118H[33mdef[0m [36mesc_sn015_Q_thread[0m(username):[116;1H[K[115;218H[1m[7m3-17[32;134H[34h[?25h[?25l[115;216H1,1-8 [31;125H[34h[?25h[?25l[115;218H0-1[31;118H[34h[?25h[?25l[115;216H2,1-8[32;125H[34h[?25h[?25l[115;216H1,0-1[31;118H[34h[?25h[?25l[0m                [33mif[0m flag:                                                                                           [32;118H                        escQ.esc_thread_handler(session[[31m'username'[0m])                                               [33;118H                sql = [31m"INSERT INTO esc_tbl VALUES('%s', '%d', '%d', '%s', '%s', '%s', '%s', '%d')"[0m % [35m\[0m             [34;118H                                                (session[[31m'username'[0m], [36mint[0m(session[[31m'bytes_sent'[0m]), [36mint[0m(session[[31m'byte[35;118Hs_recv'[0m]), session[[31m'local_ip'[0m], session[[31m'remote_ip'[0m],session[[31m'connected_since'[0m], [31m"UP"[0m, [31m1[0m)                          [36;118H                no_of_rows = cursor.execute(sql)                                                                   [37;118H                conn.commit()                                                                                      [38;118H        conn.close()                                                                                               [39;118H        cursor.close()                                                                                             [40;118H                                                                                                                   [41;118H                                                                                                                   [42;118H                                                                                                                   [43;118H[33mdef[0m [36mesc_thread_handler[0m(username):                                                                                  [44;118H        [33mif[0m username == [31m'esc_sn014'[0m:                                                                                [45;118H                esc_worker = threading.Thread(name=username, target=esc_sn014_Q_thread, args=(username,))          [46;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [47;118H                esc_worker.start()                                                                                 [48;118H        [33mif[0m username == [31m'esc_sn029'[0m:                                                                                [49;118H                esc_worker = threading.Thread(name=username, target=esc_sn029_Q_thread, args=(username,))          [50;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [51;118H                esc_worker.start()                                                                                 [52;118H        [33mif[0m username == [31m'esc_sn026'[0m:                                                                                [53;118H                esc_worker = threading.Thread(name=username, target=esc_sn026_Q_thread, args=(username,))          [54;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [55;118H                esc_worker.start()                                                                                 [56;118H        [33mif[0m username == [31m'esc_sn023'[0m:                                                                                [57;118H                esc_worker = threading.Thread(name=username, target=esc_sn023_Q_thread, args=(username,))          [58;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [59;118H                esc_worker.start()                                                                                 [60;118H        [33mif[0m username == [31m'esc_sn015'[0m:                                                                                [61;118H                esc_worker = threading.Thread(name=username, target=esc_sn015_Q_thread, args=(username,))          [62;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [63;118H                esc_worker.start()                                                                                 [64;118H        [33mif[0m username == [31m'esc_sn01'[0m:                                                                                 [65;118H                esc_worker = threading.Thread(name=username, target=esc_sn01_Q_thread, args=(username,))           [66;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [67;118H                esc_worker.start()                                                                                 [68;118H        [33mif[0m username == [31m'esc_sn08'[0m:                                                                                 [69;118H                esc_worker = threading.Thread(name=username, target=esc_sn08_Q_thread, args=(username,))           [70;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [71;118H                esc_worker.start()                                                                                 [72;118H                                                                                                                   [73;118H[34m#o==================================o====================================o================================[0m         [74;118H[33mdef[0m [36mesc_sn014_Q_thread[0m(username):                                                                                  [75;118H        thread_list.append(username)                                                                               [76;118H        counter=[31m0[0m                                                                                                  [77;118H        [33mwhile[0m [36mTrue[0m:                                                                                                [78;118H                [33mtry[0m:                                                                                               [79;118H                        hb = esc_sn014_Q.get([36mTrue[0m, [31m20[0m)                                                             [80;118H                        [33mif[0m hb:                                                                                     [81;118H                            esc_sn014_Q.task_done()                                                                [82;118H                [33mexcept[0m:                                                                                            [83;118H                        [36mprint[0m([31m"14:timeout"[0m)                                                                        [84;118H                        counter = counter + [31m1[0m                                                                      [85;118H                        [33mif[0m counter==[31m3[0m:                                                                             [86;118H                                counter=[31m0[0m                                                                          [87;118H                                [36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn014, raise a trap"[0m)               [88;118H                                thread_list.pop(username)                                                          [89;118H                                [33mbreak[0m                                                                              [90;118H                        [33melif[0m counter < [31m3[0m:                                                                          [91;118H                                [33mcontinue[0m                                                                           [92;118H                                                                                                                   [93;118H[34m#o==================================o====================================o================================[0m         [94;118H[33mdef[0m [36mesc_sn01_Q_thread[0m(username):                                                                                   [95;118H        thread_list.append(username)                                                                               [96;118H        counter=[31m0[0m                                                                                                  [97;118H        [33mwhile[0m [36mTrue[0m:                                                                                                [98;118H                [33mtry[0m:                                                                                               [99;118H                        hb = esc_sn01_Q.get([36mTrue[0m, [31m20[0m)                                                              [100;118H                        [33mif[0m hb:                                                                                     [101;118H                            esc_sn01_Q.task_done()                                                                 [102;118H                [33mexcept[0m:                                                                                            [103;118H                        [36mprint[0m([31m"01:timeout"[0m)                                                                        [104;118H                        counter = counter + [31m1[0m                                                                      [105;118H                        [33mif[0m counter==[31m3[0m:                                                                             [106;118H                                counter=[31m0[0m                                                                          [107;118H                                [36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn01, raise a trap"[0m)                [108;118H                                thread_list.pop(username)                                                          [109;118H                                [33mbreak[0m                                                                              [110;118H                        [33melif[0m counter < [31m3[0m:                                                                          [111;118H                                [33mcontinue[0m                                                                           [112;118H[34m#o==================================o====================================o================================[0m         [113;118H[33mdef[0m [36mesc_sn015_Q_thread[0m(username):                                                                                  [114;118H                                                                                                                   [114;126Hthread_list.append(username)[115;218H[1m[7m3-17[31;134H[34h[?25h[?25l[0m[116;1H[1m-- VISUAL --[31;134H[34h[?25h[?25l[0m[7m[33mif[0m[7m flag: [32;118H                       [0m[115;216H[1m[7m2,3-24[32;141H[34h[?25h[?25l[0m[7m escQ.esc_thread_handler(session[[0m[7m[31m'username'[0m[7m]) [33;118H                [0m[115;216H[1m[7m3,3-17[33;134H[34h[?25h[?25l[0m[7msql = [0m[7m[31m"INSERT INTO esc_tbl VALUES('%s', '%d', '%d', '%s', '%s', '%s', '%s', '%d')"[0m[7m % [0m[7m[35m\[0m[7m [34;118H                       [0m[115;216H[1m[7m4,3-24[34;141H[34h[?25h[?25l[0m[7m                         (session[[0m[7m[31m'username'[0m[7m], [0m[7m[36mint[0m[7m(session[[0m[7m[31m'bytes_sent'[0m[7m]), [0m[7m[36mint[0m[7m(session[[0m[7m[31m'byte[35;118Hs_recv'[0m[7m]), session[[0m[7m[31m'local_ip'[0m[7m], session[[0m[7m[31m'remote_ip'[0m[7m],session[[0m[7m[31m'connected_since'[0m[7m], [0m[7m[31m"UP"[0m[7m, [0m[7m[31m1[0m[7m) [36;118H                [0m[115;216H[1m[7m5,3-17[36;134H[34h[?25h[?25l[0m[7mno_of_rows = cursor.execute(sql) [37;118H                [0m[115;216H[1m[7m6[37;134H[34h[?25h[?25l[0m[7mc[0m[115;218H[1m[7m4-18[37;135H[34h[?25h[?25l[0m[7mo[0m[115;218H[1m[7m5-19[37;136H[34h[?25h[?25l[0m[7mn[0m[115;218H[1m[7m6-20[37;137H[34h[?25h[?25l[0m[7mn[0m[115;218H[1m[7m7-21[37;138H[34h[?25h[?25l[0m[7m.[0m[115;218H[1m[7m8-22[37;139H[34h[?25h[?25l[0m[7mc[0m[115;218H[1m[7m9-23[37;140H[34h[?25h[?25l[0m[7mo[0m[115;218H[1m[7m10-24[37;141H[34h[?25h[?25l[0m[7mm[0m[115;219H[1m[7m1-25[37;142H[34h[?25h[?25l[0m[7mm[0m[115;219H[1m[7m2-26[37;143H[34h[?25h[?25l[0m[7mi[0m[115;219H[1m[7m3-27[37;144H[34h[?25h[?25l[0m[7mt[0m[46m()[0m[115;219H[1m[7m4-28[37;145H[34h[?25h[?25l[0m[7m([0m[115;219H[1m[7m5-29[37;146H[34h[?25h[?25l[0m[7m)[0m[115;219H[1m[7m6-30[37;147H[34h[?25h[?25l[34h[?25h[?25l[34h[?25h[?25l[0m[116;1H6 lines <ed 1 time[31;126H[33mif[0m flag:[31;134H[K[32;118H                escQ.esc_thread_handler(session[[31m'username'[0m])[32;178H[K[33;118H        sql = [31m"INSERT INTO esc_tbl VALUES('%s', '%d', '%d', '%s', '%s', '%s', '%s', '%d')"[0m % [35m\[0m[33;212H[K[34;118H                                        (session[[31m'username'[0m], [36mint[0m(session[[31m'bytes_sent'[0m]), [36mint[0m(session[[31m'bytes_recv'[0m][35;118H), session[[31m'local_ip'[0m], session[[31m'remote_ip'[0m],session[[31m'connected_since'[0m], [31m"UP"[0m, [31m1[0m)[35;199H[K[36;118H        no_of_rows = cursor.execute(sql)[36;158H[K[37;118H        conn.commit()[37;139H[K[115;216H[1m[7m1,2-9  [31;126H[34h[?25h[?25l[0m[116;1H[K[116;1H:[34h[?25hw[?25l[34h[?25h[?25l"esc_queue.py" 207L, 5907C written[115;131H[1m[7m   [31;126H[34h[?25h[?25l[115;216H2,2-16[32;133H[34h[?25h[?25l[115;218H3-17[32;134H[34h[?25h[?25l[115;216H1,9-16[31;133H[34h[?25h[?25l[0m[31;118H                escQ.esc_thread_handler(session[[31m'username'[0m])                                                       [32;118H        sql = [31m"INSERT INTO esc_tbl VALUES('%s', '%d', '%d', '%s', '%s', '%s', '%s', '%d')"[0m % [35m\[0m                     [33;118H                                        (session[[31m'username'[0m], [36mint[0m(session[[31m'bytes_sent'[0m]), [36mint[0m(session[[31m'bytes_recv'[0m][34;118H), session[[31m'local_ip'[0m], session[[31m'remote_ip'[0m],session[[31m'connected_since'[0m], [31m"UP"[0m, [31m1[0m)                                  [35;118H        no_of_rows = cursor.execute(sql)                                                                           [36;118H        conn.commit()                                                                                              [37;118H        conn.close()                                                                                               [38;118H        cursor.close()                                                                                             [39;118H                                                                                                                   [40;118H                                                                                                                   [41;118H                                                                                                                   [42;118H[33mdef[0m [36mesc_thread_handler[0m(username):                                                                                  [43;118H        [33mif[0m username == [31m'esc_sn014'[0m:                                                                                [44;118H                esc_worker = threading.Thread(name=username, target=esc_sn014_Q_thread, args=(username,))          [45;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [46;118H                esc_worker.start()                                                                                 [47;118H        [33mif[0m username == [31m'esc_sn029'[0m:                                                                                [48;118H                esc_worker = threading.Thread(name=username, target=esc_sn029_Q_thread, args=(username,))          [49;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [50;118H                esc_worker.start()                                                                                 [51;118H        [33mif[0m username == [31m'esc_sn026'[0m:                                                                                [52;118H                esc_worker = threading.Thread(name=username, target=esc_sn026_Q_thread, args=(username,))          [53;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [54;118H                esc_worker.start()                                                                                 [55;118H        [33mif[0m username == [31m'esc_sn023'[0m:                                                                                [56;118H                esc_worker = threading.Thread(name=username, target=esc_sn023_Q_thread, args=(username,))          [57;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [58;118H                esc_worker.start()                                                                                 [59;118H        [33mif[0m username == [31m'esc_sn015'[0m:                                                                                [60;118H                esc_worker = threading.Thread(name=username, target=esc_sn015_Q_thread, args=(username,))          [61;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [62;118H                esc_worker.start()                                                                                 [63;118H        [33mif[0m username == [31m'esc_sn01'[0m:                                                                                 [64;118H                esc_worker = threading.Thread(name=username, target=esc_sn01_Q_thread, args=(username,))           [65;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [66;118H                esc_worker.start()                                                                                 [67;118H        [33mif[0m username == [31m'esc_sn08'[0m:                                                                                 [68;118H                esc_worker = threading.Thread(name=username, target=esc_sn08_Q_thread, args=(username,))           [69;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [70;118H                esc_worker.start()                                                                                 [71;118H                                                                                                                   [72;118H[34m#o==================================o====================================o================================[0m         [73;118H[33mdef[0m [36mesc_sn014_Q_thread[0m(username):                                                                                  [74;118H        thread_list.append(username)                                                                               [75;118H        counter=[31m0[0m                                                                                                  [76;118H        [33mwhile[0m [36mTrue[0m:                                                                                                [77;118H                [33mtry[0m:                                                                                               [78;118H                        hb = esc_sn014_Q.get([36mTrue[0m, [31m20[0m)                                                             [79;118H                        [33mif[0m hb:                                                                                     [80;118H                            esc_sn014_Q.task_done()                                                                [81;118H                [33mexcept[0m:                                                                                            [82;118H                        [36mprint[0m([31m"14:timeout"[0m)                                                                        [83;118H                        counter = counter + [31m1[0m                                                                      [84;118H                        [33mif[0m counter==[31m3[0m:                                                                             [85;118H                                counter=[31m0[0m                                                                          [86;118H                                [36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn014, raise a trap"[0m)               [87;118H                                thread_list.pop(username)                                                          [88;118H                                [33mbreak[0m                                                                              [89;118H                        [33melif[0m counter < [31m3[0m:                                                                          [90;118H                                [33mcontinue[0m                                                                           [91;118H                                                                                                                   [92;118H[34m#o==================================o====================================o================================[0m         [93;118H[33mdef[0m [36mesc_sn01_Q_thread[0m(username):                                                                                   [94;118H        thread_list.append(username)                                                                               [95;118H        counter=[31m0[0m                                                                                                  [96;118H        [33mwhile[0m [36mTrue[0m:                                                                                                [97;118H                [33mtry[0m:                                                                                               [98;118H                        hb = esc_sn01_Q.get([36mTrue[0m, [31m20[0m)                                                              [99;118H                        [33mif[0m hb:                                                                                     [100;118H                            esc_sn01_Q.task_done()                                                                 [101;118H                [33mexcept[0m:                                                                                            [102;118H                        [36mprint[0m([31m"01:timeout"[0m)                                                                        [103;118H                        counter = counter + [31m1[0m                                                                      [104;118H                        [33mif[0m counter==[31m3[0m:                                                                             [105;118H                                counter=[31m0[0m                                                                          [106;118H                                [36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn01, raise a trap"[0m)                [107;118H                                thread_list.pop(username)                                                          [108;118H                                [33mbreak[0m                                                                              [109;118H                        [33melif[0m counter < [31m3[0m:                                                                          [110;118H                                [33mcontinue[0m                                                                           [111;118H[34m#o==================================o====================================o================================[0m         [112;118H[33mdef[0m [36mesc_sn015_Q_thread[0m(username):                                                                                  [113;118H        thread_list.append(username)                                                                               [114;118H                                                                                                                   [114;126Hcounter=[31m0[0m[115;131H[1m[7m[+][84C3-17[0m[116;1H[K[31;134H[34h[?25h[?25l[31;118H        sql = [31m"INSERT INTO esc_tbl VALUES('%s', '%d', '%d', '%s', '%s', '%s', '%s', '%d')"[0m % [35m\[0m                     [32;118H                                        (session[[31m'username'[0m], [36mint[0m(session[[31m'bytes_sent'[0m]), [36mint[0m(session[[31m'bytes_recv'[0m][33;118H), session[[31m'local_ip'[0m], session[[31m'remote_ip'[0m],session[[31m'connected_since'[0m], [31m"UP"[0m, [31m1[0m)                                  [34;118H        no_of_rows = cursor.execute(sql)                                                                           [35;118H        conn.commit()                                                                                              [36;118H        conn.close()                                                                                               [37;118H        cursor.close()                                                                                             [38;118H                                                                                                                   [39;118H                                                                                                                   [40;118H                                                                                                                   [41;118H[33mdef[0m [36mesc_thread_handler[0m(username):                                                                                  [42;118H        [33mif[0m username == [31m'esc_sn014'[0m:                                                                                [43;118H                esc_worker = threading.Thread(name=username, target=esc_sn014_Q_thread, args=(username,))          [44;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [45;118H                esc_worker.start()                                                                                 [46;118H        [33mif[0m username == [31m'esc_sn029'[0m:                                                                                [47;118H                esc_worker = threading.Thread(name=username, target=esc_sn029_Q_thread, args=(username,))          [48;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [49;118H                esc_worker.start()                                                                                 [50;118H        [33mif[0m username == [31m'esc_sn026'[0m:                                                                                [51;118H                esc_worker = threading.Thread(name=username, target=esc_sn026_Q_thread, args=(username,))          [52;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [53;118H                esc_worker.start()                                                                                 [54;118H        [33mif[0m username == [31m'esc_sn023'[0m:                                                                                [55;118H                esc_worker = threading.Thread(name=username, target=esc_sn023_Q_thread, args=(username,))          [56;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [57;118H                esc_worker.start()                                                                                 [58;118H        [33mif[0m username == [31m'esc_sn015'[0m:                                                                                [59;118H                esc_worker = threading.Thread(name=username, target=esc_sn015_Q_thread, args=(username,))          [60;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [61;118H                esc_worker.start()                                                                                 [62;118H        [33mif[0m username == [31m'esc_sn01'[0m:                                                                                 [63;118H                esc_worker = threading.Thread(name=username, target=esc_sn01_Q_thread, args=(username,))           [64;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [65;118H                esc_worker.start()                                                                                 [66;118H        [33mif[0m username == [31m'esc_sn08'[0m:                                                                                 [67;118H                esc_worker = threading.Thread(name=username, target=esc_sn08_Q_thread, args=(username,))           [68;118H                esc_worker.setDaemon = [36mTrue[0m                                                                        [69;118H                esc_worker.start()                                                                                 [70;118H                                                                                                                   [71;118H[34m#o==================================o====================================o================================[0m         [72;118H[33mdef[0m [36mesc_sn014_Q_thread[0m(username):                                                                                  [73;118H        thread_list.append(username)                                                                               [74;118H        counter=[31m0[0m                                                                                                  [75;118H        [33mwhile[0m [36mTrue[0m:                                                                                                [76;118H                [33mtry[0m:                                                                                               [77;118H                        hb = esc_sn014_Q.get([36mTrue[0m, [31m20[0m)                                                             [78;118H                        [33mif[0m hb:                                                                                     [79;118H                            esc_sn014_Q.task_done()                                                                [80;118H                [33mexcept[0m:                                                                                            [81;118H                        [36mprint[0m([31m"14:timeout"[0m)                                                                        [82;118H                        counter = counter + [31m1[0m                                                                      [83;118H                        [33mif[0m counter==[31m3[0m:                                                                             [84;118H                                counter=[31m0[0m                                                                          [85;118H                                [36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn014, raise a trap"[0m)               [86;118H                                thread_list.pop(username)                                                          [87;118H                                [33mbreak[0m                                                                              [88;118H                        [33melif[0m counter < [31m3[0m:                                                                          [89;118H                                [33mcontinue[0m                                                                           [90;118H                                                                                                                   [91;118H[34m#o==================================o====================================o================================[0m         [92;118H[33mdef[0m [36mesc_sn01_Q_thread[0m(username):                                                                                   [93;118H        thread_list.append(username)                                                                               [94;118H        counter=[31m0[0m                                                                                                  [95;118H        [33mwhile[0m [36mTrue[0m:                                                                                                [96;118H                [33mtry[0m:                                                                                               [97;118H                        hb = esc_sn01_Q.get([36mTrue[0m, [31m20[0m)                                                              [98;118H                        [33mif[0m hb:                                                                                     [99;118H                            esc_sn01_Q.task_done()                                                                 [100;118H                [33mexcept[0m:                                                                                            [101;118H                        [36mprint[0m([31m"01:timeout"[0m)                                                                        [102;118H                        counter = counter + [31m1[0m                                                                      [103;118H                        [33mif[0m counter==[31m3[0m:                                                                             [104;118H                                counter=[31m0[0m                                                                          [105;118H                                [36mprint[0m([31m"[0m[35m\t\t\t\t\t[0m[31mNo heart beat detcted for esc_sn01, raise a trap"[0m)                [106;118H                                thread_list.pop(username)                                                          [107;118H                                [33mbreak[0m                                                                              [108;118H                        [33melif[0m counter < [31m3[0m:                                                                          [109;118H                                [33mcontinue[0m                                                                           [110;118H[34m#o==================================o====================================o================================[0m         [111;118H[33mdef[0m [36mesc_sn015_Q_thread[0m(username):                                                                                  [112;118H        thread_list.append(username)                                                                               [113;118H        counter=[31m0[0m                                                                                                  [114;118H                                                                                                                   [114;126H[33mwhile[0m [36mTrue[0m:[115;218H[1m[7m2-9 [31;126H[34h[?25h[?25l[115;216H2,2-16[32;133H[34h[?25h[?25l[115;216H1,2-9 [31;126H[34h[?25h[?25l[115;218H3-10[31;127H[34h[?25h[?25l[115;218H4-11[31;128H[34h[?25h[?25l[115;218H5-12[31;129H[34h[?25h[?25l[115;218H6-13[31;130H[34h[?25h[?25l[115;218H7-14[31;131H[34h[?25h[?25l[115;218H8-15[31;132H[34h[?25h[?25l[115;218H9-16[31;133H[34h[?25h[?25l[115;218H10-17[31;134H[34h[?25h[?25l[115;219H1-18[31;135H[34h[?25h[?25l[115;219H2-19[31;136H[34h[?25h[?25l[115;219H3-20[31;137H[34h[?25h[?25l[115;219H4-21[31;138H[34h[?25h[?25l[115;219H5-22[31;139H[34h[?25h[?25l[115;219H6-23[31;140H[34h[?25h[?25l[115;219H7-24[31;141H[34h[?25h[?25l[115;219H8-25[31;142H[34h[?25h[?25l[115;219H9-26[31;143H[34h[?25h[?25l[115;218H20-27[31;144H[34h[?25h[?25l[115;219H1-28[31;145H[34h[?25h[?25l[115;219H2-29[31;146H[34h[?25h[?25l[115;219H3-30[31;147H[34h[?25h[?25l[115;219H4-31[31;148H[34h[?25h[?25l[115;219H5-32[31;149H[34h[?25h[?25l[115;219H4-31[31;148H[34h[?25h[?25l[115;219H3-30[31;147H[34h[?25h[?25l[115;219H2-29[31;146H[34h[?25h[?25l[115;219H1-28[31;145H[34h[?25h[?25l[115;219H2-29[31;146H[34h[?25h[?25l[115;219H3-30[31;147H[34h[?25h[?25l[115;219H4-31[31;148H[34h[?25h[?25l[115;219H5-32[31;149H[34h[?25h[?25l[115;219H6-33[31;150H[34h[?25h[?25l[115;219H5-32[31;149H[34h[?25h[?25l[0m[116;1H[1m-- INSERT --[31;149H[34h[?25h[?25l[0m[31mhtbl VALUES('%s', '%d', '%d', '%s', '%s', '%s', '%s', '%d')"[0m % [35m\[0m[115;219H[1m[7m6-33[31;150H[34h[?25h[?25l[0m[31metbl VALUES('%s', '%d', '%d', '%s', '%s', '%s', '%s', '%d')"[0m % [35m\[0m[115;219H[1m[7m7-34[31;151H[34h[?25h[?25l[0m[31matbl VALUES('%s', '%d', '%d', '%s', '%s', '%s', '%s', '%d')"[0m % [35m\[0m[115;219H[1m[7m8-35[31;152H[34h[?25h[?25l[0m[31mbtbl VALUES('%s', '%d', '%d', '%s', '%s', '%s', '%s', '%d')"[0m % [35m\[0m[115;219H[1m[7m9-36[31;153H[34h[?25h[?25l[0m[1C[31mtbl VALUES('%s', '%d', '%d', '%s', '%s', '%s', '%s', '%d')"[0m % [35m\[0m[115;218H[1m[7m30-37[31;154H[34h[?25h[?25l[0m[31m_tbl VALUES('%s', '%d', '%d', '%s', '%s', '%s', '%s', '%d')"[0m % [35m\[0m[115;219H[1m[7m1-38[31;155H[34h[?25h[0m[116;1H[K[?25l[115;219H[1m[7m0-37[31;154H[34h[?25h[?25l[116;1H[0m:[34h[?25hw[?25l[34h[?25h[?25l"esc_queue.py" 205L, 5856C written[115;131H[1m[7m   [31;154H[34h[?25h[?25l[115;218H29-36[31;153H[34h[?25h[?25l[115;219H8-35[31;152H[34h[?25h[?25l[115;219H7-34[31;151H[34h[?25h[?25l[0m[116;1H[1m-- REPLACE --[0m[116;14H[K[31;151H[34h[?25h[?25l[115;216H[1m[7m2,5-33 [32;150H[34h[?25h[?25l[115;218H4-25[32;142H[34h[?25h[?25l[115;216H1,18-25[31;142H[34h[?25h[?25l[115;219H9-26[31;143H[34h[?25h[?25l[115;218H20-27[31;144H[34h[?25h[?25l[115;219H1-28[31;145H[34h[?25h[?25l[115;219H2-29[31;146H[34h[?25h[?25l[115;219H3-30[31;147H[34h[?25h[?25l[115;219H4-31[31;148H[34h[?25h[?25l[115;219H5-32[31;149H[34h[?25h[?25l[115;219H6-33[31;150H[34h[?25h[?25l[0m[31mb[0m[115;131H[1m[7m[+][85C7-34[31;151H[34h[?25h[?25l[0m[31me[0m[115;219H[1m[7m8-35[31;152H[34h[?25h[?25l[0m[31ma[0m[115;219H[1m[7m9-36[31;153H[34h[?25h[?25l[115;218H30-37[31;154H[34h[?25h[0m:[31m_[0m[116;1H[K[?25l[115;218H[1m[7m29-36[31;153H[34h[?25h[?25l[116;1H[0m:w[34h[?25h[?25l"esc_queue.py" 205L, 5856C written[115;131H[1m[7m   [31;153H[34h[?25h[?25l[115;218H30-37[31;154H[34h[?25h[?25l[115;219H1-38[31;155H[34h[?25h[?25l[115;219H2-39[31;156H[34h[?25h[?25l[115;219H3-40[31;157H[34h[?25h[?25l[115;219H4-41[31;158H[34h[?25h[?25l[115;219H5-42[31;159H[34h[?25h[?25l[115;219H6-43[31;160H[34h[?25h[?25l[115;219H7-44[31;161H[34h[?25h[?25l[115;219H8-45[31;162H[34h[?25h[?25l[115;219H9-46[31;163H[34h[?25h[?25l[115;218H40-47[31;164H[34h[?25h[?25l[0m[1C[31m[46m([46C)[0m[115;219H[1m[7m1-48[31;165H[34h[?25h[?25l[0m[31m([46C)[0m[115;219H[1m[7m2-49[31;166H[34h[?25h[?25l[115;219H3-50[31;167H[34h[?25h[?25l[115;219H4-51[31;168H[34h[?25h[?25l[115;219H5-52[31;169H[34h[?25h[?25l[115;219H6-53[31;170H[34h[?25h[?25l[115;219H7-54[31;171H[34h[?25h[?25l[115;219H8-55[31;172H[34h[?25h[?25l[115;219H9-56[31;173H[34h[?25h[?25l[115;218H50-57[31;174H[34h[?25h[?25l[0m[31ms[0m[115;131H[1m[7m[+][31;174H[34h[?25h[?25l[115;219H1-58[31;175H[34h[?25h[?25l[115;219H2-59[31;176H[34h[?25h[?25l[115;219H3-60[31;177H[34h[?25h[?25l[115;219H4-61[31;178H[34h[?25h[?25l[115;219H5-62[31;179H[34h[?25h[?25l[115;219H6-63[31;180H[34h[?25h[?25l[115;219H7-64[31;181H[34h[?25h[?25l[115;219H8-65[31;182H[34h[?25h[?25l[115;219H9-66[31;183H[34h[?25h[?25l[115;218H60-67[31;184H[34h[?25h[?25l[115;219H1-68[31;185H[34h[?25h[?25l[115;219H2-69[31;186H[34h[?25h[?25l[115;219H3-70[31;187H[34h[?25h[?25l[115;219H4-71[31;188H[34h[?25h[?25l[115;219H5-72[31;189H[34h[?25h[?25l[115;219H6-73[31;190H[34h[?25h[?25l[115;219H7-74[31;191H[34h[?25h[?25l[115;219H8-75[31;192H[34h[?25h[?25l[115;219H9-76[31;193H[34h[?25h[?25l[115;218H70-77[31;194H[34h[?25h[?25l[115;219H1-78[31;195H[34h[?25h[?25l[115;219H2-79[31;196H[34h[?25h[?25l[115;219H3-80[31;197H[34h[?25h[?25l[115;219H4-81[31;198H[34h[?25h[?25l[115;219H5-82[31;199H[34h[?25h[?25l[115;219H6-83[31;200H[34h[?25h[?25l[115;219H7-84[31;201H[34h[?25h[?25l[115;219H6-83[31;200H[34h[?25h[?25l[0m[116;1H[1m-- VISUAL --[0m[116;13H[K[31;200H[34h[?25h[?25l[7m[31m,[0m[115;219H[1m[7m7-84[31;201H[34h[?25h[?25l[0m[7m[31m [0m[115;219H[1m[7m8-85[31;202H[34h[?25h[?25l[0m[7m[31m'[0m[115;219H[1m[7m9-86[31;203H[34h[?25h[?25l[0m[7m[31m%[0m[115;218H[1m[7m80-87[31;204H[34h[?25h[?25l[0m[7m[31ms[0m[115;219H[1m[7m1-88[31;205H[34h[?25h[?25l[0m[7m[31m'[0m[115;219H[1m[7m2-89[31;206H[34h[?25h[?25l[0m[7m[31m,[0m[115;219H[1m[7m3-90[31;207H[34h[?25h[?25l[0m[7m[31m [0m[115;219H[1m[7m4-91[31;208H[34h[?25h[?25l[0m[7m[31m'[0m[115;219H[1m[7m5-92[31;209H[34h[?25h[?25l[0m[7m[31m%[0m[115;219H[1m[7m6-93[31;210H[34h[?25h[?25l[0m[7m[31md[0m[115;219H[1m[7m7-94[31;211H[34h[?25h[?25l[0m[31;165H[31m[46m([34C)[0m[31m"[0m % [35m\[0m[31;206H[K[116;1H[K[115;218H[1m[7m76-83[31;200H[34h[?25h[?25l[116;1H[0m:[34h[?25hw[?25l[34h[?25h[?25l"esc_queue.py" 205L, 5844C written[115;131H[1m[7m   [31;200H[34h[?25h[?25l[0m[31;165H[31m([34C)[0m[115;219H[1m[7m5-82[31;199H[34h[?25h[?25l[115;219H4-81[31;198H[34h[?25h[?25l[115;219H3-80[31;197H[34h[?25h[?25l[115;219H2-79[31;196H[34h[?25h[?25l[115;219H1-78[31;195H[34h[?25h[?25l[115;219H0-77[31;194H[34h[?25h[?25l[115;218H69-76[31;193H[34h[?25h[?25l[115;219H8-75[31;192H[34h[?25h[?25l[115;219H7-74[31;191H[34h[?25h[?25l[115;219H6-73[31;190H[34h[?25h[?25l[115;219H5-72[31;189H[34h[?25h[?25l[115;219H4-71[31;188H[34h[?25h[?25l[115;219H3-70[31;187H[34h[?25h[?25l[115;219H2-69[31;186H[34h[?25h[?25l[115;219H1-68[31;185H[34h[?25h[?25l[115;219H0-67[31;184H[34h[?25h[?25l[115;218H59-66[31;183H[34h[?25h[?25l[115;219H8-65[31;182H[34h[?25h[?25l[115;219H7-64[31;181H[34h[?25h[?25l[115;219H6-63[31;180H[34h[?25h[?25l[115;219H5-62[31;179H[34h[?25h[?25l[115;219H4-61[31;178H[34h[?25h[?25l[115;219H3-60[31;177H[34h[?25h[?25l[115;219H2-59[31;176H[34h[?25h[?25l[115;219H1-58[31;175H[34h[?25h[?25l[115;219H0-57[31;174H[34h[?25h[?25l[115;218H49-56[31;173H[34h[?25h[?25l[115;218H50-57[31;174H[34h[?25h[?25l[115;219H1-58[31;175H[34h[?25h[?25l[115;219H2-59[31;176H[34h[?25h[?25l[0m[30;146H[46m()[0m[115;216H[1m[7m0,23-30[30;147H[34h[?25h[?25l[0m[29;140H[46m()[0m[30;146H()[115;215H[1m[7m29,17-24[29;141H[34h[?25h[?25l[0m()[115;216H[1m[7m8,41   [28;158H[34h[?25h[?25l[0m[28;142H[46m([14C)[0m[115;219H[1m[7m0[28;157H[34h[?25h[?25l[0m[28;142H([14C)[115;218H[1m[7m39[28;156H[34h[?25h[?25l[115;219H8[28;155H[34h[?25h[?25l[115;219H7[28;154H[34h[?25h[?25l[115;219H6[28;153H[34h[?25h[?25l[115;219H5[28;152H[34h[?25h[?25l[115;219H4[28;151H[34h[?25h[?25l[115;219H3[28;150H[34h[?25h[?25l[115;219H2[28;149H[34h[?25h[?25l[115;219H1[28;148H[34h[?25h[?25l[115;219H0[28;147H[34h[?25h[?25l[115;218H29[28;146H[34h[?25h[?25l[115;219H8[28;145H[34h[?25h[?25l[115;219H7[28;144H[34h[?25h[?25l[115;219H6[28;143H[34h[?25h[?25l[0m[46m([14C)[0m[115;219H[1m[7m5[28;142H[34h[?25h[?25l[0m([14C)[115;219H[1m[7m4[28;141H[34h[?25h[?25l[115;219H3[28;140H[34h[?25h[?25l[115;219H2[28;139H[34h[?25h[?25l[115;219H1[28;138H[34h[?25h[?25l[115;219H0[28;137H[34h[?25h[?25l[115;218H19[28;136H[34h[?25h[?25l[115;219H8[28;135H[34h[?25h[?25l[115;219H7[28;134H[34h[?25h[?25l[115;219H6[28;133H[34h[?25h[?25l[115;219H5[28;132H[34h[?25h[?25l[115;219H4[28;131H[34h[?25h[?25l[115;219H3[28;130H[34h[?25h[?25l[115;219H2[28;129H[34h[?25h[?25l[115;219H1[28;128H[34h[?25h[?25l[115;219H0[28;127H[34h[?25h[?25l[115;218H9 [28;126H[34h[?25h[?25l[115;218H8[28;125H[34h[?25h[?25l[115;218H7[28;124H[34h[?25h[?25l[115;218H6[28;123H[34h[?25h[?25l[115;218H5[28;122H[34h[?25h[?25l[0m[46m([0msessions, flag[46m)[0m:[28;139H[K[115;131H[1m[7m[+][28;122H[34h[?25h[?25l[0m[116;1H[1m-- INSERT --[0m[116;13H[K[28;122H[34h[?25h[?25l[36m[46mi[0m(sessions, fla[46mg[0m):[28;122H[36mi[0m[46m([0m[13Cg[46m)[0m[115;218H[1m[7m6[28;123H[34h[?25h[?25l[0m[36m[46mn[0m(sessions, fla[46mg[0m):[28;123H[36mn[0m[46m([0m[13Cg[46m)[0m[115;218H[1m[7m7[28;124H[34h[?25h[?25l[0m[36m[46ms[0m(sessions, fla[46mg[0m):[28;124H[36ms[0m[46m([0m[13Cg[46m)[0m[115;218H[1m[7m8[28;125H[34h[?25h[?25l[0m[36m[46me[0m(sessions, fla[46mg[0m):[28;125H[36me[0m[46m([0m[13Cg[46m)[0m[115;218H[1m[7m9[28;126H[34h[?25h[?25l[0m[36m[46mr[0m(sessions, fla[46mg[0m):[28;126H[36mr[0m[46m([0m[13Cg[46m)[0m[115;218H[1m[7m10[28;127H[34h[?25h[?25l[0m[36m[46mt[0m(sessions, fla[46mg[0m):[28;127H[36mt[0m[46m([0m[13Cg[46m)[0m[115;219H[1m[7m1[28;128H[34h[?25h[?25l[0m[36m[46m_[0m(sessions, fla[46mg[0m):[28;128H[36m_[0m[46m([0m[13Cg[46m)[0m[115;219H[1m[7m2[28;129H[34h[?25h[?25l[0m[36m[46mq[0m(sessions, fla[46mg[0m):[28;129H[36mq[0m[46m([0m[13Cg[46m)[0m[115;219H[1m[7m3[28;130H[34h[?25h[?25l[0m[36m[46mu[0m(sessions, fla[46mg[0m):[28;130H[36mu[0m[46m([0m[13Cg[46m)[0m[115;219H[1m[7m4[28;131H[34h[?25h[?25l[0m[36m[46me[0m(sessions, fla[46mg[0m):[28;131H[36me[0m[46m([0m[13Cg[46m)[0m[115;219H[1m[7m5[28;132H[34h[?25h[?25l[0m[36m[46mr[0m(sessions, fla[46mg[0m):[28;132H[36mr[0m[46m([0m[13Cg[46m)[0m[115;219H[1m[7m6[28;133H[34h[?25h[?25l[0m[36m[46my[0m(sessions, fla[46mg[0m):[28;133H[36my[0m[46m([0m[13Cg[46m)[0m[115;219H[1m[7m7[28;134H[34h[?25h[?25l[0m[36m[46m_[0m(sessions, fla[46mg[0m):[28;134H[36m_[0m[46m([0m[13Cg[46m)[0m[115;219H[1m[7m8[28;135H[34h[?25h[?25l[0m[36m[46mt[0m(sessions, fla[46mg[0m):[28;135H[36mt[0m[46m([0m[13Cg[46m)[0m[115;219H[1m[7m9[28;136H[34h[?25h[?25l[0m[36m[46mo[0m(sessions, fla[46mg[0m):[28;136H[36mo[0m[46m([0m[13Cg[46m)[0m[115;218H[1m[7m20[28;137H[34h[?25h[?25l[0m[36m[46m_[0m(sessions, fla[46mg[0m):[28;137H[36m_[0m[46m([0m[13Cg[46m)[0m[115;219H[1m[7m1[28;138H[34h[?25h[?25l[0m[36m[46mh[0m(sessions, fla[46mg[0m):[28;138H[36mh[0m[46m([0m[13Cg[46m)[0m[115;219H[1m[7m2[28;139H[34h[?25h[?25l[0m[36m[46mb[0m(sessions, fla[46mg[0m):[28;139H[36mb[0m[46m([0m[13Cg[46m)[0m[115;219H[1m[7m3[28;140H[34h[?25h[?25l[0m[36m[46me[0m(sessions, fla[46mg[0m):[28;140H[36me[0m[46m([0m[13Cg[46m)[0m[115;219H[1m[7m4[28;141H[34h[?25h[?25l[0m[36m[46ma[0m[36mt[0m(sessions, fl[46ma[0mg):[28;141H[36ma[0m[1C[46m([0m[12Cag[46m)[0m[115;219H[1m[7m6[28;143H[34h[?25h[?25l[0m[36m[46m_[0m(sessions, fla[46mg[0m):[28;143H[36m_[0m[46m([0m[13Cg[46m)[0m[115;219H[1m[7m7[28;144H[34h[?25h[?25l[0m[36m[46mt[0m(sessions, fla[46mg[0m):[28;144H[36mt[0m[46m([0m[13Cg[46m)[0m[115;219H[1m[7m8[28;145H[34h[?25h[?25l[0m[36m[46mb[0m(sessions, fla[46mg[0m):[28;145H[36mb[0m[46m([0m[13Cg[46m)[0m[115;219H[1m[7m9[28;146H[34h[?25h[?25l[0m[36m[46ml[0m(sessions, fla[46mg[0m):[28;146H[36ml[0m[46m([0m[13Cg[46m)[0m[115;218H[1m[7m30[28;147H[34h[?25h[0m[116;1H[K[?25l[28;147H([14C)[115;218H[1m[7m29[28;146H[34h[?25h[?25l[116;1H[0m:[34h[?25hw[?25l[34h[?25h[?25l"esc_queue.py" 205L, 5849C written[115;131H[1m[7m   [28;146H[34h[?25h[?25l[0m[1C[46m([14C)[0m[115;218H[1m[7m30[28;147H[34h[?25h[?25l[0m([14C)[115;219H[1m[7m1[28;148H[34h[?25h[?25l[115;219H2[28;149H[34h[?25h[?25l[115;219H1[28;148H[34h[?25h[?25l[0m[46m([14C)[0m[115;219H[1m[7m0[28;147H[34h[?25h[?25l[0m([14C)[115;218H[1m[7m29[28;146H[34h[?25h[?25l[115;219H8[28;145H[34h[?25h[?25l[115;219H9[28;146H[34h[?25h[?25l[0m[1C[46m([14C)[0m[115;218H[1m[7m30[28;147H[34h[?25h[?25l[0m([14C)[115;216H[1m[7m7,0-1[27;118H[34h[?25h[?25l[0m[26;131H[46m([0me[46m)[0m[115;216H[1m[7m6,16 [26;133H[34h[?25h[?25l[0m(e)[115;216H[1m[7m5,22[25;139H[34h[?25h[?25l[115;216H4,0-1[24;118H[34h[?25h[?25l[0m[116;1H[K[116;1H:[34h[?25hw[?25l[34h[?25h[?25l"esc_queue.py" 205L, 5849C written[24;118H[34h[?25h[?25l[115;216H[1m[7m3,23 [23;140H[34h[?25h[?25l[115;216H2,30[22;147H[34h[?25h[?25l[0m[21;146H[46m()[0m[115;216H[1m[7m1[21;147H[34h[?25h[?25l[0m()[115;216H[1m[7m0[20;147H[34h[?25h[?25l[115;215H19,8 [19;125H[34h[?25h[?25l[115;216H8,14[18;131H[34h[?25h[?25l[0m[116;1H[K[116;1H:[34h[?25hw[?25l[34h[?25h[?25l"esc_queue.py" 205L, 5849C written[18;131H[34h[?25h[?25l[115;216H[1m[7m7,0-1[17;118H[34h[?25h[?25l[0m[16;130H[46m[][0m[115;216H[1m[7m6,14 [16;131H[34h[?25h[?25l[0m[][115;216H[1m[7m5,0-1[15;118H[34h[?25h[?25l[0m[14;137H[46m()[0m[115;216H[1m[7m4,21 [14;138H[34h[?25h[?25l[0m[13;136H[46m()[0m[14;137H()[115;216H[1m[7m3,20[13;137H[34h[?25h[?25l[0m[12;137H[46m()[0m[13;136H()[115;216H[1m[7m2,21[12;138H[34h[?25h[?25l[0m[11;137H[46m()[0m[12;137H()[115;216H[1m[7m1[11;138H[34h[?25h[?25l[0m[10;137H[46m()[0m[11;137H()[115;216H[1m[7m0[10;138H[34h[?25h[?25l[0m[9;137H[46m()[0m[10;137H()[115;215H[1m[7m9,21 [9;138H[34h[?25h[?25l[0m[8;135H[46m()[0m[9;137H()[115;215H[1m[7m8,19[8;136H[34h[?25h[?25l[0m()[115;215H[1m[7m7,0-1[7;118H[34h[?25h[?25l[115;215H6,30 [6;147H[34h[?25h[?25l[0m[116;1H[K[116;1H:[34h[?25hw[?25l[34h[?25h[?25l"esc_queue.py" 205L, 5849C written[6;147H[34h[?25h[?25l[115;215H[1m[7m5,22[5;139H[34h[?25h[?25l[115;215H4,16[4;133H[34h[?25h[?25l[115;215H3,24[3;141H[34h[?25h[?25l[115;215H2,0-1[2;118H[34h[?25h[?25l[115;215H1,21 [1;138H[34h[?25h[?25l[115;215H2,0-1[2;118H[34h[?25h[?25l[115;215H3,24 [3;141H[34h[?25h[?25l[115;215H4,16[4;133H[34h[?25h[?25l[115;215H5,22[5;139H[34h[?25h[?25l[115;215H6,30[6;147H[34h[?25h[?25l[115;215H7,0-1[7;118H[34h[?25h[?25l[0m[8;135H[46m()[0m[115;215H[1m[7m8,19 [8;136H[34h[?25h[?25l[0m()[9;137H[46m()[0m[115;215H[1m[7m9,21[9;138H[34h[?25h[?25l[0m()[10;137H[46m()[0m[115;215H[1m[7m10,21[10;138H[34h[?25h[?25l[0m()[11;137H[46m()[0m[115;216H[1m[7m1[11;138H[34h[?25h[?25l[0m()[12;137H[46m()[0m[115;216H[1m[7m2[12;138H[34h[?25h[?25l[0m()[13;136H[46m()[0m[115;216H[1m[7m3,20[13;137H[34h[?25h[?25l[0m()[14;137H[46m()[0m[115;216H[1m[7m4,21[14;138H[34h[?25h[?25l[0m()[115;216H[1m[7m5,0-1[15;118H[34h[?25h[?25l[0m[16;130H[46m[][0m[115;216H[1m[7m6,14 [16;131H[34h[?25h[?25l[0m[][115;216H[1m[7m7,0-1[17;118H[34h[?25h[?25l[115;216H8,14 [18;131H[34h[?25h[?25l[115;216H9,8 [19;125H[34h[?25h[?25l[115;215H20,30[20;147H[34h[?25h[?25l[0m[21;146H[46m()[0m[115;216H[1m[7m1[21;147H[34h[?25h[?25l[0m()[115;216H[1m[7m2[22;147H[34h[?25h[?25l[0m[116;1H[K[116;1H:[34h[?25hw[?25l[34h[?25hq[?25l[34h[?25h[?25l"esc_queue.py" 205L, 5849C written[1;1H                        MessageStructure=[31m'Raw'[0m[1;47H[K[2;25H)[2;117H[K[3;1H[34m#[0m[3;2H[K[4;1H[34m#__________________________________________________________________________________________________[0m[4;117H[K[5;9H[K[6;1H[33mdef[0m [36mnotify_email[0m(esc_id, siteID, escLabel):[6;44H[K[7;9H[K[8;9HpySubject = [31m"Alert: ESC Deployed"[0m[8;42H[K[9;9HpyMessage = [31m"ESC deployed successfully at site: "[0m + siteID + [31m"[0m[35m\n[0m[31m"[0m + [31m" ESC Label Number: "[0m +  escLabel + [31m"[0m[35m\n[0m[31m"[0m[9;117H[K[10;9Hresponse = client.list_subscriptions_by_topic([10;117H[K[11;9H                TopicArn=[31m'arn:aws:sns:us-west-2:796687173965:NotifyDeployment'[0m,[11;117H[K[12;9H                NextToken=[31m''[0m[12;117H[K[13;25H)[13;26H[K[14;9H[36mprint[0m(response)[14;25H[K[15;9Hresponse = client.publish([15;35H[K[16;25HTopicArn=[31m'arn:aws:sns:us-west-2:796687173965:NotifyDeployment'[0m,[16;117H[K[17;25HMessage= pyMessage,[17;117H[K[18;1H [23CSubject= pySubject,[18;117H[K[19;1H                        MessageStructure=[31m'Raw'[0m[19;47H[K[20;1H                        )[20;27H[K[21;1H[34m#[0m[21;5H[K[22;1H[34m#__________________________________________________________________________________________________[0m[22;117H[K[23;1H[33mif[0m sys.version_info[[31m0[0m] == [31m2[0m:[23;117H[K[24;1H    [36mreload[0m(sys)[24;16H[K[25;1H    sys.setdefaultencoding([31m'utf-8'[0m)[25;117H[K[26;5H[K[27;1H[34m#connect to MySQL database[0m[27;27H[K[28;1H[33mdef[0m [36mconnect[0m():[28;15H[K[29;5H[33mtry[0m:[29;13H[K[30;9Hconn = mysql.connector.connect(host=[31m'localhost'[0m, database=[31m'escdb'[0m, user=[31m'escmonit'[0m, password=[31m'passcode'[0m)[30;117H[K[31;5H    [33mif[0m conn.is_connected():[31;117H[K[32;9H    [33mreturn[0m conn[32;117H[K[33;117H[K[34;1H    [33mexcept[0m Error [33mas[0m e:[34;23H[K[35;1H        [36mprint[0m(e)[35;17H[K[36;9H[K[37;1H[34m#__________________________________________________________________________________________________[0m[37;117H[K[38;1H[33mdef[0m [36mupdate_database[0m([8C, HbeatCount):[38;117H[K[39;9Hconn = connect()[39;25H[K[40;9Hcursor = conn.cursor()[40;31H[K[41;9H[33mfor[0m item [33min[0m sessions:[41;30H[K[42;17Hsession = sessions[item][42;41H[K[43;1H                [33mif[0m session [33mis[0m [36mNone[0m:[43;36H[K[44;17H        [33mcontinue[0m[44;33H[K[45;1H                [34m#sql = "UPDATE esc_tbl SET TxBytes=%d, RxBytes=%d, LocalIp=%s, RemoteIp=%s, lastConnection=%s, CommStatus=%s, HeartBeatCount=%d, WHERE esc_name=%s" % \[46;17H#               (int(session['bytes_sent']), int(session['bytes_recv']), session['local_ip'], session['remote_ip'],session['connected_since'], "UP", 1, session['username'])[0m
                sql = [31m"UPDATE esc_tbl SET TxBytes=%d, RxBytes=%d, lastConnection='%s', HeartBeatCount=%d WHERE esc_name='%s'"[0m %([36mint[0m(session[[31m'bytes_sent'[0m]), [36mint[0m(session[[31m'bytes_recv'[0m]),session[[31m'connected_since'[0m],HbeatCount, session[[31m'uu[48;1Hs[0m[48;117H[K[49;117H[K[50;117H[K[51;117H[K[52;117H[K[53;117H[K[54;117H[K[55;117H[K[56;117H[K[57;117H[K[58;117H[K[59;117H[K[60;117H[K[61;117H[K[62;117H[K[63;117H[K[64;117H[K[65;117H[31m_recv'[0m]), session[[31m'local_ip'[0m], session[[31m'remote_ip'[0m],session[[31m'connected_since'[0m], [31m"UP"[0m, [31m1[0m)
                no_of_rows = cursor.execute(sql)[66;49H[K[67;17Hconn.commit()[67;30H[K[68;9Hconn.close()[68;21H[K[69;10Hursor.close()[69;117H[K[70;9H[K[71;1H[34m#__________________________________________________________________________________________________[0m[71;117H[K[72;1H[33mdef[0m [36mupdate_comm[0m(commStatus, HbeatCount, escId):[72;48H[K[73;1H    conn = connect()[73;21H[K[74;6Hursor = conn.cursor()[74;117H[K[75;5Hsql = [31m"UPDATE esc_tbl SET CommStatus='%s', HeartBeatCount=%d WHERE esc_name='%s'"[0m %(commStatus, HbeatCount, escId)[75;126H[K[76;5H